(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[80],{NsVW:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var d=n(a("W9HT")),o=n(a("p0pE")),i=n(a("eHn4")),s=n(a("2Taf")),c=n(a("vZ4D")),u=n(a("l4Ni")),r=n(a("ujKo")),m=n(a("rlhR")),g=n(a("MhPg"));a("y8nQ");var p,f,h,_,S=n(a("Vl3Y")),C=a("MuoO"),b=l(a("q1tI")),L=a("+n12"),y=n(a("hh8c")),v=n(a("CkN6")),w=n(a("RTFr")),R=n(a("Lv3o")),T=n(a("mOP9")),D=L.list_com_page_size_10,I=(p=(0,C.connect)(function(e){var t=e.product;return{product:t}}),f=S.default.create(),p(h=f((_=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,u.default)(this,(0,r.default)(t).call(this,e)),a.cur_edit_id="",a.edit=function(e){var t=a.state,n=t.addData,l=t.operateData;for(var d in l=(0,L.getSldCopyData)(n),l)l[d].initialValue=e[l[d].name];a.cur_edit_id=e.templateId,a.setState({type:"edit",title:"".concat((0,L.sldComLanguage)("\u7f16\u8f91\u5173\u8054\u7248\u5f0f")),operateData:l,modalVisible:!0})},a.operate=function(e,t){var n=a.state.params,l=a.props.dispatch,d="",o={};"del"==t?(d="product/del_related_template",o.templateIds=e):"edit"==t&&(d="product/edit_related_template",o=e),l({type:d,payload:o,callback:function(e){200==e.state?((0,L.sucTip)(e.msg),a.get_list(n),a.setState({modalVisible:!1})):(0,L.failTip)(e.msg),a.setState({submiting:!1})}})},a.add=function(){var e=a.state,t=e.addData,n=e.operateData;n=(0,L.getSldCopyData)(t),a.setState({modalVisible:!0,type:"add",title:"".concat((0,L.sldComLanguage)("\u6dfb\u52a0\u5173\u8054\u7248\u5f0f")),operateData:n})},a.get_list=function(e){a.setState({initLoading:!0});var t=a.props.dispatch;t({type:"product/get_related_template_lists",payload:e,callback:function(t){a.setState({initLoading:!1}),200==t.state&&((null==t.data.list||0==t.data.list.length)&&a.state.params.current>1?(e.current=e.current-1,a.get_list(e)):a.setState({data:t.data}))}})},a.handleSelectRows=function(e,t){a.setState({selectedRows:e,selectedRowKeys:t})},a.handleTablePagination=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",d=a.state.formValues;if("main"==l){var o=(0,L.sldHandlePaginationData)(e,t,n,d);D=o.pageSize,a.setState({params:o}),a.get_list(o)}},a.resizeTable=function(e,t,n,l){var d=(0,L.dragSldTableColumn)(e,t,l);a.setState((0,i.default)({},n,d))},a.sldHandleCancle=function(){a.setState({modalVisible:!1})},a.sldHandleConfirm=function(e){var t=a.state,n=t.type,l=(t.addData,a.props.dispatch),d=(0,m.default)(a);e.expressState=e.expressState?1:0,a.setState({submiting:!0}),"edit"==n?(e.templateId=a.cur_edit_id,a.operate(e,"edit")):l({type:"product/add_related_template",payload:e,callback:function(e){200==e.state?((0,L.sucTip)(e.msg),d.get_list({pageSize:D}),a.setState({modalVisible:!1})):(0,L.failTip)(e.msg),a.setState({submiting:!1})}})},a.sldSearChange=function(e){a.setState({search_con:e.target.value})},a.sldSearClear=function(){a.setState({search_con:""}),a.sldSearch("")},a.search=function(e){var t=(0,o.default)({},e);for(var n in t)""==t[n]&&delete t[n];a.setState({formValues:t,params:{pageSize:D}}),a.get_list((0,o.default)({pageSize:D},t))},a.seaReset=function(){a.setState({formValues:{},params:{pageSize:D}}),a.get_list({pageSize:D})},a.state={initLoading:!1,submiting:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"",type:"add",params:{pageSize:D},upload_img_info:{},operateData:[],formValues:{},columns:[{title:" ",dataIndex:"templateId",align:"center",width:55,render:function(e,t,n){return(0,L.getTableNum)(a.state.params,D,n)}},{title:"".concat((0,L.sldComLanguage)("\u7248\u5f0f\u540d\u79f0")),dataIndex:"templateName",align:"center",width:150},{title:"".concat((0,L.sldComLanguage)("\u7248\u5f0f\u4f4d\u7f6e")),dataIndex:"templatePosition",align:"center",width:100,render:function(e){return"".concat(1==e?(0,L.sldComLanguage)("\u9876\u90e8"):(0,L.sldComLanguage)("\u5e95\u90e8"))}},{title:"".concat((0,L.sldComLanguage)("\u64cd\u4f5c")),width:100,align:"center",render:function(e,t){return b.default.createElement(b.Fragment,null,b.default.createElement(T.default,{to:{pathname:"/goods/related_template_to_edit",query:{id:t.templateId}}},(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u7f16\u8f91")),function(){return null})),b.default.createElement("span",{className:y.default.splitLine}),(0,L.sldPopConfirmDiy)("leftBottom","".concat((0,L.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664")),function(){return a.operate(t.templateId,"del")},"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),"".concat((0,L.sldComLanguage)("\u53d6\u6d88")),(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u5220\u9664")),function(){return null})))}}],search_data:[{type:"input",label:"".concat((0,L.sldComLanguage)("\u7248\u5f0f\u540d\u79f0")),name:"templateName",placeholder:"".concat((0,L.sldComLanguage)("\u7248\u5f0f\u540d\u79f0"))},{type:"select",label:"".concat((0,L.sldComLanguage)("\u7248\u5f0f\u4f4d\u7f6e")),name:"templatePosition",placeholder:"".concat((0,L.sldComLanguage)("\u8bf7\u9009\u62e9\u7248\u5f0f\u4f4d\u7f6e")),sel_data:[{key:"",name:"".concat((0,L.sldComLanguage)("\u5168\u90e8"))},{key:1,name:"".concat((0,L.sldComLanguage)("\u9876\u90e8"))},{key:2,name:"".concat((0,L.sldComLanguage)("\u5e95\u90e8"))}]}]},a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.get_list({pageSize:D})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRows,n=t.search_data,l=t.columns,o=t.initLoading,i=t.data,s=t.submiting,c=t.operateData,u=t.modalVisible,r=t.title;t.search_con;return b.default.createElement("div",{className:y.default.common_page,style:{flex:1}},(0,L.sldLlineRtextAddGoodsAddMargin)("#69A2F2","".concat((0,L.sldComLanguage)("\u5173\u8054\u7248\u5f0f")),0,0,10),b.default.createElement("div",{className:y.default.tableListForm},b.default.createElement(R.default,{search_data:n,seaSubmit:function(t){return e.search(t)},seaReset:function(){return e.seaReset()}})),b.default.createElement("div",{className:y.default.operate_bg},b.default.createElement(T.default,{to:{pathname:"/goods/related_template_to_edit"}},(0,L.sldIconBtn)(function(){return null},"".concat((0,L.sldComLanguage)("\u65b0\u589e\u5173\u8054\u7248\u5f0f")),7,7))),b.default.createElement(d.default,{spinning:o},b.default.createElement(v.default,{totalHeight:document.body.clientHeight-190-15,selectedRows:a,data:i,rowKey:"templateId",isCheck:!1,columns:l,onSelectRow:this.handleSelectRows,onChange:function(t,a,n){return e.handleTablePagination(t,a,n,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(t,a){return e.resizeTable(t,a,"columns",l)},isColumnResize:!0})),b.default.createElement(w.default,{title:r,submiting:s,width:500,modalVisible:u,sldHandleConfirm:function(t){return e.sldHandleConfirm(t)},sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:L.formItemLayoutModal,content:c}))}}]),t}(b.Component),h=_))||h)||h);t.default=I}}]);