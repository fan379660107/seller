(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[70],{Zep1:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var o=n(a("W9HT")),i=n(a("eHn4")),s=n(a("p0pE")),d=n(a("2Taf")),c=n(a("vZ4D")),r=n(a("l4Ni")),u=n(a("ujKo")),g=n(a("MhPg"));a("y8nQ");var m,f,p,h,_=n(a("Vl3Y")),b=a("MuoO"),L=l(a("q1tI")),v=n(a("mOP9")),C=(n(a("vDqi")),a("+n12")),B=n(a("hh8c")),S=n(a("CkN6")),y=n(a("Lv3o")),w=C.list_com_page_size_10,E=(m=(0,b.connect)(function(e){var t=e.promotion;return{promotion:t}}),f=_.default.create(),m(p=f((h=function(e){function t(e){var a;return(0,d.default)(this,t),a=(0,r.default)(this,(0,u.default)(t).call(this,e)),a.resize=function(){var e=a.state.search_height;void 0!=a.refs.search_part&&a.refs.search_part.clientHeight!=e&&a.setState({search_height:a.refs.search_part.clientHeight})},a.moreSearchToggle=function(){var e=a.state.search_height;void 0!=a.refs.search_part&&a.refs.search_part.clientHeight!=e&&a.setState({search_height:a.refs.search_part.clientHeight})},a.getSetting=function(){var e=a.props.dispatch;e({type:"common/getSetting",payload:{str:"spell_is_enable"},callback:function(e){200==e.state&&a.setState({enableFlag:e.data[0].value,isFirstLoading:!1})}})},a.get_list=function(e){a.setState({initLoading:!0});var t=a.props.dispatch;t({type:"promotion/get_all_blindBox_list",payload:(0,s.default)({},e),callback:function(t){a.setState({initLoading:!1}),200==t.state&&(0==t.data.length&&a.state.params.current>1?(e.current=e.current-1,a.get_list(e)):(a.setState({data:t.data}),console.log(t.data)))}})},a.handleSelectRows=function(e,t){a.setState({selectedRows:e,selectedRowKeys:t})},a.handleTablePagination=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",o=a.state.formValues;if("main"==l){var i=(0,C.sldHandlePaginationData)(e,t,n,o);w=i.pageSize,a.setState({params:i}),a.get_list(i)}},a.resizeTable=function(e,t,n,l){var o=(0,C.dragSldTableColumn)(e,t,l);a.setState((0,i.default)({},n,o))},a.search=function(e){var t=(0,s.default)({},e);for(var n in t.search_activity_time&&(t.startTime=t.search_activity_time[0]?t.search_activity_time[0].format(C.dateFormat)+" 00:00:00":"",t.endTime=t.search_activity_time[1]?t.search_activity_time[1].format(C.dateFormat)+" 23:59:59":"",delete t.search_activity_time),t)""==t[n]&&delete t[n];a.setState({formValues:t,params:{pageSize:w}}),a.get_list((0,s.default)({pageSize:w},t))},a.seaReset=function(){a.setState({formValues:{},params:{pageSize:w}}),a.get_list({pageSize:w})},a.operate=function(e,t){var n=a.state.params,l=a.props.dispatch,o={},i="";"invalid"==t?(i="promotion/invalid_spell_group",o.id=e):"del"==t?(i="promotion/del_spell_group",o.id=e):"publish"==t&&(i="promotion/publish_spell_group",o.id=e),a.setState({submiting:!0}),l({type:i,payload:o,callback:function(e){200==e.state?((0,C.sucTip)(e.msg),a.get_list(n),a.setState({modalVisible:!1})):(0,C.failTip)(e.msg),a.setState({submiting:!1})}})},a.state={search_height:0,isFirstLoading:!0,enableFlag:0,initLoading:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"",type:"add",params:{pageSize:w},search_data:[{type:"input",label:"".concat((0,C.sldComLanguage)("\u76f2\u76d2\u540d\u79f0")),name:"blindBoxName",placeholder:"".concat((0,C.sldComLanguage)("\u8bf7\u8f93\u5165\u76f2\u76d2\u540d\u79f0"))},{type:"select",label:"".concat((0,C.sldComLanguage)("\u76f2\u76d2\u72b6\u6001")),name:"state",placeholder:"".concat((0,C.sldComLanguage)("\u8bf7\u9009\u62e9\u6d3b\u52a8\u72b6\u6001")),sel_data:[{key:"",name:"".concat((0,C.sldComLanguage)("\u4e0a\u67b6"))},{key:"1",name:"".concat((0,C.sldComLanguage)("\u4e0b\u67b6"))}]}],formValues:{},columns:[{title:" ",dataIndex:"id",align:"center",width:30,render:function(e,t,n){return(0,C.getTableNum)(a.state.params,w,n)}},{title:"".concat((0,C.sldComLanguage)("\u76f2\u76d2\u540d\u79f0")),dataIndex:"blindBoxName",align:"center",width:100},{title:"".concat((0,C.sldComLanguage)("\u76f2\u76d2\u4ef7\u683c")),dataIndex:"blindBoxPrice",align:"center",width:100},{title:"".concat((0,C.sldComLanguage)("\u5e93\u5b58")),dataIndex:"quantity",align:"center",width:100},{title:"".concat((0,C.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(e,t){return L.default.createElement(L.Fragment,null,L.default.createElement(v.default,{to:{pathname:"/marketing/spell_group_to_view",query:{id:t.id,tar:"view"}}},(0,C.sldtbaleOpeBtnText)("".concat((0,C.sldComLanguage)("\u67e5\u770b\u8be6\u60c5")),function(){return null})),1==t.state&&L.default.createElement(L.Fragment,null,L.default.createElement("span",{className:B.default.splitLine}),L.default.createElement(v.default,{to:{pathname:"/blindBox/blindBox_to_add",query:{id:t.id,tar:"edit"}}},(0,C.sldtbaleOpeBtnText)("".concat((0,C.sldComLanguage)("\u7f16\u8f91")),function(){return null}))),1==t.state&&L.default.createElement(L.Fragment,null,(0,C.sldPopConfirmDiy)("leftBottom","".concat((0,C.sldComLanguage)("\u53d1\u5e03\u540e\u4e0d\u53ef\u64a4\u9500\uff0c\u662f\u5426\u786e\u5b9a\u53d1\u5e03\uff1f")),function(){return a.operate(t.id,"publish")},"".concat((0,C.sldComLanguage)("\u786e\u5b9a")),"".concat((0,C.sldComLanguage)("\u53d6\u6d88")),(0,C.sldtbaleOpeBtnText)("".concat((0,C.sldComLanguage)("\u53d1\u5e03")),function(){return null}))),(2==t.state||3==t.state)&&L.default.createElement(L.Fragment,null,(0,C.sldPopConfirmDiy)("leftBottom","".concat((0,C.sldComLanguage)("\u786e\u5b9a\u5931\u6548\u8be5\u6d3b\u52a8\u5417\uff1f")),function(){return a.operate(t.id,"invalid")},"".concat((0,C.sldComLanguage)("\u786e\u5b9a")),"".concat((0,C.sldComLanguage)("\u53d6\u6d88")),(0,C.sldtbaleOpeBtnText)("".concat((0,C.sldComLanguage)("\u5931\u6548")),function(){return null}))),(1==t.state||4==t.state||5==t.state)&&L.default.createElement(L.Fragment,null,(0,C.sldPopConfirmDiy)("leftBottom","".concat((0,C.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664\uff1f")),function(){return a.operate(t.id,"del")},"".concat((0,C.sldComLanguage)("\u786e\u5b9a")),"".concat((0,C.sldComLanguage)("\u53d6\u6d88")),(0,C.sldtbaleOpeBtnText)("".concat((0,C.sldComLanguage)("\u5220\u9664")),function(){return null}))))}}]},a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.get_list({pageSize:w}),this.resize(),window.addEventListener("resize",this.resize,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRows,n=t.search_data,l=t.columns,i=t.initLoading,s=t.data,d=t.isFirstLoading,c=t.enableFlag,r=t.search_height;return L.default.createElement("div",{className:B.default.common_page,style:{width:100,flex:1,paddingTop:0}},(0,C.getSldEmptyH)(10),(0,C.sldLlineRtextAddGoodsAddMargin)("#FA6F1E","".concat((0,C.sldComLanguage)("\u76f2\u76d2")),0,0,10),L.default.createElement("div",{className:B.default.tableListForm,ref:"search_part"},L.default.createElement(y.default,{search_data:n,moreSearchToggle:function(){return e.moreSearchToggle()},seaSubmit:function(t){return e.search(t)},seaReset:function(){return e.seaReset()}})),L.default.createElement("div",{className:B.default.operate_bg},1==c||d?L.default.createElement(v.default,{to:{pathname:"/blindBox/blindBox_list_to_add"}},(0,C.sldIconBtn)(function(){return null},"".concat((0,C.sldComLanguage)("\u65b0\u5efa\u76f2\u76d2")),7,0,12,12,3,"fabu1","#08A9B7")):L.default.createElement(v.default,{to:{}},(0,C.sldIconBtnNo)(function(){return null},"".concat((0,C.sldComLanguage)("\u65b0\u5efa\u76f2\u76d2")),7,0,12,12,3,"fabu1","#08A9B7","".concat((0,C.sldComLanguage)("\u76f2\u76d2\u6d3b\u52a8\u672a\u5f00\u542f")))),1==c||d?L.default.createElement(v.default,{to:{pathname:"/blindBox/blindBox_list_to_add"}},(0,C.sldIconBtn)(function(){return null},"".concat((0,C.sldComLanguage)("\u76f2\u76d2\u4e0a\u67b6")),7,0,12,12,3,"fabu1","#08A9B7")):L.default.createElement(v.default,{to:{}},(0,C.sldIconBtnNo)(function(){return null},"".concat((0,C.sldComLanguage)("\u76f2\u76d2\u4e0a\u67b6")),7,0,12,12,3,"fabu1","#08A9B7","".concat((0,C.sldComLanguage)("\u76f2\u76d2\u4ee5\u4e0a\u67b6")))),1==c||d?L.default.createElement(v.default,{to:{pathname:"/blindBox/blindBox_list_to_add"}},(0,C.sldIconBtn)(function(){return null},"".concat((0,C.sldComLanguage)("\u4e0b\u67b6")),7,0,12,12,3,"fabu1","#08A9B7")):L.default.createElement(v.default,{to:{}},(0,C.sldIconBtnNo)(function(){return null},"".concat((0,C.sldComLanguage)("\u4e0b\u67b6")),7,0,12,12,3,"fabu1","#08A9B7","".concat((0,C.sldComLanguage)("\u76f2\u76d2\u4ee5\u4e0b\u67b6")))),1==c||d?L.default.createElement(v.default,{to:{pathname:"/blindBox/blindBox_list_to_add"}},(0,C.sldIconBtn)(function(){return null},"".concat((0,C.sldComLanguage)("\u5220\u9664")),7,0,12,12,3,"fabu1","#08A9B7")):L.default.createElement(v.default,{to:{}},(0,C.sldIconBtnNo)(function(){return null},"".concat((0,C.sldComLanguage)("\u5220\u9664")),7,0,12,12,3,"fabu1","#08A9B7","".concat((0,C.sldComLanguage)("\u5220\u9664\u6210\u529f"))))),L.default.createElement(o.default,{spinning:i},L.default.createElement(S.default,{totalHeight:document.body.clientHeight-165-r,bordered:!1,selectedRows:a,data:s,rowKey:"id",isCheck:!1,columns:l,onSelectRow:this.handleSelectRows,onChange:function(t,a,n){return e.handleTablePagination(t,a,n,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(t,a){return e.resizeTable(t,a,"columns",l)},isColumnResize:!0})))}}]),t}(L.Component),p=h))||p)||p);t.default=E}}]);