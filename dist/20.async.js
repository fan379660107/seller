(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"6oeo":function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2Taf")),s=n(a("vZ4D")),o=n(a("l4Ni")),d=n(a("ujKo")),r=n(a("rlhR")),c=n(a("MhPg"));a("y8nQ");var u,p,g,f,m=n(a("Vl3Y")),_=a("MuoO"),h=l(a("q1tI")),v=a("+n12"),y=n(a("hh8c")),I=a("k82f"),L=(u=(0,_.connect)(function(e){var t=e.product,a=e.global;return{product:t,global:a}}),p=m.default.create(),u(g=p((f=function(e){function t(e){var a;return(0,i.default)(this,t),a=(0,o.default)(this,(0,d.default)(t).call(this,e)),a.addGoodsNext=function(){3==a.props.sele_goods_cat_data.length?a.props.sldAddGoodsSecond():(0,v.failTip)("".concat((0,v.sldComLanguage)("\u5206\u7c7b\u5fc5\u987b\u9009\u5230\u7b2c\u4e09\u7ea7\u624d\u53ef\u4ee5\u53d1\u5e03\u5546\u54c1")))},a.getChild=function(e,t){a.props.sldHandleGoodsCat(e,t)},(0,r.default)(a),a.state={modalVisible:e.modalVisible,data:e.data,sele_goods_cat_data:[]},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e,t){this.setState({modalVisible:e.modalVisible,sele_goods_cat_data:e.sele_goods_cat_data})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.sele_goods_cat_data,l="";return 0==n.length?l="".concat((0,v.sldComLanguage)("\u8bf7\u9009\u62e9\u5546\u54c1\u7c7b\u522b")):(l="".concat((0,v.sldComLanguage)("\u60a8\u9009\u62e9\u5546\u54c1\u7c7b\u522b\u662f:")),n.map(function(e,t){l+=e.categoryName,t!=n.length-1&&(l+=" > ")})),h.default.createElement("div",{className:y.default.sele_goods_cat},h.default.createElement("div",{className:y.default.goods_cat_wrap,style:{marginTop:(0,v.sldFullHeight)(34),marginBottom:(0,v.sldFullHeight)(17),height:(0,v.sldFullHeight)(600)}},a.map(function(t,a){return a<3&&h.default.createElement("div",{className:y.default.wrap,key:a,style:{marginLeft:0==a?0:16,paddingTop:10}},h.default.createElement(I.Scrollbars,{autoHeight:!0,autoHeightMin:0,autoHeightMax:(0,v.sldFullHeight)(530)},t.length>0&&t.map(function(t,l){return h.default.createElement("div",{onClick:function(){return e.getChild(t,a+1)},className:"".concat(y.default.goods_cat_item," ").concat(void 0!=n[a]&&t.categoryId==n[a].categoryId?y.default.select:null),key:l},t.categoryName)}),(0,v.getSldEmptyH)(15)))})),h.default.createElement("div",{className:"".concat(y.default.sele_cat_info," ").concat(0==n.length?"tip_bg":null)},h.default.createElement("span",{className:"".concat(0==n.length?"tip":null)},l)),h.default.createElement("div",{className:y.default.com_flex_column_center,style:{marginTop:(0,v.sldFullHeight)(41)}},h.default.createElement("div",{className:y.default.add_goods_step1_btn,onClick:function(){return e.addGoodsNext()}},h.default.createElement("span",{className:y.default.text},(0,v.sldComLanguage)("\u4e0b\u4e00\u6b65\uff0c\u586b\u5199\u5546\u54c1\u4fe1\u606f")))))}}]),t}(h.Component),g=f))||g)||g);t.default=L},MAm9:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=n(a("W9HT"));a("g9YV");var s=n(a("wCAj"));a("sRBo");var o=n(a("kaz8"));a("BoS7");var d=n(a("Sdc0"));a("5Dmo");var r=n(a("3S7+"));a("5NDa");var c=n(a("5rEg"));a("giR+");var u=n(a("fyUT")),p=n(a("p0pE")),g=n(a("d6i3")),f=n(a("1l/V")),m=n(a("2Taf")),_=n(a("vZ4D")),h=n(a("l4Ni")),v=n(a("ujKo")),y=n(a("rlhR")),I=n(a("MhPg"));a("y8nQ");var L,b,S,w,C=n(a("Vl3Y")),V=a("MuoO"),k=l(a("q1tI")),E=a("k82f"),N=a("+n12"),x=a("wGLq"),T=n(a("hh8c")),O=a("UWOa"),P=n(a("nVqQ")),F=n(a("KzAW")),D=n(a("BDXA")),J=n(a("fjb3")),R=n(a("6oeo")),A=C.default.Item,H="",G=(L=(0,V.connect)(function(e){var t=e.product,a=e.global,n=e.common;return{product:t,global:a,common:n}}),b=C.default.create(),L(S=b((w=function(e){function t(e){var a;(0,m.default)(this,t),a=(0,h.default)(this,(0,v.default)(t).call(this,e)),a.common_express={type:"inputnum",label:"".concat((0,N.sldComLanguage)("\u8bbe\u7f6e\u56fa\u5b9a\u8fd0\u8d39(\u5143)")),name:"freightFee",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u8f93\u5165\u8fd0\u8d39\u91d1\u989d")),initialValue:"",required:!0,max:999999.99,min:0,precision:2,rules:[{required:!0,message:"".concat((0,N.sldComLanguage)("\u8bf7\u8f93\u5165\u8fd0\u8d39\u91d1\u989d"))}]},a.afterSaleService={type:"radio",label:"".concat((0,N.sldComLanguage)("\u552e\u540e\u670d\u52a1")),name:"afterSaleService",placeholder:"",width:250,sel_data:[{name:"".concat((0,N.sldComLanguage)("\u4e0d\u652f\u6301\u9000\u6b3e")),key:0},{name:"".concat((0,N.sldComLanguage)("\u652f\u6301\u9000\u6b3e")),key:1}],initialValue:0},a.reserveInfoList={type:"add_reserve_info",label:"".concat((0,N.sldComLanguage)("\u7528\u6237\u9884\u7559\u4fe1\u606f")),name:"reserveInfoList",placeholder:"",width:250,sel_data:[],initialValue:[],addReserveInfo:function(){return a.addReserveInfo()},handleReserveInfo:function(e,t,n){return a.handleReserveInfo(e,t,n)},delReserveInfo:function(e){return a.delReserveInfo(e)}},a.special_express={type:"select",label:"".concat((0,N.sldComLanguage)("\u8fd0\u8d39\u6a21\u677f")),name:"freightId",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u8fd0\u8d39\u6a21\u677f")),extra:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u8fd0\u8d39\u8ba1\u7b97\u6a21\u677f\uff0c\u5982\u679c\u6ca1\u6709\u8be5\u7c7b\u578b\u6a21\u677f\uff0c\u8bf7\u5148\u53bb\u7ef4\u62a4\u8fd0\u8d39\u6a21\u677f")),width:400,sel_data:[],sele_key:"freightTemplateId",sele_name:"templateName",diy:!0,required:!0,rules:[{required:!0,message:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u8fd0\u8d39\u6a21\u7248"))}]},a.img_item={type:"upload_multiple_img_upload",label:"".concat((0,N.sldComLanguage)("\u56fe\u7247")),name:"image",extra:"".concat((0,N.sldComLanguage)("\u5efa\u8bae\u5c3a\u5bf8800px*800px\u7684\u65b9\u5f62\u56fe\u7247,\u6700\u5927\u9650\u5236")).concat(O.uploadLimit).concat((0,N.sldComLanguage)("M,\u5728\u4fdd\u8bc1\u56fe\u7247\u8d28\u91cf\u7684\u60c5\u51b5\u4e0b\u56fe\u7247\u8d8a\u5c0f\u52a0\u8f7d\u6548\u679c\u8d8a\u597d,\u6700\u591a\u53ef\u4e0a\u4f206\u5f20")),fileList:[],upload_name:"file",upload_url:O.apiUrl+"v3/oss/common/upload?source=goods",initialValue:"",img_succ_info:{},required:!0,item_height:140},a.service_list=[],a.store_cat_list=[],a.sel_cat_data=[],a.store_attr_group=[],a.store_attr_group_attr_list=[],a.search_attr_list=[],a.addReserveInfo=function(){var e=a.state.other_data,t=e.filter(function(e){return"reserveInfoList"==e.name})[0];5==t.sel_data.length?(0,N.failTip)("".concat((0,N.sldComLanguage)("\u7528\u6237\u9884\u7559\u4fe1\u606f\u6700\u591a\u6dfb\u52a05\u6761"),"\uff5e")):(t.sel_data.push({reserveName:"",reserveType:"".concat((0,N.sldComLanguage)("\u624b\u673a\u53f7")),isRequired:0,key:(new Date).valueOf()}),t.item_height=70+40*t.sel_data.length,a.setState({other_data:e}))},a.handleReserveInfo=function(e,t,n){var l=a.state.other_data,i=l.filter(function(e){return"reserveInfoList"==e.name})[0],s=i.sel_data.filter(function(e){return e.key==t})[0];s[n]="isRequired"==n?e?1:0:e,a.setState({other_data:l})},a.delReserveInfo=function(e){var t=a.state.other_data,n=t.filter(function(e){return"reserveInfoList"==e.name})[0];n.sel_data=n.sel_data.filter(function(t){return t.key!=e}),n.item_height=70+40*n.sel_data.length,a.setState({other_data:t})},a.handleGoodsType=function(e){var t=a.state.other_data;if(t=t.filter(function(e){return"afterSaleService"!=e.name&&"reserveInfoList"!=e.name}),2==e){t.push(JSON.parse(JSON.stringify(a.afterSaleService)));var n=JSON.parse(JSON.stringify(a.reserveInfoList));n.addReserveInfo=function(){H.addReserveInfo()},n.handleReserveInfo=function(e,t,a){H.handleReserveInfo(e,t,a)},n.delReserveInfo=function(e){H.delReserveInfo(e)},t.push(n)}a.setState({cur_goods_type:e,other_data:t})},a.handleChange=function(e,t,n){a.setState({filteredInfo:t,sortedInfo:n})},a.handleStoreCat=function(e,t,n){a.sel_cat_data=[],e.length&&n.allCheckedNodes.map(function(e){void 0!=e.children?e.children.map(function(e){a.sel_cat_data.push({innerLabelId:e.node.props.innerLabelId,innerLabelName:e.node.props.innerLabelName})}):a.sel_cat_data.push({innerLabelId:void 0!=e.node?e.node.props.innerLabelId:e.props.innerLabelId,innerLabelName:void 0!=e.node?e.node.props.innerLabelName:e.props.innerLabelName})})},a.handleAttrGroup=function(){var e=(0,f.default)(g.default.mark(function e(t){var n,l,i,s,o,d=arguments;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},l=a.props.dispatch,i=a.state.store_attr_data,s="product/get_attribute_lists_can_use",o={pageSize:N.list_com_page_more,groupId:t},e.next=7,l({type:s,payload:o,callback:function(e){if(200==e.state&&(i=i.filter(function(e){return"groupId"==e.name}),e.data.list.length>0&&(a.store_attr_group_attr_list=e.data.list,e.data.list.map(function(e,t){var a=e.parameterValue.split(","),n=[];a.map(function(e){n.push({key:e,name:e})}),i.push({type:"select",label:e.parameterName,name:"store_attr_".concat(e.parameterId),placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9")).concat(e.parameterName),sel_data:n,initialValue:""})}),void 0!=n.groupId))){for(var l=0;l<i.length;l++)if("groupId"==i[l].name){i[l].initialValue=t;break}void 0!=n.parameterList&&n.parameterList.length>0&&n.parameterList.map(function(e){var t=i.filter(function(t){return t.name=="store_attr_"+e.parameterId});t[0].initialValue=e.parameterValue})}a.setState({store_attr_data:i})}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.isCheck=function(e){var t=a.state.express_data;t=t.filter(function(e){return"freightFee"!=e.name&&"freightId"!=e.name}),"common"==e.target.value?t.splice(1,0,(0,p.default)({},a.common_express)):t.splice(1,0,(0,p.default)({},a.special_express)),a.setState({express_data:t})},a.addSpec=function(e){var t=a.state.spec_set_data;if(t[0].show_data.length>=N.commonSetting.specLimit)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u6700\u591a\u8bbe\u7f6e")).concat(N.commonSetting.specLimit).concat((0,N.sldComLanguage)("\u7ec4\u89c4\u683c\u9879"))),!1;var n=t.filter(function(e){return"goods_spec_sele"==e.name})[0];n.is_add_spec=e,a.setState({spec_set_data:t})},a.addSpecValue=function(e,t){var n=a.state.spec_set_data,l=n[0].show_data.filter(function(e){return e.specId==t});if(l[0].showValList.length>=N.commonSetting.specValLimit)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u6bcf\u4e2a\u89c4\u683c\u9879\u6700\u591a\u8bbe\u7f6e")).concat(N.commonSetting.specValLimit).concat((0,N.sldComLanguage)("\u4e2a\u89c4\u683c\u503c"))),!1;l[0].is_add_spec_val=e;var i=n[0].sel_data.filter(function(e){return e.specId==t});i[0].is_add_spec_val=e,a.setState({spec_set_data:n})},a.handleDelAddSpec=function(e){var t=a.state.spec_set_data,n=t[0];if("spec"==e.type){var l=n.show_data.filter(function(t){return t.specId==e.specId})[0];l.sele_flag=!1,void 0!=l.valueList.length&&l.valueList.length>0&&l.valueList.map(function(e){e.sele_flag=!1}),l.is_img_spec&&a.initSpuGoodsImaData(),n.show_data=n.show_data.filter(function(t){return t.specId!=e.specId})}else{var i=n.sel_data.filter(function(t){return t.specId==e.specId})[0],s=i.valueList.filter(function(t){return t.specValueId==e.specValueId})[0];s.sele_flag=!1;var o=n.show_data.filter(function(t){return t.specId==e.specId})[0];o.valueList=JSON.parse(JSON.stringify(i.valueList)),o.showValList=o.showValList.filter(function(t){return t.specValueId!=e.specValueId}),o.is_img_spec&&a.operateSpecImg("del",{specValueId:e.specValueId})}a.setState({spec_set_data:t},function(){H.getCalcDEscartes(t[0].show_data)})},a.setImgSpec=function(e,t){var n=a.state,l=n.spec_set_data,i=n.is_set_img_spec,s=n.goods_img_data,o=l[0];for(var d in o.show_data)if(o.show_data[d].specId==t)if(o.show_data[d].is_img_spec=e.target.checked,o.sel_data[d].is_img_spec=e.target.checked,i=e.target.checked,1==e.target.checked){if(s=[],o.show_data[d].showValList.length>0)for(var r in o.show_data[d].showValList){var c=o.show_data[d].showValList[r];s.push(JSON.parse(JSON.stringify(a.img_item)));var u=s[s.length-1];u.label=c.specValue,u.name="image"+c.specValueId,u.specId=c.specId,u.specValueId=c.specValueId,u.specValue=c.specValue,u.extra_param=c,u.fileList=[],u.uploadPreview=function(e){H.uploadImgPre(e)},u.uploadChange=function(e,t){H.uploadImg(e,"image"+t.specValueId)}}a.setState({goods_img_data:s})}else a.initSpuGoodsImaData();else o.show_data[d].is_img_spec=!1;a.setState({spec_set_data:l,is_set_img_spec:i})},a.operateSpecImg=function(e,t){var n=a.state.goods_img_data;if("add"==e){n.push(JSON.parse(JSON.stringify(a.img_item)));var l=n[n.length-1];l.label=t.specValue,l.name="image"+t.specValueId,l.specId=t.specId,l.specValueId=t.specValueId,l.specValue=t.specValue,l.extra_param=t,l.fileList=[],l.uploadPreview=function(e){H.uploadImgPre(e)},l.uploadChange=function(e,t){H.uploadImg(e,"image"+t.specValueId)}}else if("edit"==e){var i=n.filter(function(e){return e.specValueId==t.specValueId})[0];i.label=t.specValue,i.name="image"+t.specValueId,i.specId=t.specId,i.specValueId=t.specValueId,i.specValue=t.specValue,i.extra_param=t}else if("del"==e&&(n=n.filter(function(e){return e.specValueId!=t.specValueId}),0==n.length))return a.initSpuGoodsImaData(),!1;a.setState({goods_img_data:n})},a.initSpuGoodsImaData=function(){var e=a.state.goods_img_data;e=[JSON.parse(JSON.stringify(a.img_item))];var t=e[e.length-1];t.label="\u56fe\u7247",t.name="image",t.specId="",t.specValueId="",t.specValue="",t.extra_param={},t.fileList=[],t.uploadPreview=function(e){H.uploadImgPre(e)},t.uploadChange=function(e){H.uploadImg(e,"image")},a.setState({goods_img_data:e})},a.handleSpecFocus=function(e){var t=a.state.spec_set_data;if("spec"==e.type){var n=t[0],l=n.sel_data.filter(function(t){return t.specId==e.specId})[0];l.is_editing=!0}a.setState({spec_set_data:t})},a.handleSetOpenFlag=function(e){var t=a.state.spec_set_data,n=t[0],l=n.show_data.filter(function(t){return t.specId==e.specId})[0];if("spec"==e.type)l.open_flag=e.flag;else{var i=l.valueList.filter(function(t){return t.specValueId==e.specValueId})[0],s=l.showValList.filter(function(t){return t.specValueId==e.specValueId})[0];i.open_flag=e.flag,s.open_flag=e.flag}a.setState({spec_set_data:t})},a.specTimeStamp=(new Date).getTime(),a.handleSpecChange=function(e){if(1*(new Date).getTime()-a.specTimeStamp<5)return!1;a.specTimeStamp=(new Date).getTime();var t=a.props.dispatch,n=a.state.spec_set_data;if(0==e.sel.length)return!1;var l=e.sel;if("spec"==e.type){if(l.length>6)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u6700\u591a\u8f93\u51656\u4e2a\u5b57"))),!1;var i=n[0],s=i.sel_data.filter(function(e){return e.specName==l});if(void 0!=s.length&&s.length>0){var o=i.show_data.filter(function(e){return e.specName==l});if(void 0!=o.length&&o.length>0)return(0,N.failTip)("\u8be5\u89c4\u683c\u9879\u5df2\u7ecf\u5b58\u5728\u4e86\uff5e"),!1;if(s[0].sele_flag=!0,i.is_add_spec=!1,i.is_editing=!1,"add"==e.operate)i.show_data.push((0,p.default)({},JSON.parse(JSON.stringify((0,p.default)({},s[0],{is_add_spec_val:!0}))),{showValList:[]}));else{var d=i.sel_data.filter(function(t){return t.specId==e.specId})[0];d.sele_flag=!1;var r=i.show_data.filter(function(t){return t.specId==e.specId})[0];for(var c in void 0!=r.valueList.length&&r.valueList.length>0&&r.valueList.map(function(e){e.sele_flag=!1}),i.show_data)if(i.show_data[c].specId==e.specId){i.show_data[c]=(0,p.default)({},JSON.parse(JSON.stringify(s[0])),{showValList:[]});break}}a.setState({spec_set_data:n},function(){a.getCalcDEscartes(n[0].show_data),a.handleSetOpenFlag({type:"spec",flag:!1,specId:s[0].specId}),e.ref&&e.ref["spec_"+s[0].specId].blur()})}else t({type:"product/add_goods_spec",payload:{specName:l,state:1,sort:1},callback:function(t){if(200==t.state){i.is_add_spec=!1,i.is_editing=!1;var s={specId:t.data,specName:l,sele_flag:!0,valueList:[],showValList:[],open_flag:!1};if(i.sel_data.push(s),"add"==e.operate)i.show_data.push(JSON.parse(JSON.stringify((0,p.default)({},s,{is_add_spec_val:!0}))));else for(var o in i.show_data)if(i.show_data[o].specId==e.specId){i.show_data[o]=JSON.parse(JSON.stringify(s));break}a.setState({spec_set_data:n},function(){H.getCalcDEscartes(n[0].show_data)})}else(0,N.failTip)(t.msg)}})}else{if(l.length>10)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u6700\u591a\u8f93\u516510\u4e2a\u5b57"))),!1;var u=n[0].show_data.filter(function(t){return t.specId==e.specId}),g=n[0].sel_data.filter(function(t){return t.specId==e.specId}),f=u[0].valueList.filter(function(e){return e.specValue==l});if(void 0!=f.length&&f.length>0){u[0].is_add_spec_val=!1,f[0].sele_flag=!0;var m=u[0].showValList.filter(function(e){return e.specValue==l});if(void 0!=m.length&&m.length>0)return(0,N.failTip)("\u8be5\u89c4\u683c\u503c\u5df2\u7ecf\u5b58\u5728\u4e86\uff5e"),!1;if("add"==e.operate)u[0].showValList.push(JSON.parse(JSON.stringify(f[0])));else{var _=u[0].valueList.filter(function(t){return t.specValueId==e.specValueId})[0];for(var h in _.sele_flag=!1,u[0].showValList)if(u[0].showValList[h].specValueId==e.specValueId){u[0].showValList[h]=JSON.parse(JSON.stringify(f[0]));break}}if(u[0].is_img_spec){var v={};v.specId=f[0].specId,v.specValueId=f[0].specValueId,v.specValue=f[0].specValue,a.operateSpecImg(e.operate,v)}g[0].valueList=JSON.parse(JSON.stringify(u[0].valueList)),a.setState({spec_set_data:n},function(){a.getCalcDEscartes(n[0].show_data),a.handleSetOpenFlag({type:"spec_val",flag:!1,specId:g[0].specId,specValueId:f[0].specValueId}),e.ref&&e.ref["spec_val_"+f[0].specValueId].blur()})}else{if(0==u[0].storeId)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u5e73\u53f0\u9884\u8bbe\u7684\u89c4\u683c\u4e0d\u53ef\u4ee5\u81ea\u884c\u6dfb\u52a0"))),!1;t({type:"product/add_goods_spec_val",payload:{specId:e.specId,specValues:l},callback:function(t){if(200==t.state){u[0].is_add_spec_val=!1;var i={specId:e.specId,specValue:l,sele_flag:!0,specValueId:t.data};if(u[0].valueList.push(i),"add"==e.operate)u[0].showValList.push(JSON.parse(JSON.stringify(i))),g[0].valueList.push(JSON.parse(JSON.stringify(i)));else for(var s in u[0].showValList)if(u[0].showValList[s].specValueId==e.specValueId){u[0].showValList[s]=JSON.parse(JSON.stringify(i));break}if(u[0].is_img_spec){var o={};o.specId=i.specId,o.specValueId=i.specValueId,o.specValue=i.specValue,a.operateSpecImg(e.operate,o)}a.setState({spec_set_data:n},function(){H.getCalcDEscartes(n[0].show_data)})}else(0,N.failTip)(t.msg)}})}}},a.get_spec_list=function(){var e=a.props.dispatch,t=a.state,n=t.spec_set_data,l=t.query,i=t.loading;e({type:"product/get_goods_spec_list",payload:{pageSize:N.list_com_page_more},callback:function(e){for(var t in n)"goods_spec_sele"==n[t].name&&(200==e.state?n[t].sel_data=e.data.list:n[t].sel_data=[]);void 0!=l.id&&l.id>0&&(i=!0),a.setState({spec_set_data:n,loading:i},function(){void 0!=l.id&&l.id>0&&H.get_goods_detail(l.id)})}})},a.get_goods_label_list=function(){var e=a.props.dispatch,t=a.state.other_data,n="product/get_goods_label_lists",l={pageSize:N.list_com_page_more};e({type:n,payload:l,callback:function(e){if(200==e.state){a.service_list=e.data.list;var n=t.filter(function(e){return"serviceLabelIds"==e.name})[0];n.sel_data=e.data.list}a.setState({other_data:t})}})},a.getStoreAttrGroup=function(){var e=a.props.dispatch,t=a.state.store_attr_data,n="product/get_attribute_group_lists_can_use",l={pageSize:N.list_com_page_more};e({type:n,payload:l,callback:function(e){if(200==e.state){var n=t.filter(function(e){return"groupId"==e.name})[0];n.sel_data=e.data.list,a.store_attr_group=e.data.list}a.setState({store_attr_data:t})}})},a.getRelatedTpl=function(){var e=a.props.dispatch,t=a.state.top_bottom_tpl_data,n="product/get_related_template_lists",l={pageSize:N.list_com_page_more};e({type:n,payload:l,callback:function(e){200==e.state&&t.map(function(t){"relatedTemplateIdTop"==t.name?(t.sel_data=e.data.list.length>0?e.data.list.filter(function(e){return 1==e.templatePosition}):[],t.sel_data.unshift({templateId:-1,templateName:"".concat((0,N.sldComLanguage)("--\u8bf7\u9009\u62e9--"))})):"relatedTemplateIdBottom"==t.name&&(t.sel_data=e.data.list.length>0?e.data.list.filter(function(e){return 2==e.templatePosition}):[],t.sel_data.unshift({templateId:-1,templateName:"".concat((0,N.sldComLanguage)("--\u8bf7\u9009\u62e9--"))}))}),a.setState({top_bottom_tpl_data:JSON.parse(JSON.stringify(t))})}})},a.getStoreCat=function(){var e=a.props.dispatch,t=a.state.other_data,n="product/get_store_category_list",l={pageSize:N.list_com_page_more};e({type:n,payload:l,callback:function(e){if(200==e.state){var n=t.filter(function(e){return"innerLabelIds"==e.name})[0];for(var l in e.data)e.data[l].key=e.data[l].innerLabelId,e.data[l].value=e.data[l].innerLabelId,e.data[l].title=e.data[l].innerLabelName,null!=e.data[l].children&&e.data[l].children.length>0&&e.data[l].children.map(function(e){e.key=e.innerLabelId,e.value=e.innerLabelId,e.title=e.innerLabelName});a.store_cat_list=e.data,n.data=e.data,a.setState({other_data:t})}}})},a.get_transport_lists=function(){var e=a.props.dispatch,t="common/get_transport_lists",n={pageSize:N.list_com_page_more};e({type:t,payload:n,callback:function(e){200==e.state&&(a.special_express.sel_data=e.data.list)}})},a.sldHandleTableCancle=function(){a.setState({modalTableVisible:!1})},a.get_goods_detail=function(){var e=(0,f.default)(g.default.mark(function e(t){var n,l,i,s,o,d,r,c,u,m,_,h,v,y;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,l=a.state,i=l.goods_base_data,s=l.initEditorContent,o=l.sele_goods_cat_data,d=l.goods_img_data,r=l.spec_data_table,c=l.spu_data_table,u=l.other_data,m=l.express_data,_=l.spec_set_data,h=l.top_bottom_tpl_data,v=l.invoice_data,y=l.goods_video_data,d=[],n({type:"product/get_goods_detail",payload:{goodsId:t},callback:function(){var e=(0,f.default)(g.default.mark(function e(t){var n,l,f,I,L,b,S,w,C,V,k,E;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(200!=t.state){e.next=27;break}return n=t.data,e.next=4,a.get_brand_attr_detail(n.categoryId3,null!=t.data.attributeList&&t.data.attributeList.length>0?t.data.attributeList:[]);case 4:for(l=n.categoryPath.split("->"),o[0]={},o[0].categoryId=n.categoryId1,o[0].categoryName=l[0],o[1]={},o[1].categoryId=n.categoryId2,o[1].categoryName=l[1],o[2]={},o[2].categoryId=n.categoryId3,o[2].categoryName=l[2],f=0;f<i.length;f++)"goods_cat"==i[f].name?i[f].initialValue=l[0]+">"+l[1]+">"+l[2]:(i[f].initialValue=n[i[f].name],"isVirtualGoods"==i[f].name&&(i[f].disabled=!0));if(null!=n.specInfoList&&void 0!=n.specInfoList.length&&n.specInfoList.length>0?(n.specInfoList.map(function(e,t){var a=_[0].sel_data.filter(function(t){return t.specId==e.specId});if(void 0!=a&&void 0!=a.length&&a.length>0){a[0].sele_flag=!0,a[0].is_img_spec=1==e.isMain;var l=[];n.specInfoList[t].specValueList.map(function(t,n){var i=a[0].valueList.filter(function(e){return e.specValueId==t.specValueId});if(void 0!=i&&void 0!=i.length&&i.length>0&&(i[0].sele_flag=!0,l.push((0,p.default)({},i[0]))),1==e.isMainSpec){d.push(JSON.parse(JSON.stringify(H.img_item)));var s=d[d.length-1];s.label=t.specValue,s.name="image"+t.specValueId,s.specId=e.specId,s.specValueId=t.specValueId,s.specValue=t.specValue,s.extra_param={specValueId:t.specValueId},s.fileList=[],t.imageList.map(function(e){var t={};t.uid=e.image,t.thumbUrl=e.imageUrl,t.status="done",t.response={},t.response.state=200,t.response.data={path:e.image,url:e.imageUrl},s.fileList.push(t)}),s.uploadPreview=function(e){H.uploadImgPre(e)},s.uploadChange=function(e,t){H.uploadImg(e,"image"+t.specValueId)}}}),_[0].show_data.push((0,p.default)({},JSON.parse(JSON.stringify(a[0])),{showValList:l,is_img_spec:1==e.isMainSpec}))}}),I=[],L=0,n.productList.map(function(e,t){L+=1;var a={};a.barCode=e.barCode,a.productPrice=e.productPrice,a.productStock=e.productStock,a.height=e.height,a.isDefault=e.isDefault,a.length=e.length,a.key=L,a.marketPrice=e.marketPrice,a.productCode=e.productCode,a.state=e.state,a.productStockWarning=e.productStockWarning,a.weight=e.weight,a.width=e.width,a.specValIdArray=[],a.specValIdArray=e.specValueIds.split(","),a.spec_info=[],a.specValIdArray.map(function(e,t){for(var l={sele_flag:!0},i=0;i<n.specInfoList.length;i++){var s=n.specInfoList[i].specValueList.filter(function(t){return t.specValueId==e});if(s.length>0){l.specId=n.specInfoList[i].specId,l.specName=n.specInfoList[i].specName,l.specValue=s[0].specValue,l.specValueId=s[0].specValueId,l.specImage=s[0].imageList;break}}a.spec_info.push((0,p.default)({},l))}),I.push((0,p.default)({},a))}),r.list=I):(b=c.list[0],S=n.productList[0],b.marketPrice=S.marketPrice,b.goodsPrice=S.productPrice,b.goodsStock=S.productStock,b.weight=S.weight,b.length=S.length,b.width=S.width,b.height=S.height,b.stockWarning=S.productStockWarning,b.productCode=S.productCode,b.barCode=S.barCode),0!=n.imageList.length&&(d=[JSON.parse(JSON.stringify(H.img_item))],w=d[0],w.label="".concat((0,N.sldComLanguage)("\u56fe\u7247")),w.name="image",w.specId="",w.specValueId="",w.specValue="",w.extra_param={},w.fileList=[],n.imageList.map(function(e){var t={};t.uid=e.image,t.thumbUrl=e.imageUrl,t.status="done",t.response={},t.response.state=200,t.response.data={path:e.image,url:e.imageUrl},w.fileList.push(t)}),w.uploadPreview=function(e){H.uploadImgPre(e)},w.uploadChange=function(e){H.uploadImg(e,"image")}),n.goodsVideo&&(C={},C.uid=n.goodsVideo,C.thumbUrl=n.goodsVideoUrl,C.status="done",C.response={},C.response.state=200,C.response.data={path:n.goodsVideo,url:n.goodsVideoUrl},y[0].fileList=[C]),v.map(function(e){e.initialValue=t.data[e.name]}),2!=n.isVirtualGoods)for(V in m)"express_method"==m[V].name&&(n.freightId>0?(m.splice(V+1,0,(0,p.default)({},a.special_express,{initialValue:n.freightId})),m[V].initialValue="special"):(m.splice(V+1,0,(0,p.default)({},a.common_express,{initialValue:n.freightFee})),m[V].initialValue="common"));for(E in u=u.filter(function(e){return"afterSaleService"!=e.name&&"reserveInfoList"!=e.name}),2==n.isVirtualGoods&&(u.push(JSON.parse(JSON.stringify(a.afterSaleService))),k=JSON.parse(JSON.stringify(a.reserveInfoList)),k.addReserveInfo=function(){H.addReserveInfo()},k.handleReserveInfo=function(e,t,a){H.handleReserveInfo(e,t,a)},k.delReserveInfo=function(e){H.delReserveInfo(e)},void 0!=n.reserveList.length&&n.reserveList.length>0&&(n.reserveList.map(function(e,t){k.sel_data.push({reserveName:e.reserveName,reserveType:(0,x.reserveInfoLimitType)().filter(function(t){return t.key==e.reserveType})[0]["value"],isRequired:e.isRequired,key:(new Date).valueOf()+t})}),k.item_height=70+40*k.sel_data.length),u.push(k)),u)"innerLabelIds"==u[E].name?function(){var e=[];t.data.storeInnerLabelList.length>0&&t.data.storeInnerLabelList.map(function(t){e.push(t.innerLabelId),a.sel_cat_data.push({innerLabelId:t.innerLabelId,innerLabelName:t.innerLabelName})}),u[E].initialValue=e}():"serviceLabelIds"==u[E].name?function(){var e=[],n=[];a.service_list.map(function(e){n.push(e.labelId)}),t.data.goodsLabelList.length>0&&t.data.goodsLabelList.map(function(t){n.indexOf(t.labelId)>-1&&e.push(t.labelId)}),u[E].initialValue=e}():"sellNow"==u[E].name?u[E].initialValue=!0:u[E].initialValue=n[u[E].name];s=(0,N.quillEscapeToHtml)(t.data.goodsDetails),null!=t.data.parameterGroup&&void 0!=t.data.parameterGroup.groupId&&t.data.parameterGroup.groupId&&a.handleAttrGroup(t.data.parameterGroup.groupId,t.data.parameterGroup),h.map(function(e){e.initialValue=0==t.data[e.name]?-1:t.data[e.name]}),a.setState({loading:!1,express_show:!0,sele_goods_cat_data:o,goods_base_data:i,initEditorContent:s,goods_img_data:d,goods_video_data:y,spec_set_data:_,spu_data_table:c,express_data:m,other_data:u,spec_data_table:r,top_bottom_tpl_data:h,show_radio_flag:!0,initEditorFlag:!0,invoice_data:v,cur_goods_type:n.isVirtualGoods},function(){a.getCalcDEscartes(_[0].show_data)});case 27:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSpecSele=function(e,t){var n=a.state.spec_set_data,l=n[0].sel_data,i=l.filter(function(e){return e.id==t.specId})[0];for(var s in i.sele_id_array=i.sele_id_array||[],i.attrList)i.attrList[s].id==t.id&&(i.attrList[s].sele_flag=e,e?i.sele_id_array.push(t.id):i.sele_id_array=i.sele_id_array.filter(function(e){return e!=t.id}));a.getCalcDEscartes(l),a.setState({spec_set_data:n})},a.getCalcDEscartes=function(e){var t=[];for(var n in e)void 0!=e[n].showValList.length&&e[n].showValList.length>0&&t.push(e[n].showValList);if(0==t.length){var l=a.state,i=l.spec_data_table,s=l.columns_spec;return i.list=[],s=s.filter(function(e){return-1==e.dataIndex.indexOf("spec_info")}),a.setState({spec_data_table:i,columns_spec:s}),!1}var o=(0,N.calcDescartes)(t);a.getAllSpecTableData(o)},a.getAllSpecTableData=function(e){var t=0,n=a.state,l=n.spec_set_data,i=n.columns_spec,s=n.spec_data_table,o=l[0].show_data.filter(function(e){return e.showValList.length>0});for(var d in i=i.filter(function(e){return-1==e.dataIndex.indexOf("spec_info")}),o)for(var r in t++,i)if("marketPrice"==i[r].dataIndex){i.splice(r,0,{title:o[d].specName,dataIndex:"spec_info["+d+"]",align:"center",width:70,render:function(e,t){return k.default.createElement("span",null,e.specValue)}});break}for(var c=[],u=function(a){var n={},l=[];1==t?l.push(e[a].specValueId):e[a].length>0&&e[a].map(function(e){l.push(e.specValueId)}),n.specValIdArray=l,n.spec_info=1==t?[e[a]]:e[a],n.key=a+1,n.state=1,n.isDefault=0==a?1:0,n.marketPrice="",n.productPrice="",n.productStock="",n.productStockWarning="",n.weight=1,n.length=1,n.width=1,n.height=1,n.productCode="",n.barCode="",c.push(n)},p=0;p<e.length;p++)u(p);var g=[],f=JSON.parse(JSON.stringify(s));g=0==f.list.length?JSON.parse(JSON.stringify(c)):a.combineSpecListData(c,f.list),s.list=JSON.parse(JSON.stringify(g)),a.setState({spec_data_table:s,columns_spec:i})},a.combineSpecListData=function(e,t){for(var a=0;a<e.length;a++)for(var n=0;n<t.length;n++)if((0,N.isEqualArray)(e[a].specValIdArray,t[n].specValIdArray)){var l=(0,p.default)({},t[n],{specValIdArray:JSON.parse(JSON.stringify(e[a].specValIdArray)),spec_info:JSON.parse(JSON.stringify(e[a].spec_info)),key:e[a].key});e[a]=JSON.parse(JSON.stringify(l));break}return e},a.sele_goods_cat=function(){a.getSystemCat(1,0),a.setState({step:1,sele_goods_cat_data:[],top_nav_step:1})},a.getSystemCat=function(){var e=(0,f.default)(g.default.mark(function e(t){var n,l,i,s,o,d=arguments;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"",l=a.props.dispatch,i=a.state.goods_cat,s="product/get_system_seller_cate_list",o={grade:t},n&&(o.categoryId=n),e.next=8,l({type:s,payload:o,callback:function(e){if(200==e.state){if(i[t-1]=e.data,t<3)for(var n=t;n<3;n++)i[n]=[];a.setState({goods_cat:i,cur_data:e.data})}else(0,N.failTip)(e.msg)}});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.sldHandleGoodsCat=function(){var e=(0,f.default)(g.default.mark(function e(t,n){var l,i,s,o;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(l=a.state,i=l.cur_data,s=l.sele_goods_cat_data,o=l.top_nav_step,3!=n){e.next=6;break}a.get_brand_attr_detail(t.categoryId),i=t,e.next=9;break;case 6:return s=s.filter(function(e,t){return t<n}),e.next=9,a.getSystemCat(n+1,t.categoryId);case 9:s[n-1]=t,a.setState({sele_goods_cat_data:s,cur_data:i,top_nav_step:o});case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.get_brand_attr_detail=function(){var e=(0,f.default)(g.default.mark(function e(t){var n,l,i,s,o,d=arguments;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:[],l=a.props.dispatch,i=a.state,s=i.search_attr_data,o=i.goods_base_data,e.next=5,l({type:"product/get_brand_attr_detail",payload:{categoryId:t,pageSize:N.list_com_page_more},callback:function(e){if(200==e.state){var t=o.filter(function(e){return"brandId"==e.name})[0];t.sel_data=e.data.goodsBrandList,a.search_attr_list=e.data.goodsAttributeList,e.data.goodsAttributeList.length>0&&e.data.goodsAttributeList.map(function(e,t){var a=e.attributeValueList,l=[];a.map(function(e){l.push({key:e.valueId,name:e.attributeValue})});var i="";if(n.length>0){var o=n.filter(function(t){return t.attributeId==e.attributeId});if(void 0!=o&&void 0!=o.length&&o.length>0){i=o[0].attributeValueId;var d=l.filter(function(e){return e.key==i});i=d.length?i:""}}var r={type:"select",label:e.attributeName,name:"search_attr_".concat(e.attributeId),placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9")).concat(e.attributeName),sel_data:l,initialValue:i};s.push(r)})}a.setState({goods_base_data:o,search_attr_data:s})}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.viewImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.setState({preview_img:t,preview_alt_con:n,show_preview_modal:e})},a.uploadImgPre=function(e){a.viewImg(!0,e.url||e.thumbUrl)},a.uploadImg=function(e,t){var n=a.state.goods_img_data;if(void 0!=e.file.status&&"error"!=e.file.status){var l=e.fileList[e.fileList.length-1];for(var i in void 0!=l.response&&void 0!=l.response.state&&255==l.response.state&&((0,N.failTip)(l.response.msg),e.fileList.pop()),n)if(n[i].name==t){n[i].fileList=e.fileList;break}a.setState({goods_img_data:n})}},a.uploadVideo=function(e,t){var n=a.state.goods_video_data;if(void 0!=e.file.status&&"error"!=e.file.status){for(var l in n)if(n[l].name==t){n[l].fileList=e.fileList;break}a.setState({goods_video_data:n})}},a.delVideo=function(){var e=a.state.goods_video_data;e[0].fileList=[],a.setState({goods_video_data:e})},a.uploadImgSpec=function(e,t){var n=e.fileList,l=a.state.spec_set_data,i=l[0].sel_data,s=i.filter(function(e){return e.id==t.specId})[0];for(var o in s.attrList)s.attrList[o].id==t.id&&(s.attrList[o].fileList=n);a.setState({spec_set_data:l})},a.handleSelectRows=function(e,t){a.setState({selectedRows:e,selectedRowKeys:t})},a.handleSaveAllData=function(){a.setState({getEditorContentFlag:!0})},a.saveData=function(e){var t=a.props.dispatch,n=a.state,l=n.query,i=n.sele_goods_cat_data,s=n.spec_data_table,o=n.goods_img_data,d=n.goods_video_data,r=n.spec_set_data,c=n.cur_goods_type,u=n.other_data;a.props.form.validateFieldsAndScroll(function(n,p){if(n){if(void 0!=n.goodsName)return void a.setNavStep(2);if(void 0!=n.freightFee||void 0!=n.freightId)return void a.setState({top_nav_step:2},function(){void 0!=a.refs.express_position.offsetTop&&a.refs.express_position.offsetTop&&a.refs.scrollbars.scrollTop(a.refs.express_position.offsetTop)});if(2==c)for(var g in n)if(g.indexOf("reserveName")>-1)return void a.setState({top_nav_step:2},function(){void 0!=a.refs.other_info_position.offsetTop&&a.refs.other_info_position.offsetTop&&a.refs.scrollbars.scrollTop(a.refs.other_info_position.offsetTop+430)});if(void 0!=n.goodsPrice||void 0!=n.goodsStock)return void a.setNavStep(3);for(var f in n)if(f.indexOf("productPrice")+f.indexOf("productStock")>-2)return void a.setNavStep(3)}else{var m={};if(s.list.length>0){var _=0;for(var h in s.list)if(s.list[h].isDefault){_+=1;break}if(0==_)return(0,N.failTip)("\u591a\u89c4\u683c\u5546\u54c1\u9700\u8981\u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u6570\u636e"),!1}if(d[0].fileList.length>0&&(m.goodsVideo=d[0].fileList[0].response.data.path),m.categoryId3=i[2].categoryId,m.isVirtualGoods=p.isVirtualGoods,2==m.isVirtualGoods){m.afterSaleService=p.afterSaleService;var v=u.filter(function(e){return"reserveInfoList"==e.name})[0]["sel_data"];v.length&&(m.reserveInfoList=[],v.map(function(e){m.reserveInfoList.push({reserveName:e.reserveName,reserveType:(0,x.reserveInfoLimitType)().filter(function(t){return t.value==e.reserveType})[0]["key"],isRequired:e.isRequired})}))}if(m.brandId=p.brandId,m.goodsName=p.goodsName,m.goodsBrief=p.goodsBrief,m.sellNow=p.sellNow,m.storeIsRecommend=p.storeIsRecommend,m.isVatInvoice=p.isVatInvoice,m.relatedTemplateIdTop=p.relatedTemplateIdTop>0?p.relatedTemplateIdTop:0,m.relatedTemplateIdBottom=p.relatedTemplateIdBottom>0?p.relatedTemplateIdBottom:0,m.virtualSales=p.virtualSales,m.productList=[],"common"==p.express_method?m.freightFee=p.freightFee:m.freightId=p.freightId,m.storeInnerLabelList=a.sel_cat_data,m.goodsLabelList=[],void 0!=p.serviceLabelIds&&p.serviceLabelIds.length>0&&p.serviceLabelIds.map(function(e){for(var t=0;t<a.service_list.length;t++)if(e==a.service_list[t].labelId){m.goodsLabelList.push({goodsLabelId:e,goodsLabelName:a.service_list[t].labelName});break}}),m.attributeAndParameter={},m.attributeAndParameter.attributeList=[],m.attributeAndParameter.parameterGroup={},a.search_attr_list.length>0&&a.search_attr_list.map(function(e,t){if(void 0!=p["search_attr_"+e.attributeId]&&p["search_attr_"+e.attributeId]){var a=e.attributeValueList.filter(function(t){return t.valueId==p["search_attr_"+e.attributeId]})[0].attributeValue;m.attributeAndParameter.attributeList.push({attributeId:e.attributeId,attributeName:e.attributeName,attributeValue:a,attributeValueId:p["search_attr_"+e.attributeId]})}}),void 0!=p.groupId&&p.groupId&&a.store_attr_group_attr_list.length>0){m.attributeAndParameter.parameterGroup.groupId=p.groupId;var y=a.store_attr_group.filter(function(e){return e.groupId==p.groupId})[0].groupName;m.attributeAndParameter.parameterGroup.groupName=y,m.attributeAndParameter.parameterGroup.parameterList=[],a.store_attr_group_attr_list.map(function(e,t){void 0!=p["store_attr_"+e.parameterId]&&p["store_attr_"+e.parameterId]&&m.attributeAndParameter.parameterGroup.parameterList.push({parameterId:e.parameterId,parameterName:e.parameterName,parameterValue:p["store_attr_"+e.parameterId]})})}if(s.list.length>0){m.specInfoList=[];var I=function(e){var t=r[0].show_data[e],a={};a.specId=t.specId,a.specName=t.specName,a.isMainSpec=void 0!=t.is_img_spec&&t.is_img_spec?1:0,a.specValueList=[];var n=function(e){var n={};if(n.specValueId=t.showValList[e].specValueId,n.specValue=t.showValList[e].specValue,void 0!=t.is_img_spec&&t.is_img_spec){n.imageList=[];var l=o.filter(function(a){return a.specValueId==t.showValList[e].specValueId})[0].fileList;if(0==l.length)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u89c4\u683c\u503c\u4e3a"))+t.showValList[e].specValue+"".concat((0,N.sldComLanguage)("\u7684\u56fe\u7247\u7ec4,\u81f3\u5c11\u4e0a\u4f20\u4e00\u5f20\u5546\u54c1\u56fe\u7247"))),{v:{v:!1}};for(var i in l){var s=l[i].response;200==s.state&&n.imageList.push({image:s.data.path,isMain:0==i?1:2})}}a.specValueList.push(n)};for(var l in t.showValList){var i=n(l);if("object"===typeof i)return i.v}m.specInfoList.push(a)};for(var L in r[0].show_data){var b=I(L);if("object"===typeof b)return b.v}for(var S in s.list){var w=s.list[S],C={specInfoList:[]};for(var V in w.spec_info){var k={};k.specId=w.spec_info[V].specId,k.specName=w.spec_info[V].specName,k.specValueId=w.spec_info[V].specValueId,k.specValue=w.spec_info[V].specValue,C.specInfoList.push(k)}C.marketPrice=w.marketPrice,C.productPrice=w.productPrice,C.productStock=w.productStock,C.productStockWarning=w.productStockWarning,C.weight=w.weight,C.length=w.length,C.width=w.width,C.height=w.height,C.productCode=w.productCode,C.barCode=w.barCode,C.state=w.state,C.isDefault=w.isDefault,m.productList.push(C)}}else m.marketPrice=p.marketPrice,m.productPrice=p.goodsPrice,m.productStock=p.goodsStock,m.productStockWarning=p.stockWarning,m.weight=p.weight,m.length=p.length,m.width=p.width,m.height=p.height,m.productCode=p.productCode?p.productCode:"",m.barCode=p.barCode;m.goodsDetails=e,m.imageList=[];var E=o[0].fileList;if(0==E.length)return(0,N.failTip)("".concat((0,N.sldComLanguage)("\u81f3\u5c11\u4e0a\u4f20\u4e00\u5f20\u5546\u54c1\u56fe\u7247"))),a.setNavStep(3),!1;for(var L in E){var T=E[L].response;200==T.state&&m.imageList.push({image:T.data.path,isMain:0==L?1:2})}a.setState({pageLoading:!0});var O="";void 0!=l.id&&l.id>0?(m.goodsId=1*l.id,O="product/edit_goods"):O="product/add_goods",t({type:O,payload:m,callback:function(e){H.setState({pageLoading:!1}),200==e.state?((0,N.sucTip)(e.msg,1),setTimeout(function(){H.props.history.goBack()},500)):(0,N.failTip)(e.msg)}})}})},a.setNavStep=function(e){var t=a.state.top_nav_step;t!=e&&a.setState({top_nav_step:e})},a.backPre=function(){a.props.history.goBack()},a.sldAddGoodsSecond=function(){var e=a.state,t=e.goods_base_data,n=e.sele_goods_cat_data;for(var l in t)if("goods_cat"==t[l].name){for(var i in t[l].initialValue="",n)t[l].initialValue+=n[i].categoryName,i<n.length-1&&(t[l].initialValue+=" > ");break}a.setState({goods_base_data:t,sele_goods_cat_data:n,step:2,top_nav_step:2})},a.sldHandleConfirm=function(e){},a.sldCancle=function(){a.setState({modalVisible:!1})},a.operateCurNavStep=function(e){1!=a.state.step?(3==e&&a.refs.scrollbars.scrollTop(0),a.setState({top_nav_step:e})):(0,N.failTip)("".concat((0,N.sldComLanguage)("\u53ea\u6709\u4e09\u7ea7\u5206\u7c7b\u624d\u53ef\u53d1\u5e03\u5546\u54c1,\u8bf7\u5148\u9009\u62e9\u5206\u7c7b")))},a.getEditorContent=function(e){a.saveData(e),a.setState({getEditorContentFlag:!1})},H=(0,y.default)(a);var n=e.form.getFieldDecorator;return a.state={initEditorFlag:!1,getEditorContentFlag:!1,initEditorContent:"",show_radio_flag:!1,is_set_img_spec:!1,top_nav_step:1,step:1,modalVisible:!1,submiting:!1,express_show:!1,commonTop:60,loading:!1,pageLoading:!1,show_table_modal_add:!1,modalSldAddVisible:!1,tablesldSAddTitle:"".concat((0,N.sldComLanguage)("\u6dfb\u52a0")),search_add_modal_width:500,search_modal_width:600,tableTitle:"",cur_type:"",cur_operate_type:"",modalTableVisible:!1,cur_data:[],sele_goods_cat_data:[],goods_fileList:[],goodsCategoryId:"",goods_cat:[[],[],[]],filteredInfo:null,sortedInfo:null,modal_width:800,show_preview_modal:!1,preview_img:"",preview_alt_con:"",price:0,bprice:0,cost:0,query:e.location.query,screentW:"1000",screentH:"1000",selectedRows:[],selectedRowKeys:[],columns_spec:[{title:" ",dataIndex:"key",align:"center",width:30,render:function(e,t,a){return a+1}},{title:"\u5e02\u573a\u4ef7",dataIndex:"marketPrice",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("marketPrice".concat(t.key),{initialValue:e})(k.default.createElement(u.default,{min:.01,max:9999999,precision:2,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"marketPrice",t.key)}})))}},{title:"\u4ef7\u683c",dataIndex:"productPrice",align:"center",width:100,filterDropdown:k.default.createElement("span",null),filterIcon:k.default.createElement("span",{style:{color:"#FF2929",fontSize:13}},"*"),render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("productPrice".concat(t.key),{initialValue:e,rules:[{required:!0,message:"".concat((0,N.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(k.default.createElement(u.default,{min:.01,max:9999999,precision:2,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"productPrice",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u5e93\u5b58")),dataIndex:"productStock",align:"center",width:100,filterDropdown:k.default.createElement("span",null),filterIcon:k.default.createElement("span",{style:{color:"#FF2929",fontSize:13}},"*"),render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("productStock".concat(t.key),{initialValue:e,rules:[{required:!0,message:"".concat((0,N.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(k.default.createElement(u.default,{min:0,max:99999999,precision:0,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"productStock",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u91cd\u91cf(KG)")),dataIndex:"weight",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("weight".concat(t.key),{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"weight",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u957f(CM)")),dataIndex:"length",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("length".concat(t.key),{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"length",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u5bbd(CM)")),dataIndex:"width",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("width".concat(t.key),{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"width",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u9ad8(CM)")),dataIndex:"height",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("height".concat(t.key),{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"height",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u9884\u8b66\u503c")),dataIndex:"productStockWarning",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("productStockWarning".concat(t.key),{initialValue:e})(k.default.createElement(u.default,{min:0,max:300,precision:0,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e,"productStockWarning",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u8d27\u53f7")),dataIndex:"productCode",align:"center",width:150,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("productCode".concat(t.key),{initialValue:e,rules:[{maxLength:20,message:"".concat((0,N.sldComLanguage)("\u6700\u591a20\u4e2a\u5b57\u7b26"))}]})(k.default.createElement(c.default,{maxLength:250,style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e.target.value,"productCode",t.key)}})))}},{title:k.default.createElement("div",{style:{position:"relative"}},(0,N.sldComLanguage)("\u6761\u5f62\u7801"),k.default.createElement(r.default,{placement:"bottomLeft",title:(0,N.sldComLanguage)("\u865a\u62df\u5546\u54c1\u65e0\u9700\u586b\u5199")},k.default.createElement("div",{style:{right:-15,top:2,position:"absolute"}},(0,N.sldSvgIcon)("#bfbbba",14,14,"wen")))),dataIndex:"barCode",align:"center",width:150,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("barCode".concat(t.key),{initialValue:e,rules:[{maxLength:30,message:"".concat((0,N.sldComLanguage)("\u6700\u591a30\u4e2a\u5b57\u7b26"))}]})(k.default.createElement(c.default,{style:{width:"100%"},onChange:function(e){return a.handleFieldChange(e.target.value,"barCode",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u542f\u7528")),dataIndex:"state",align:"center",width:60,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("state".concat(t.key),{valuePropName:"checked",initialValue:1==e})(k.default.createElement(d.default,{style:{width:"100%"},disabled:1==t.isDefault,onChange:function(e){return a.handleFieldChange(e?1:2,"state",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u9ed8\u8ba4\u9009\u4e2d")),dataIndex:"isDefault",align:"center",width:60,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("isDefault".concat(t.key),{valuePropName:"checked",initialValue:1==e})(k.default.createElement(o.default,{onChange:function(e){return a.handleFieldChangeDefault(e.target.checked?1:0,"isDefault",t.key)}})))}}],columns_spu:[{title:" ",dataIndex:"key",align:"center",width:30,render:function(e,t,a){return a+1}},{title:"".concat((0,N.sldComLanguage)("\u5e02\u573a\u4ef7")),dataIndex:"marketPrice",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("marketPrice",{initialValue:e})(k.default.createElement(u.default,{min:.01,max:9999999,precision:2,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"marketPrice",t.key)}})))}},{title:"\u4ef7\u683c",dataIndex:"goodsPrice",align:"center",width:100,filterDropdown:k.default.createElement("span",null),filterIcon:k.default.createElement("span",{style:{color:"#FF2929",fontSize:13}},"*"),render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("goodsPrice",{initialValue:e,rules:[{required:!0,message:"".concat((0,N.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(k.default.createElement(u.default,{min:.01,max:9999999,precision:2,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"goodsPrice",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u5e93\u5b58")),dataIndex:"goodsStock",align:"center",width:100,filterDropdown:k.default.createElement("span",null),filterIcon:k.default.createElement("span",{style:{color:"#FF2929",fontSize:13}},"*"),render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("goodsStock",{initialValue:e,rules:[{required:!0,message:"".concat((0,N.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(k.default.createElement(u.default,{min:0,max:99999999,precision:0,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"goodsStock",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u91cd\u91cf(KG)")),dataIndex:"weight",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("weight",{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"weight",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u957f(CM)")),dataIndex:"length",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("length",{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"length",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u5bbd(CM)")),dataIndex:"width",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("width",{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"width",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u9ad8(CM)")),dataIndex:"height",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("height",{initialValue:e||1})(k.default.createElement(u.default,{min:.001,max:999999.999,precision:3,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"height",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u9884\u8b66\u503c")),dataIndex:"stockWarning",align:"center",width:100,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("stockWarning",{initialValue:e})(k.default.createElement(u.default,{min:0,max:300,precision:0,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e,"stockWarning",t.key)}})))}},{title:"".concat((0,N.sldComLanguage)("\u8d27\u53f7")),dataIndex:"productCode",align:"center",width:150,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("productCode",{initialValue:e,rules:[{maxLength:20,message:"".concat((0,N.sldComLanguage)("\u6700\u591a20\u4e2a\u5b57\u7b26"))}]})(k.default.createElement(c.default,{maxLength:250,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e.target.value,"productCode",t.key)}})))}},{title:k.default.createElement("div",{style:{position:"relative"}},(0,N.sldComLanguage)("\u6761\u5f62\u7801"),k.default.createElement(r.default,{placement:"bottomLeft",title:(0,N.sldComLanguage)("\u865a\u62df\u5546\u54c1\u65e0\u9700\u586b\u5199")},k.default.createElement("div",{style:{right:-15,top:2,position:"absolute"}},(0,N.sldSvgIcon)("#bfbbba",14,14,"wen")))),dataIndex:"barCode",align:"center",width:150,render:function(e,t){return k.default.createElement(A,{style:{width:"100%"}},n("barCode",{initialValue:e,rules:[{maxLength:30,message:"".concat((0,N.sldComLanguage)("\u6700\u591a30\u4e2a\u5b57\u7b26"))}]})(k.default.createElement(c.default,{maxLength:250,style:{width:"100%"},onChange:function(e){return a.handleFieldChangeSpu(e.target.value,"barCode",t.key)}})))}}],goods_video_data:[{type:"upload_video",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u89c6\u9891")),name:"video",extra:"".concat((0,N.sldComLanguage)("\u6700\u5927\u9650\u5236")).concat(O.uploadLimit).concat((0,N.sldComLanguage)("M,\u652f\u6301mp4\u683c\u5f0f,\u63a8\u8350\u65f6\u957f\u4e0d\u4f4e\u4e8e6s,\u4e0d\u8d85\u8fc790s")),fileList:[],upload_name:"file",upload_url:O.apiUrl+"v3/oss/common/upload?source=video",initialValue:"",img_succ_info:{},item_height:140,uploadPreview:a.uploadImgPre,delVideo:a.delVideo,uploadChange:function(e){return a.uploadVideo(e,"video")}}],goods_img_data:[],spec_set_data:[{type:"goods_spec_sele_b2c",label:"".concat((0,N.sldComLanguage)("\u89c4\u683c\u9009\u62e9")),name:"goods_spec_sele",sel_data:[],show_data:[],disable:void 0!=e.location.query.id,addSpec:a.addSpec,addSpecValue:a.addSpecValue,handleSetOpenFlag:function(e){return a.handleSetOpenFlag(e)},handleSpecChange:function(e){return a.handleSpecChange(e)},handleSpecFocus:function(e){return a.handleSpecFocus(e)},setImgSpec:function(e,t){return a.setImgSpec(e,t)},is_add_spec:!1,handleSpecSele:a.handleSpecSele,handleDelAddSpec:a.handleDelAddSpec,handleEditAddSpec:a.handleEditAddSpec,uploadPreview:a.uploadImgPre,uploadChange:a.uploadImgSpec,upload_name:"file",upload_url:O.apiUrl+"v3/oss/common/upload?source=goods"}],spec_data_table:{list:[],pagination:{current:1,pageSize:2,total:0}},spu_data_table:{list:[{marketPrice:"",goodsPrice:"",goodsStock:"",weight:1,length:1,width:1,height:1,stockWarning:"",productCode:"",barCode:""}],pagination:{current:1,pageSize:2,total:0}},cur_goods_type:1,goods_base_data:[{type:"show_text_btn",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u5206\u7c7b")),name:"goods_cat",initialValue:"",required:!0,btn:{text:"".concat((0,N.sldComLanguage)("\u9009\u62e9\u5546\u54c1\u5206\u7c7b")),callback:a.sele_goods_cat}},{type:"radio",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u7c7b\u578b")),extra:"".concat((0,N.sldComLanguage)("\u7f16\u8f91\u5546\u54c1\u7684\u65f6\u5019\u65e0\u6cd5\u66f4\u6539\u5546\u54c1\u7c7b\u578b\uff0c\u8bf7\u8c28\u614e\u9009\u62e9")),name:"isVirtualGoods",placeholder:"",sel_data:[{name:"".concat((0,N.sldComLanguage)("\u5b9e\u7269\u5546\u54c1(\u9700\u8981\u7269\u6d41)")),key:1},{name:"".concat((0,N.sldComLanguage)("\u865a\u62df\u5546\u54c1(\u65e0\u9700\u7269\u6d41)")),key:2}],initialValue:1,onChange:a.handleGoodsType},{type:"input",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u540d\u79f0")),name:"goodsName",extra:"".concat((0,N.sldComLanguage)("\u6700\u591a\u8f93\u516550\u4e2a\u5b57")),placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0")),initialValue:"",required:!0,maxLength:50,rules:[{required:!0,whitespace:!0,message:"".concat((0,N.sldComLanguage)("\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"))}]},{type:"input",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u5e7f\u544a\u8bed")),name:"goodsBrief",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u8f93\u5165\u5546\u54c1\u5e7f\u544a\u8bed")),extra:"".concat((0,N.sldComLanguage)("\u6700\u591a\u8f93\u516550\u4e2a\u5b57")),initialValue:"",maxLength:50},{type:"select",label:"".concat((0,N.sldComLanguage)("\u54c1\u724c")),name:"brandId",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u54c1\u724c")),sel_data:[],sele_key:"brandId",sele_name:"brandName",diy:!0}],express_data:[{type:"radio_select",label:"".concat((0,N.sldComLanguage)("\u5feb\u9012\u8fd0\u8d39")),name:"express_method",placeholder:"",data:[{key:"common",value:"".concat((0,N.sldComLanguage)("\u8bbe\u7f6e\u56fa\u5b9a\u8fd0\u8d39"))},{key:"special",value:"".concat((0,N.sldComLanguage)("\u8bbe\u7f6e\u8fd0\u8d39\u6a21\u677f"))}],initialValue:"common",callback:a.isCheck}],invoice_data:[{type:"radio",label:"".concat((0,N.sldComLanguage)("\u662f\u5426\u5f00\u4e13\u7968")),name:"isVatInvoice",placeholder:"",sel_data:[{name:"".concat((0,N.sldComLanguage)("\u5426")),key:0},{name:"".concat((0,N.sldComLanguage)("\u662f")),key:1}],initialValue:0}],other_data:[{type:"tree_select_more",label:"".concat((0,N.sldComLanguage)("\u5e97\u94fa\u5206\u7c7b")),name:"innerLabelIds",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u5e97\u94fa\u5206\u7c7b")),sel_data:[],required:!1,onChange:a.handleStoreCat},{type:"multiple_select",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u6807\u7b7e")),name:"serviceLabelIds",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u5546\u54c1\u6807\u7b7e")),sel_data:[],sele_key:"labelId",sele_name:"labelName",diy:!0,required:!1},{type:"inputnum",label:"".concat((0,N.sldComLanguage)("\u865a\u62df\u9500\u91cf")),name:"virtualSales",placeholder:"",extra:"".concat((0,N.sldComLanguage)("0~999999999\u4e4b\u95f4\u7684\u6574\u6570\uff0c\u9ed8\u8ba4\u4e3a0")),initialValue:0,max:999999999},{type:"radio",label:"".concat((0,N.sldComLanguage)("\u53d1\u5e03\u72b6\u6001")),name:"sellNow",placeholder:"",width:250,sel_data:[{name:"".concat((0,N.sldComLanguage)("\u7acb\u5373\u552e\u5356")),key:!0},{name:"".concat((0,N.sldComLanguage)("\u6682\u4e0d\u552e\u5356\uff0c\u653e\u5165\u4ed3\u5e93\u4e2d")),key:!1}],initialValue:!0},{type:"radio",label:"".concat((0,N.sldComLanguage)("\u5546\u54c1\u63a8\u8350")),name:"storeIsRecommend",placeholder:"",width:250,sel_data:[{name:"".concat((0,N.sldComLanguage)("\u662f")),key:1},{name:"".concat((0,N.sldComLanguage)("\u5426")),key:0}],initialValue:1}],top_bottom_tpl_data:[{type:"select",label:"".concat((0,N.sldComLanguage)("\u9876\u90e8\u5173\u8054\u7248\u5f0f")),name:"relatedTemplateIdTop",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u9876\u90e8\u5173\u8054\u7248\u5f0f")),sel_data:[],sele_key:"templateId",sele_name:"templateName",diy:!0},{type:"select",label:"".concat((0,N.sldComLanguage)("\u5e95\u90e8\u5173\u8054\u7248\u5f0f")),initialValue:0,name:"relatedTemplateIdBottom",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u5e95\u90e8\u5173\u8054\u7248\u5f0f")),sel_data:[],sele_key:"templateId",sele_name:"templateName",diy:!0}],search_attr_data:[],store_attr_data:[{type:"select",label:"".concat((0,N.sldComLanguage)("\u5c5e\u6027\u5206\u7ec4")),name:"groupId",placeholder:"".concat((0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u5c5e\u6027\u5206\u7ec4")),sel_data:[],sele_key:"groupId",sele_name:"groupName",diy:!0,onChange:a.handleAttrGroup}]},a}return(0,I.default)(t,e),(0,_.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.query,t=this.state.express_data;void 0==e.id?(t.splice(1,0,(0,p.default)({},this.common_express)),this.setState({show_radio_flag:!0,initEditorFlag:!0})):this.setState({top_nav_step:2,step:2}),this.setState({express_data:t}),this.initSpuGoodsImaData(),this.getSystemCat(1),this.getStoreCat(),this.getStoreAttrGroup(),this.getRelatedTpl(),this.get_spec_list(),this.get_goods_label_list(),this.get_transport_lists(),this.resize(),window.addEventListener("resize",this.resize),this.props.dispatch({type:"global/getLayoutCollapsed"})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"resize",value:function(){var e=0,t=document.body.clientWidth,a=document.body.clientHeight;t>1649?e=a-73-50-310:t<=1649&&(e=a-73-50-350),H.setState({scrollY:e,screentW:t,screentH:a})}},{key:"handleFieldChange",value:function(e,t,a){var n=this.state.spec_data_table,l=n.list.map(function(e){return(0,p.default)({},e)}),i=this.getRowByKey(a,l);i&&(i[t]=e,n.list=l,this.setState({spec_data_table:n}))}},{key:"handleFieldChangeDefault",value:function(e,t,a){var n=this,l=this.state.spec_data_table,i=l.list.filter(function(e){return e.key==a});i[0].isDefault=e,1==e&&l.list.map(function(e,t){e.key!=a?(n.props.form.resetFields(["isDefault"+e.key]),l.list[t].isDefault=0):(n.props.form.resetFields(["state"+e.key]),l.list[t].state=1)}),this.setState({spec_data_table:l})}},{key:"handleFieldChangeSpu",value:function(e,t,a){var n=this.state.spu_data_table,l=n.list.map(function(e){return(0,p.default)({},e)}),i=this.getRowByKeySpu(a,l);i&&(i[t]=e,n.list=l,this.setState({spu_data_table:n}))}},{key:"getRowByKey",value:function(e,t){var a=this.state.spec_data_table;return(t||a.list).filter(function(t){return t.key===e})[0]}},{key:"getRowByKeySpu",value:function(e,t){var a=this.state.spu_data_table;return(t||a.list).filter(function(t){return t.key===e})[0]}},{key:"render",value:function(){var e=this,t=this.state,a=t.goods_base_data,n=t.spec_data_table,l=t.columns_spec,o=t.query,d=t.preview_img,r=t.preview_alt_con,c=t.show_preview_modal,u=t.modal_width,p=t.goods_img_data,g=t.spec_set_data,f=t.goods_cat,m=t.sele_goods_cat_data,_=t.cur_data,h=t.express_show,v=t.express_data,y=t.other_data,I=t.top_nav_step,L=t.spu_data_table,b=t.columns_spu,S=t.pageLoading,w=t.step,V=t.invoice_data,x=t.top_bottom_tpl_data,O=t.store_attr_data,A=t.search_attr_data,H=t.show_radio_flag,G=t.goods_video_data,B=t.cur_goods_type,q=t.initEditorFlag,M=t.getEditorContentFlag,W=t.initEditorContent;return k.default.createElement("div",{className:"".concat(T.default.common_page," ").concat(T.default.com_flex_column),style:{position:"relative"}},k.default.createElement("div",{className:"".concat(T.default.flex_com_space_between," ").concat(T.default.add_goods_title)},(0,N.sldLlineRtextAddGoods)("#69A2F2",void 0!=o.id&&1*o.id>0?"".concat((0,N.sldComLanguage)("\u7f16\u8f91\u5546\u54c1")):"".concat((0,N.sldComLanguage)("\u53d1\u5e03\u5546\u54c1")))),k.default.createElement(i.default,{spinning:S},k.default.createElement("div",{className:"".concat(T.default.add_goods_top_nav," ").concat(T.default.flex_row_start_center)},k.default.createElement("div",{className:"".concat(T.default.top_nav_item," ").concat(T.default.step1," ").concat(T.default.right_row," ").concat(I>=1?T.default.finished:null)},k.default.createElement("div",{className:"".concat(T.default.step," ").concat(T.default.flex_row_start_center)},k.default.createElement("div",{className:"".concat(T.default.left," ").concat(T.default.flex_row_center_center)},"1"),k.default.createElement("div",{className:"".concat(T.default.right," ").concat(T.default.flex_column_center_start)},k.default.createElement("span",{className:"".concat(T.default.title)},(0,N.sldComLanguage)("\u5546\u54c1\u5206\u7c7b")),k.default.createElement("span",{className:"".concat(T.default.sub_title)},(0,N.sldComLanguage)("\u8bf7\u9009\u62e9\u60a8\u7684\u5546\u54c1\u5206\u7c7b,\u53ea\u6709\u4e09\u7ea7\u5206\u7c7b\u624d\u80fd\u53d1\u5e03\u5546\u54c1"))))),k.default.createElement("div",{className:"".concat(T.default.top_nav_item," ").concat(T.default.step2," ").concat(T.default.left_row," ").concat(T.default.right_row," ").concat(I>=2?T.default.finished:null),onClick:function(){return e.operateCurNavStep(2)}},k.default.createElement("div",{className:"".concat(T.default.step," ").concat(T.default.flex_row_start_center)},k.default.createElement("div",{className:"".concat(T.default.left," ").concat(T.default.flex_row_center_center)},"2"),k.default.createElement("div",{className:"".concat(T.default.right," ").concat(T.default.flex_column_center_start)},k.default.createElement("span",{className:"".concat(T.default.title)},(0,N.sldComLanguage)("\u57fa\u672c\u4fe1\u606f")),k.default.createElement("span",{className:"".concat(T.default.sub_title)},(0,N.sldComLanguage)("\u586b\u5199\u5546\u54c1\u57fa\u672c\u4fe1\u606f,\u7269\u6d41\u4fe1\u606f\u4ee5\u53ca\u5176\u4ed6\u4fe1\u606f"))))),k.default.createElement("div",{className:"".concat(T.default.top_nav_item," ").concat(T.default.left_row," ").concat(I>=3?T.default.finished:null),onClick:function(){return e.operateCurNavStep(3)}},k.default.createElement("div",{className:"".concat(T.default.step," ").concat(T.default.flex_row_start_center),style:{borderBottomLeftRadius:0,borderBottomRightRadius:3,borderTopLeftRadius:0,borderTopRightRadius:3}},k.default.createElement("div",{className:"".concat(T.default.left," ").concat(T.default.flex_row_center_center)},"3"),k.default.createElement("div",{className:"".concat(T.default.right," ").concat(T.default.flex_column_center_start)},k.default.createElement("span",{className:"".concat(T.default.title)},(0,N.sldComLanguage)("\u5546\u54c1\u8be6\u60c5")),k.default.createElement("span",{className:"".concat(T.default.sub_title)},(0,N.sldComLanguage)("\u8bbe\u7f6e\u89c4\u683c\u4fe1\u606f,\u4e0a\u4f20\u5546\u54c1\u56fe\u7247\u5e76\u5b8c\u5584\u5546\u54c1\u8be6\u60c5")))))),1==w?k.default.createElement(R.default,{data:f,cur_data:_,sldHandleGoodsCat:this.sldHandleGoodsCat,sldAddGoodsSecond:this.sldAddGoodsSecond,sele_goods_cat_data:m}):k.default.createElement(C.default,{onSubmit:function(t){return e.handleSaveAllData()},layout:"inline"},k.default.createElement(E.Scrollbars,{ref:"scrollbars",autoHeight:!0,autoHeightMin:100,autoHeightMax:document.body.clientHeight-250},k.default.createElement("div",{className:"".concat(T.default.goods_sku_tab)},k.default.createElement("div",{style:{display:2==I?"block":"none"}},k.default.createElement("div",null,(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u57fa\u672c\u4fe1\u606f"))),(0,N.getSldEmptyH)(10),H&&k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:a})),A.length>0&&k.default.createElement(k.Fragment,null,(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u68c0\u7d22\u5c5e\u6027"))),(0,N.getSldEmptyH)(10),k.default.createElement(P.default,{form:this.props.form,data:A})),(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u5e97\u94fa\u81ea\u5b9a\u4e49\u5c5e\u6027"))),(0,N.getSldEmptyH)(10),k.default.createElement(P.default,{form:this.props.form,data:O}),1==B&&k.default.createElement(k.Fragment,null,(0,N.getSldEmptyH)(10),k.default.createElement("div",{ref:"express_position"},(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u7269\u6d41\u4fe1\u606f")))),(0,N.getSldEmptyH)(10),(void 0==o.id||(void 0!=o.id&&o.id&&h)>0)&&k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:v})),(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u53d1\u7968\u4fe1\u606f"))),(0,N.getSldEmptyH)(10),H&&k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:V}),(0,N.getSldEmptyH)(10),k.default.createElement("div",{ref:"other_info_position"},(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u5176\u4ed6\u4fe1\u606f")))),(0,N.getSldEmptyH)(10),H&&k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:y})),k.default.createElement("div",{style:{display:3==I?"block":"none"}},k.default.createElement("div",null,(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u5546\u54c1\u89c4\u683c"))),(0,N.getSldEmptyH)(10),k.default.createElement(F.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:g})),void 0!=n.list&&n.list.length>0?k.default.createElement(k.Fragment,null,(0,N.getSldEmptyH)(10),k.default.createElement("div",{className:T.default.add_goods_sku_list},k.default.createElement(s.default,{pagination:!1,columns:l,dataSource:n.list,scroll:{x:1500,y:300},size:"small"}))):k.default.createElement(k.Fragment,null,(0,N.getSldEmptyH)(10),k.default.createElement("div",{className:T.default.add_goods_sku_list},k.default.createElement(s.default,{pagination:!1,columns:b,dataSource:L.list,scroll:{x:1500,y:300},size:"small"}))),k.default.createElement("div",null,(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u5546\u54c1\u56fe\u7247"))),(0,N.getSldEmptyH)(10),k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:p})),k.default.createElement("div",null,(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u5546\u54c1\u89c6\u9891"))),(0,N.getSldEmptyH)(10),k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:G})),k.default.createElement("div",null,(0,N.getSldEmptyH)(10),(0,N.sldCommonTitleByBg)("".concat((0,N.sldComLanguage)("\u5546\u54c1\u8be6\u60c5\u63cf\u8ff0"))),(0,N.getSldEmptyH)(10)),k.default.createElement(P.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:x}),k.default.createElement("div",{style:{width:document.body.clientWidth-(this.props.global.collapsed?90:160)-35,marginTop:10}},q&&k.default.createElement(D.default,{id:"agreement",getContentFlag:M,getEditorContent:this.getEditorContent,initEditorContent:W}),(0,N.getSldEmptyH)(10)))),k.default.createElement("div",{className:T.default.m_diy_bottom_wrap,style:{position:"fixed",left:this.props.global.collapsed?90:160}},k.default.createElement("div",{onClick:function(){return e.backPre()},className:T.default.add_goods_bottom_btn},(0,N.sldComLanguage)("\u8fd4\u56de")),k.default.createElement("div",{onClick:function(){return e.operateCurNavStep(2==I?3:2)},className:T.default.add_goods_bottom_btn},"".concat(2==I?(0,N.sldComLanguage)("\u4e0b\u4e00\u6b65"):(0,N.sldComLanguage)("\u4e0a\u4e00\u6b65"))),!(void 0!=o.id&&o.id>0)&&k.default.createElement("div",{onClick:function(){return e.handleSaveAllData()},className:"".concat(T.default.add_goods_bottom_btn," ").concat(T.default.add_goods_bottom_btn_sel)},(0,N.sldComLanguage)("\u53d1\u5e03")),void 0!=o.id&&o.id>0&&k.default.createElement("div",{onClick:function(){return e.handleSaveAllData()},className:"".concat(T.default.add_goods_bottom_btn," ").concat(T.default.add_goods_bottom_btn_sel)},(0,N.sldComLanguage)("\u4fdd\u5b58")))))),k.default.createElement(J.default,{img:d,show_preview_modal:c,modal_width:u,preview_alt_con:r,closePreviewModal:function(){return e.viewImg(!1)}}))}}]),t}(k.Component),S=w))||S)||S);t.default=G}}]);