(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[63],{"1VI3":function(e,t,a){e.exports=a.p+"static/price_bg.d18acca9.png"},"2/B2":function(e,t,a){"use strict";var l=a("g09b"),c=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("giR+");var d=l(a("fyUT"));a("+L6B");var s=l(a("2/Rp"));a("T2oS");var r=l(a("W9HT"));a("R9oj");var o=l(a("ECub")),u=l(a("d6i3")),i=l(a("1l/V")),m=l(a("2Taf")),f=l(a("vZ4D")),g=l(a("l4Ni")),p=l(a("ujKo")),_=l(a("MhPg"));a("7Kak");var E=l(a("9yH6"));a("OaEy");var h=l(a("2fM7"));a("y8nQ");var v,x,y,w,C=l(a("Vl3Y")),L=a("MuoO"),N=c(a("q1tI")),b=a("+n12"),k=l(a("hh8c")),T=l(a("hdKV")),I=a("k82f"),S=l(a("usdK")),F=l(a("OS56")),P=l(a("JMh9")),V=C.default.Item,G=h.default.Option,M=E.default.Group,O=(v=(0,L.connect)(function(e){var t=e.product,a=e.global;return{product:t,global:a}}),x=C.default.create(),v(y=x((w=function(e){function t(e){var a;return(0,m.default)(this,t),a=(0,g.default)(this,(0,p.default)(t).call(this,e)),a.transport_lists=[],a.get_transport_lists=(0,i.default)(u.default.mark(function e(){var t,l,c;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,l="common/get_transport_lists",c={pageSize:b.list_com_page_more},e.next=5,t({type:l,payload:c,callback:function(e){200==e.state&&(a.transport_lists=e.data.list)}});case 5:case"end":return e.stop()}},e)})),a.get_detail=function(){var e=a.props.dispatch,t=a.state,l=t.detail,c=t.id,n=t.selectedGoodsId,d=t.bigImg,s=t.initLoading,r=t.maxChangeValue;a.setState({initLoading:!0}),e({type:"product/get_platform_goods_detail",payload:{platformGoodsId:c},callback:function(e){200==e.state?(n=[],l=e.data,l.productList.map(function(e){n.push(e.platformProductId)}),d=l.imageList[0],r=l.maxPrice?(9999999.99-l.maxPrice).toFixed(2):(9999999.99-l.minPrice).toFixed(2)):(0,b.failTip)(e.msg),s=!1,a.setState({detail:l,selectedGoodsId:n,bigImg:d,initLoading:s,maxChangeValue:r})}})},a.add=function(){var e=(0,i.default)(u.default.mark(function e(t){var l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(l=a.state.modalTitle,0!=a.transport_lists.length){e.next=4;break}return e.next=4,a.get_transport_lists();case 4:l=t?(0,b.sldComLanguage)("\u4e0a\u67b6\u5230\u5e97\u94fa"):(0,b.sldComLanguage)("\u6dfb\u52a0\u5230\u4ed3\u5e93"),a.setState({modalVisible:!0,modalTitle:l,addType:t});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.goToAdd=function(){S.default.replace("/goods/goods_import_to_platform")},a.showCurImg=function(e){var t=a.state.detail;a.setState({bigImg:t.imageList[e]})},a.specSel=function(e){var t=a.state,l=t.selectedGoodsId,c=t.detail;l.indexOf(e)>-1?1==l.length?(0,b.failTip)("".concat((0,b.sldComLanguage)("\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u89c4\u683c"),"\uff5e")):l=l.filter(function(t){return t!=e}):l.push(e),a.setState({selectedGoodsId:l,detail:c})},a.handleExpressFeeType=function(e){a.setState({expressFeeType:e.target.value})},a.sldCancle=function(){a.setState({modalVisible:!1,expressFeeType:1}),a.props.form.resetFields()},a.sldConfirm=function(e){var t=a.props.dispatch,l=a.state,c=l.detail,n=l.selectedGoodsId,d=l.addType,s=l.optSuccess;e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,l){e||(l.importState=d,l.platformGoodsId=c.platformGoodsId,l.platformProductIds=n.join(","),l.changeValue||(delete l.changeValue,delete l.changeType),delete l.expressFeeType,a.setState({submiting:!0}),t({type:"product/import_platform_goods",payload:l,callback:function(){var e=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:200==t.state?((0,b.sucTip)(t.msg),s=!0,a.sldCancle()):(0,b.failTip)(t.msg),a.setState({submiting:!1,optSuccess:s});case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}))})},a.handlePriceType=function(e){var t=a.state,l=t.detail,c=t.maxChangeValue;switch(e){case 1:c=l.maxPrice?(9999999.99-l.maxPrice).toFixed(2):(9999999.99-l.minPrice).toFixed(2);break;case 2:c=(l.minPrice-.01).toFixed(2);break;case 3:c=l.maxPrice?(9999999.99/l.maxPrice).toFixed(2):(9999999.99/l.minPrice).toFixed(2);break;case 4:c=(l.minPrice/.01).toFixed(2);break}a.setState({maxChangeValue:c})},a.state={modalTitle:"",initLoading:!1,id:e.location.query.id,detail:{},selectedGoodsId:[],bigImg:"",optSuccess:!1,modalVisible:!1,submiting:!1,expressFeeType:1,addType:!0,maxChangeValue:9999999.98},a}return(0,_.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.get_detail()}},{key:"render",value:function(){var e=this,t=this.state,l=t.initLoading,c=t.detail,u=t.selectedGoodsId,i=t.bigImg,m=t.optSuccess,f=t.modalTitle,g=t.modalVisible,p=t.submiting,_=t.expressFeeType,v=t.maxChangeValue,x={dots:!0,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:4},y=this.props.form.getFieldDecorator;return N.default.createElement("div",{className:k.default.common_page,style:{flex:1}},N.default.createElement("div",{className:k.default.flex_com_space_between,style:{marginBottom:10}},(0,b.sldLlineRtextAddGoods)("#69A2F2","".concat((0,b.sldComLanguage)("\u5546\u54c1\u8d44\u6599\u5bfc\u5165"))),(0,b.sldIconBtnBg)(function(){return e.goToAdd()},"fanhui","".concat((0,b.sldComLanguage)("\u8fd4\u56de\u4e0a\u7ea7\u9875\u9762")),"#fff",7,0,15,15,5)),(0,b.getSldHorLine)(1),N.default.createElement(r.default,{spinning:l},N.default.createElement(I.Scrollbars,{autoHeight:!0,autoHeightMin:100,autoHeightMax:document.body.clientHeight-125},N.default.createElement("div",{className:"".concat(k.default.flex_row_center_start," ").concat(T.default.platform_goods_detail)},N.default.createElement("div",{className:"".concat(k.default.flex_column_start_start," ").concat(T.default.content)},N.default.createElement("div",{className:"".concat(k.default.flex_row_start_start)},N.default.createElement("div",{className:"".concat(k.default.flex_column_start_start," ").concat(T.default.top_left)},N.default.createElement("div",{className:"".concat(k.default.flex_row_center_center," ").concat(T.default.main_img)},N.default.createElement("img",{src:i})),N.default.createElement("div",{className:"".concat(T.default.small_img," ").concat(void 0!=c.imageList&&c.imageList.length>5?null:k.default.flex_row_start_start)},void 0!=c.imageList&&c.imageList.length>5?N.default.createElement(F.default,x,void 0!=c.imageList&&c.imageList.map(function(t,a){return N.default.createElement("div",{key:a,className:"".concat(T.default.item," ").concat(k.default.flex_row_center_center),onMouseOver:function(){return e.showCurImg(a)}},N.default.createElement("img",{src:t}))})):void 0!=c.imageList&&c.imageList.map(function(t,a){return N.default.createElement("div",{key:a,className:"".concat(T.default.item," ").concat(k.default.flex_row_center_center),onMouseOver:function(){return e.showCurImg(a)}},N.default.createElement("img",{src:t}))}))),N.default.createElement("div",{className:"".concat(k.default.flex_column_start_start," ").concat(T.default.top_right)},N.default.createElement("p",{className:T.default.name},c.goodsName),N.default.createElement("p",{className:T.default.desc},c.goodsBrief),N.default.createElement("div",{className:"".concat(k.default.flex_column_start_start," ").concat(T.default.spec)},N.default.createElement("div",{className:"".concat(k.default.flex_row_start_center," ").concat(T.default.price),style:{backgroundImage:"url("+a("1VI3")+")"}},N.default.createElement("span",{className:T.default.tip},(0,b.sldComLanguage)("\u4ef7\u683c"),"\uff1a"),N.default.createElement("div",{className:T.default.price_detail},N.default.createElement("span",{className:T.default.unit},(0,b.sldComLanguage)("\xa5")),N.default.createElement("span",{className:T.default.number},c.minPrice&&c.minPrice.toFixed(2)),c.maxPrice&&N.default.createElement(N.Fragment,null,N.default.createElement("span",{className:T.default.from_to},"\uff5e"),N.default.createElement("span",{className:T.default.unit},(0,b.sldComLanguage)("\xa5")),N.default.createElement("span",{className:T.default.number},c.maxPrice.toFixed(2))))),N.default.createElement("div",{className:"".concat(k.default.flex_row_start_start," ").concat(T.default.spec_detail)},N.default.createElement("span",{className:T.default.tip},(0,b.sldComLanguage)("\u89c4\u683c"),"\uff1a"),N.default.createElement("div",{className:"".concat(k.default.flex_row_start_start),style:{flexWrap:"wrap",marginLeft:-10}},void 0!=c.productList&&c.productList.map(function(t){return N.default.createElement("div",{key:t.platformProductId,className:"".concat(k.default.flex_row_center_center," ").concat(T.default.spec_item," ").concat(u.indexOf(t.platformProductId)>-1?T.default.selected_spec_item:null),onClick:function(){return e.specSel(t.platformProductId)}},N.default.createElement("span",{className:T.default.spec_name},t.specValues),N.default.createElement("span",{className:T.default.spec_price},"\xa5",t.productPrice&&t.productPrice.toFixed(2)),N.default.createElement("div",{className:"".concat(T.default.selected_spec_item_icon," ").concat(u.indexOf(t.platformProductId)>-1?T.default.selected_spec_item:null)},(0,b.sldSvgIcon)("#FE7F2D",16,16,"xuanzhongjiaobiao")))})))),N.default.createElement("div",{className:"".concat(k.default.flex_row_start_start),style:{marginBottom:30}},m?N.default.createElement("a",{className:"".concat(k.default.flex_row_center_center," ").concat(T.default.add_to_store),onClick:function(){return e.goToAdd()}},(0,b.sldComLanguage)("\u7ee7\u7eed\u6dfb\u52a0\u5546\u54c1")):N.default.createElement(N.Fragment,null,N.default.createElement("a",{className:"".concat(k.default.flex_row_center_center," ").concat(T.default.add_to_store),onClick:function(){return e.add(!0)}},(0,b.sldComLanguage)("\u4e0a\u67b6\u5230\u5e97\u94fa")),N.default.createElement("a",{className:"".concat(k.default.flex_row_center_center," ").concat(T.default.add_to_storage),onClick:function(){return e.add(!1)}},(0,b.sldComLanguage)("\u6dfb\u52a0\u5230\u4ed3\u5e93")))))),N.default.createElement("div",{className:"".concat(T.default.body_title)},N.default.createElement("span",{className:"".concat(k.default.flex_row_center_center," ").concat(T.default.con)},(0,b.sldComLanguage)("\u4ea7\u54c1\u4ecb\u7ecd"))),N.default.createElement("div",{className:"".concat(T.default.body)},""!=c.goodsDetails?N.default.createElement("div",{dangerouslySetInnerHTML:{__html:c.goodsDetails}}):N.default.createElement(o.default,{image:a("LwD8"),imageStyle:{height:80,marginTop:90},description:N.default.createElement("span",null,(0,b.sldComLanguage)("".concat((0,b.sldComLanguage)("\u6682\u65e0\u8be6\u60c5"))))})))))),N.default.createElement(n.default,{title:f,width:500,visible:g,onOk:this.sldConfirm,onCancel:this.sldCancle,footer:[N.default.createElement(s.default,{key:"back",onClick:this.sldCancle},(0,b.sldComLanguage)("\u53d6\u6d88")),N.default.createElement(s.default,{key:"submit",type:"primary",loading:p,onClick:this.sldConfirm},(0,b.sldComLanguage)("\u786e\u5b9a"))]},N.default.createElement("div",{className:"".concat(k.default.goods_sku_tab," ").concat(k.default.add_goods_wrap," ").concat(P.default.full_activity),style:{marginBottom:15}},N.default.createElement(N.Fragment,null,N.default.createElement("div",{className:"".concat(P.default.full_acm_activity," ").concat(k.default.flex_column_start_start)},N.default.createElement("div",{className:"".concat(P.default.item," ").concat(k.default.flex_row_start_start)},N.default.createElement("div",{className:"".concat(P.default.left),style:{width:140}},(0,b.sldComLanguage)("\u4ef7\u683c\u53d8\u52a8")),N.default.createElement("div",{className:"".concat(P.default.right," ").concat(k.default.flex_column_start_start)},N.default.createElement("div",null,N.default.createElement(V,{style:{width:245,marginRight:0},extra:"\u6700\u5927\u503c\u4e3a\uff1a".concat(v,"\uff0c").concat((0,b.sldComLanguage)("\u5546\u54c1\u4e3a\u591a\u89c4\u683c\u5546\u54c1\u65f6\uff0c\u4ef7\u683c\u53d8\u52a8\u5bf9\u6240\u6709sku\u6709\u540c\u7b49\u5f71\u54cd\u3002"))},N.default.createElement("div",{className:k.default.flex_row_start_center},y("changeType",{initialValue:1,rules:[{required:!0,message:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165"))}]})(N.default.createElement(h.default,{style:{width:100},placeholder:"",onSelect:function(t){return e.handlePriceType(t)}},N.default.createElement(G,{key:1,value:1},"+"),N.default.createElement(G,{key:2,value:2},"-"),N.default.createElement(G,{key:3,value:3},"*"),N.default.createElement(G,{key:4,value:4},"/"))),N.default.createElement("div",{style:{marginLeft:8}},y("changeValue")(N.default.createElement(d.default,{max:v,min:.01,precision:2,style:{width:140},placeholder:""})))))))),N.default.createElement("div",{className:"".concat(P.default.item," ").concat(k.default.flex_row_start_start)},N.default.createElement("div",{className:"".concat(P.default.left),style:{width:140}},N.default.createElement("span",{style:{color:"red"}},"*"),(0,b.sldComLanguage)("\u5e93\u5b58")),N.default.createElement("div",{className:"".concat(P.default.right)},N.default.createElement(V,{style:{width:245},extra:"".concat((0,b.sldComLanguage)("\u5546\u54c1\u4e3a\u591a\u89c4\u683c\u5546\u54c1\u65f6\uff0c\u591a\u4e2asku\u7684\u5e93\u5b58\u5c06\u88ab\u8bbe\u7f6e\u4e3a\u540c\u4e00\u5e93\u5b58\u503c"))},y("productStock",{rules:[{required:!0,message:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165\u5e93\u5b58"))}]})(N.default.createElement(d.default,{max:99999999,min:1,precision:0,style:{width:245},placeholder:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165\u5e93\u5b58"))}))))),1==c.isVirtualGoods&&N.default.createElement(N.Fragment,null,N.default.createElement("div",{className:"".concat(P.default.item," ").concat(k.default.flex_row_start_center)},N.default.createElement("div",{className:"".concat(P.default.left),style:{width:140}},N.default.createElement("span",{style:{color:"red"}},"*"),(0,b.sldComLanguage)("\u8fd0\u8d39\u7c7b\u578b")),N.default.createElement("div",{className:"".concat(P.default.right)},N.default.createElement(V,{style:{width:245}},y("expressFeeType",{initialValue:1})(N.default.createElement(M,{size:"small",onChange:function(t){return e.handleExpressFeeType(t)}},N.default.createElement(E.default,{value:1},(0,b.sldComLanguage)("\u56fa\u5b9a\u8fd0\u8d39")),N.default.createElement(E.default,{value:2},(0,b.sldComLanguage)("\u8fd0\u8d39\u6a21\u677f"))))))),1==_?N.default.createElement("div",{className:"".concat(P.default.item," ").concat(k.default.flex_row_start_start)},N.default.createElement("div",{className:"".concat(P.default.left),style:{width:140}},N.default.createElement("span",{style:{color:"red"}},"*"),(0,b.sldComLanguage)("\u56fa\u5b9a\u8fd0\u8d39")),N.default.createElement("div",{className:"".concat(P.default.right)},N.default.createElement(V,{style:{width:245}},y("freightFee",{rules:[{required:!0,message:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165\u56fa\u5b9a\u8fd0\u8d39"))}]})(N.default.createElement(d.default,{max:99999999,min:0,precision:0,style:{width:245},placeholder:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165\u56fa\u5b9a\u8fd0\u8d39"))}))))):N.default.createElement("div",{className:"".concat(P.default.item," ").concat(k.default.flex_row_start_start)},N.default.createElement("div",{className:"".concat(P.default.left),style:{width:140}},N.default.createElement("span",{style:{color:"red"}},"*"),(0,b.sldComLanguage)("\u8fd0\u8d39\u6a21\u677f")),N.default.createElement("div",{className:"".concat(P.default.right)},N.default.createElement(V,{style:{width:245}},y("freightId",{rules:[{required:!0,message:"".concat((0,b.sldComLanguage)("\u8bf7\u9009\u62e9\u8fd0\u8d39\u6a21\u677f"))}]})(N.default.createElement(h.default,{style:{width:245},placeholder:(0,b.sldComLanguage)("\u8bf7\u9009\u62e9\u8fd0\u8d39\u6a21\u677f"),onSelect:null},this.transport_lists.map(function(e){return N.default.createElement(G,{key:e.freightTemplateId,value:e.freightTemplateId},e.templateName)}))))))))))))}}]),t}(N.Component),y=w))||y)||y);t.default=O}}]);