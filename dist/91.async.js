(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[91],{iqtH:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var o=l(a("W9HT")),d=l(a("eHn4")),i=l(a("p0pE")),s=l(a("2Taf")),c=l(a("vZ4D")),u=l(a("l4Ni")),r=l(a("ujKo")),m=l(a("MhPg"));a("y8nQ");var g,f,p,_,h=l(a("Vl3Y")),w=a("MuoO"),v=n(a("q1tI")),C=l(a("mOP9")),L=a("+n12"),y=l(a("hh8c")),b=l(a("CkN6")),S=l(a("Lv3o")),E=l(a("fjb3")),I=l(a("RTFr")),T=L.list_com_page_size_10,k=(g=(0,w.connect)(function(e){var t=e.promotion;return{promotion:t}}),f=h.default.create(),g(p=f((_=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,u.default)(this,(0,r.default)(t).call(this,e)),a.goods_spec_columns=[{title:" ",dataIndex:"id",align:"center",width:30,render:function(e,t,a){return a+1}},{title:"".concat((0,L.sldComLanguage)("\u89c4\u683c\u540d\u79f0")),dataIndex:"specValue",align:"center",width:400},{title:"".concat((0,L.sldComLanguage)("\u7f16\u7801")),dataIndex:"productCode",align:"center",width:200}],a.operate_ids="",a.reason_list=[],a.viewSpec=function(e){var t=a.state.view_spec_data;t[0].data=e,a.setState({view_spec_data:t,modalVisible:!0})},a.operate=function(e,t){var l=a.state.params,n=a.props.dispatch,o={},d="";"invalid"==t?(d="promotion/invalid_full_asm",o.fullId=e):"copy"==t?(d="promotion/copy_full_asm",o.fullId=e):"del"==t?(d="promotion/del_full_asm",o.fullId=e):"publish"==t&&(d="promotion/publish_full_asm",o.fullId=e),a.setState({submiting:!0}),n({type:d,payload:o,callback:function(e){200==e.state?((0,L.sucTip)(e.msg),a.get_list(l),a.setState({modalVisible:!1})):(0,L.failTip)(e.msg),a.setState({submiting:!1})}})},a.get_list=function(e){a.setState({initLoading:!0});var t=a.props.dispatch;t({type:"promotion/get_full_asm_list",payload:(0,i.default)({},e),callback:function(t){a.setState({initLoading:!1}),200==t.state&&(0==t.data.length&&a.state.params.current>1?(e.current=e.current-1,a.get_list(e)):a.setState({data:t.data}))}})},a.viewImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.setState({preview_img:t,preview_alt_con:l,show_preview_modal:e})},a.handleSelectRows=function(e,t){a.setState({selectedRows:e,selectedRowKeys:t})},a.handleTablePagination=function(e,t,l){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",o=a.state.formValues;if("main"==n){var d=(0,L.sldHandlePaginationData)(e,t,l,o);T=d.pageSize,a.setState({params:d}),a.get_list(d)}},a.resizeTable=function(e,t,l,n){var o=(0,L.dragSldTableColumn)(e,t,n);a.setState((0,d.default)({},l,o))},a.search=function(e){var t=(0,i.default)({},e);for(var l in t.search_activity_time&&(t.startTime=t.search_activity_time[0]?t.search_activity_time[0].format(L.dateFormat)+" 00:00:00":"",t.endTime=t.search_activity_time[1]?t.search_activity_time[1].format(L.dateFormat)+" 23:59:59":"",delete t.search_activity_time),t)""==t[l]&&delete t[l];a.setState({formValues:t,params:{pageSize:T}}),a.get_list((0,i.default)({pageSize:T},t))},a.seaReset=function(){a.setState({formValues:{},params:{pageSize:T}}),a.get_list({pageSize:T})},a.sldHandleCancle=function(){a.setState({modalVisible:!1})},a.lockUpGoods=function(e){var t=a.state,l=t.addData,n=t.operateData;n=JSON.parse(JSON.stringify(l)),a.operate_ids=e,a.setState({operateData:n,modal_width:500,title:"".concat((0,L.sldComLanguage)("\u8fdd\u89c4\u4e0b\u67b6\u9636\u68af\u6ee1\u51cf")),modalVisible:!0,show_foot:!0})},a.sldHandleConfirm=function(e){var t=a.reason_list.filter(function(t){return t.reasonId==e.offlineReason})[0];e.offlineReason=t.content,e.fullIds=a.operate_ids,a.operate(e,"down")},a.state={operateData:[],modal_width:700,preview_img:"",preview_alt_con:"",show_preview_modal:!1,modalVisibleDetail:!1,initLoading:!1,submiting:!1,show_foot:!1,modalVisible:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"".concat((0,L.sldComLanguage)("\u9636\u68af\u6ee1\u51cf\u89c4\u683c")),type:"add",params:{pageSize:T},addData:[{type:"select",label:"".concat((0,L.sldComLanguage)("\u4e0b\u67b6\u7406\u7531")),name:"offlineReason",placeholder:"".concat((0,L.sldComLanguage)("\u8bf7\u9009\u62e9\u4e0b\u67b6\u7406\u7531")),sel_data:[],sele_key:"reasonId",sele_name:"content",diy:!0,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8bf7\u9009\u62e9\u4e0b\u67b6\u7406\u7531"))}]},{type:"textarea",label:"".concat((0,L.sldComLanguage)("\u5907\u6ce8")),name:"offlineComment",placeholder:"".concat((0,L.sldComLanguage)("\u8bf7\u8f93\u5165\u8fdd\u89c4\u4e0b\u67b6\u7406\u7531")),extra:"".concat((0,L.sldComLanguage)("\u6700\u591a\u8f93\u5165100\u5b57")),maxLength:100}],search_data:[{type:"input",label:"".concat((0,L.sldComLanguage)("\u6d3b\u52a8\u540d\u79f0")),name:"fullName",placeholder:"".concat((0,L.sldComLanguage)("\u8bf7\u8f93\u5165\u6d3b\u52a8\u540d\u79f0"))},{type:"rangepicker",label:"".concat((0,L.sldComLanguage)("\u6d3b\u52a8\u65f6\u95f4")),name:"search_activity_time",placeholder1:"".concat((0,L.sldComLanguage)("\u5f00\u59cb\u65f6\u95f4")),placeholder2:"".concat((0,L.sldComLanguage)("\u7ed3\u675f\u65f6\u95f4"))},{type:"select",label:"".concat((0,L.sldComLanguage)("\u6d3b\u52a8\u72b6\u6001")),name:"state",placeholder:"".concat((0,L.sldComLanguage)("\u8bf7\u9009\u62e9\u6d3b\u52a8\u72b6\u6001")),sel_data:[{key:"",name:"".concat((0,L.sldComLanguage)("\u5168\u90e8"))},{key:"1",name:"".concat((0,L.sldComLanguage)("\u5f85\u53d1\u5e03"))},{key:"2",name:"".concat((0,L.sldComLanguage)("\u672a\u5f00\u59cb"))},{key:"3",name:"".concat((0,L.sldComLanguage)("\u8fdb\u884c\u4e2d"))},{key:"5",name:"".concat((0,L.sldComLanguage)("\u5df2\u5931\u6548"))},{key:"4",name:"".concat((0,L.sldComLanguage)("\u5df2\u7ed3\u675f"))}]}],view_spec_data:[{type:"scroll_table",name:"",label:"",width:680,content:"",data:[],columns:a.goods_spec_columns,rowKey:"id",scroll:{y:300}}],formValues:{},columns:[{title:" ",dataIndex:"fullId",align:"center",width:30,render:function(e,t,l){return(0,L.getTableNum)(a.state.params,T,l)}},{title:"".concat((0,L.sldComLanguage)("\u6d3b\u52a8\u540d\u79f0")),dataIndex:"fullName",align:"center",width:100},{title:"".concat((0,L.sldComLanguage)("\u6d3b\u52a8\u65f6\u95f4")),dataIndex:"startTime",align:"center",width:100,render:function(e,t){return v.default.createElement("div",{className:y.default.voucher_time_wrap},v.default.createElement("p",null,e),v.default.createElement("p",null,"~"),v.default.createElement("p",null,t.endTime))}},{title:"".concat((0,L.sldComLanguage)("\u6d3b\u52a8\u72b6\u6001")),dataIndex:"stateValue",align:"center",width:100},{title:"".concat((0,L.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(e,t){return v.default.createElement(v.Fragment,null,v.default.createElement(C.default,{to:{pathname:"/marketing/full_asm_to_add",query:{id:t.fullId,tar:"view"}}},(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u67e5\u770b")),function(){return null})),v.default.createElement("span",{className:y.default.splitLine}),v.default.createElement(C.default,{to:{pathname:"/marketing/full_asm_to_add",query:{id:t.fullId,tar:"copy"}}},(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u590d\u5236")),function(){return null})),1==t.state&&v.default.createElement(v.Fragment,null,v.default.createElement(C.default,{to:{pathname:"/marketing/full_asm_to_add",query:{id:t.fullId,tar:"edit"}}},(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u7f16\u8f91")),function(){return null})),v.default.createElement("span",{className:y.default.splitLine})),1==t.state&&v.default.createElement(v.Fragment,null,v.default.createElement("span",{className:y.default.splitLine}),(0,L.sldPopConfirmDiy)("leftBottom","".concat((0,L.sldComLanguage)("\u53d1\u5e03\u540e\u4e0d\u53ef\u64a4\u9500\uff0c\u662f\u5426\u786e\u5b9a\u53d1\u5e03\uff1f")),function(){return a.operate(t.fullId,"publish")},"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),"".concat((0,L.sldComLanguage)("\u53d6\u6d88")),(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u53d1\u5e03")),function(){return null}))),(2==t.state||3==t.state)&&v.default.createElement(v.Fragment,null,v.default.createElement("span",{className:y.default.splitLine}),(0,L.sldPopConfirmDiy)("leftBottom","".concat((0,L.sldComLanguage)("\u786e\u5b9a\u5931\u6548\u8be5\u6d3b\u52a8\u5417\uff1f")),function(){return a.operate(t.fullId,"invalid")},"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),"".concat((0,L.sldComLanguage)("\u53d6\u6d88")),(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u5931\u6548")),function(){return null}))),(1==t.state||4==t.state||5==t.state)&&v.default.createElement(v.Fragment,null,v.default.createElement("span",{className:y.default.splitLine}),(0,L.sldPopConfirmDiy)("leftBottom","".concat((0,L.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664"),"\uff1f"),function(){return a.operate(t.fullId,"del")},"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),"".concat((0,L.sldComLanguage)("\u53d6\u6d88")),(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u5220\u9664")),function(){return null}))))}}]},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.get_list({pageSize:T})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRows,l=(t.selectedRowKeys,t.search_data),n=t.columns,d=t.initLoading,i=t.data,s=t.show_preview_modal,c=t.preview_img,u=t.preview_alt_con,r=(t.view_spec_data,t.modalVisible),m=t.title,g=t.modal_width,f=t.operateData,p=t.show_foot,_=t.submiting;return v.default.createElement("div",{className:y.default.common_page,style:{flex:1,paddingTop:0}},(0,L.getSldEmptyH)(10),(0,L.sldLlineRtextAddGoodsAddMargin)("#FA6F1E","".concat((0,L.sldComLanguage)("\u9636\u68af\u6ee1\u51cf\u6d3b\u52a8")),0,0,10),v.default.createElement("div",{className:y.default.tableListForm},v.default.createElement(S.default,{search_data:l,seaSubmit:function(t){return e.search(t)},seaReset:function(){return e.seaReset()}})),v.default.createElement("div",{className:y.default.operate_bg},v.default.createElement(C.default,{to:{pathname:"/marketing/full_asm_to_add"}},(0,L.sldIconBtn)(function(){return null},"".concat((0,L.sldComLanguage)("\u65b0\u5efa\u9636\u68af\u6ee1\u51cf\u6d3b\u52a8")),7,0,12,12,3,"fabu1","#08A9B7"))),v.default.createElement(o.default,{spinning:d},v.default.createElement(b.default,{totalHeight:document.body.clientHeight-200,bordered:!1,selectedRows:a,data:i,rowKey:"fullId",isCheck:!1,columns:n,onSelectRow:this.handleSelectRows,onChange:function(t,a,l){return e.handleTablePagination(t,a,l,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(t,a){return e.resizeTable(t,a,"columns",n)},isColumnResize:!0})),v.default.createElement(E.default,{img:c,show_preview_modal:s,modal_width:900,preview_alt_con:u,closePreviewModal:function(){return e.viewImg(!1)}}),v.default.createElement(I.default,{width:g,title:m,submiting:_,modalVisible:r,sldHandleConfirm:function(t){return e.sldHandleConfirm(t)},sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:L.formItemLayoutModal,content:f,show_foot:p}))}}]),t}(v.Component),p=_))||p)||p);t.default=k}}]);