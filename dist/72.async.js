(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[72],{tEnW:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var o=n(a("W9HT"));a("BoS7");var i=n(a("Sdc0")),d=n(a("p0pE")),s=n(a("eHn4")),r=n(a("2Taf")),u=n(a("vZ4D")),c=n(a("l4Ni")),g=n(a("ujKo")),m=n(a("rlhR")),p=n(a("MhPg"));a("y8nQ");var f,h,C,S,b=n(a("Vl3Y")),_=a("MuoO"),L=l(a("q1tI")),w=a("+n12"),v=n(a("hh8c")),y=n(a("CkN6")),T=n(a("RTFr")),V=n(a("mOP9")),I=w.list_com_page_size_10,D=(f=(0,_.connect)(function(e){var t=e.product;return{product:t}}),h=b.default.create(),f(C=h((S=function(e){function t(e){var a;return(0,r.default)(this,t),a=(0,c.default)(this,(0,g.default)(t).call(this,e)),a.cur_edit_id="",a.editAttr=function(e){var t=a.state,n=t.addData,l=t.operateData;for(var o in l=(0,w.getSldCopyData)(n),l)"attributeValues"==l[o].name?l[o].initialValue=e[l[o].name].join(","):l[o].initialValue=e[l[o].name];a.cur_edit_id=e.groupId,a.setState({type:"edit",title:"".concat((0,w.sldComLanguage)("\u7f16\u8f91\u5c5e\u6027")),operateData:l,modalVisible:!0})},a.operateAttr=function(e,t){a.setState({submiting:!0});var n=a.state.params,l=a.props.dispatch,o="",i={};"del"==t?(o="product/del_attribute_group",i.groupIds=e):"edit"==t&&(o="product/edit_attribute_group",i=e),l({type:o,payload:i,callback:function(e){200==e.state?((0,w.sucTip)(e.msg),a.get_list(n),a.setState({modalVisible:!1})):(0,w.failTip)(e.msg),a.setState({submiting:!1})}})},a.addAttr=function(){var e=a.state,t=e.addData,n=e.operateData;n=(0,w.getSldCopyData)(t),a.setState({modalVisible:!0,type:"add",title:"".concat((0,w.sldComLanguage)("\u6dfb\u52a0\u5c5e\u6027")),operateData:n})},a.get_list=function(e){a.setState({initLoading:!0});var t=a.props.dispatch;t({type:"product/get_attribute_group_lists",payload:e,callback:function(t){a.setState({initLoading:!1}),200==t.state&&(0==t.data.length&&a.state.params.currentPage>1?(e.currentPage=e.currentPage-1,a.get_list(e)):a.setState({data:t.data}))}})},a.handleSelectRows=function(e,t){a.setState({selectedRows:e,selectedRowKeys:t})},a.handleTablePagination=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",o=a.state.formValues;if("main"==l){var i=(0,w.sldHandlePaginationData)(e,t,n,o);I=i.pageSize,a.setState({params:i}),a.get_list(i)}},a.resizeTable=function(e,t,n,l){var o=(0,w.dragSldTableColumn)(e,t,l);a.setState((0,s.default)({},n,o))},a.sldHandleCancle=function(){a.setState({modalVisible:!1})},a.sldHandleConfirm=function(e){var t=a.state.type,n=a.props.dispatch,l=(0,m.default)(a);e.isShow=e.isShow?1:0,a.setState({submiting:!0}),"edit"==t?(e.groupId=a.cur_edit_id,a.operateAttr(e,"edit")):n({type:"product/add_attribute_group",payload:e,callback:function(e){200==e.state?((0,w.sucTip)(e.msg),l.get_list({pageSize:I}),a.setState({modalVisible:!1})):(0,w.failTip)(e.msg),a.setState({submiting:!1})}})},a.sldSearChange=function(e){a.setState({search_con:e.target.value})},a.sldSearClear=function(){a.setState({search_con:""}),a.sldSearch("")},a.sldSearch=function(e){var t=a.state,n=t.params,l=t.formValues;n.groupName=e,l.groupName=e,a.setState((0,d.default)({pageSize:I},l,{params:{pageSize:I}})),a.get_list(n)},a.state={search_con:"",initLoading:!1,submiting:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"",type:"add",params:{pageSize:I},operateData:[],addData:[{type:"input",label:"".concat((0,w.sldComLanguage)("\u5206\u7ec4\u540d\u79f0")),name:"groupName",extra:"".concat((0,w.sldComLanguage)("\u6700\u591a\u8f93\u51656\u4e2a\u5b57")),placeholder:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0")),initialValue:"",maxLength:6,rules:[{required:!0,whitespace:!0,message:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0"))}]},{type:"inputnum",label:"".concat((0,w.sldComLanguage)("\u6392\u5e8f")),name:"sort",extra:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u51650~255\u7684\u6570\u5b57,\u6570\u5b57\u8d8a\u5c0f\u987a\u5e8f\u8d8a\u9760\u524d")),placeholder:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u6392\u5e8f")),initialValue:"",rules:[{required:!0,message:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u6392\u5e8f"))},{validator:function(e,t,a){return(0,w.validatorNumbe)(e,t,a)}}]},{type:"switch",label:"".concat((0,w.sldComLanguage)("\u542f\u7528")),name:"isShow",placeholder:"",initialValue:1}],formValues:{},columns:[{title:" ",dataIndex:"groupId",align:"center",width:30,render:function(e,t,n){return(0,w.getTableNum)(a.state.params,I,n)}},{title:"".concat((0,w.sldComLanguage)("\u5206\u7ec4\u540d\u79f0")),dataIndex:"groupName",align:"center",width:100},{title:"".concat((0,w.sldComLanguage)("\u6392\u5e8f")),dataIndex:"sort",align:"center",width:100},{title:"".concat((0,w.sldComLanguage)("\u542f\u7528\u72b6\u6001")),dataIndex:"isShow",align:"center",width:80,render:function(e,t){return L.default.createElement(i.default,{checkedChildren:"".concat((0,w.sldComLanguage)("\u542f\u7528")),onChange:function(e){return a.operateAttr({groupId:t.groupId,isShow:e?1:0},"edit")},unCheckedChildren:"".concat((0,w.sldComLanguage)("\u505c\u7528")),checked:1==e,valuepropname:"checked"})}},{title:"".concat((0,w.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(e,t){return L.default.createElement(L.Fragment,null,L.default.createElement(V.default,{to:{pathname:"/goods/attribute_group_to_detail",query:{id:t.groupId}}},(0,w.sldtbaleOpeBtnText)("".concat((0,w.sldComLanguage)("\u67e5\u770b")),function(){return null})),L.default.createElement("span",{className:v.default.splitLine}),(0,w.sldtbaleOpeBtnText)("".concat((0,w.sldComLanguage)("\u7f16\u8f91")),function(){return a.editAttr(t)}),L.default.createElement("span",{className:v.default.splitLine}),(0,w.sldPopConfirmDiy)("leftBottom","".concat((0,w.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664")),function(){return a.operateAttr(t.groupId,"del")},"".concat((0,w.sldComLanguage)("\u786e\u5b9a")),"".concat((0,w.sldComLanguage)("\u53d6\u6d88")),(0,w.sldtbaleOpeBtnText)("".concat((0,w.sldComLanguage)("\u5220\u9664")),function(){return null})))}}]},a}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.get_list({pageSize:I})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRows,n=t.columns,l=t.initLoading,i=t.data,d=t.submiting,s=t.operateData,r=t.modalVisible,u=t.title,c=t.search_con;return L.default.createElement("div",{className:v.default.common_page,style:{flex:1}},(0,w.sldLlineRtextAddGoodsAddMargin)("#69A2F2","".concat((0,w.sldComLanguage)("\u81ea\u5b9a\u4e49\u5c5e\u6027")),0,0,5),L.default.createElement("div",{className:v.default.operate_bg},(0,w.sldIconBtn)(function(){return e.addAttr()},"".concat((0,w.sldComLanguage)("\u6dfb\u52a0\u5c5e\u6027\u5206\u7ec4")),7,7),(0,w.sldSearchValClear)("".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5c5e\u6027\u540d\u79f0")),291,this.sldSearch,"".concat((0,w.sldComLanguage)("\u641c\u7d22")),c,this.sldSearChange,this.sldSearClear,65)),L.default.createElement(o.default,{spinning:l},L.default.createElement(y.default,{totalHeight:document.body.clientHeight-150-15,selectedRows:a,data:i,rowKey:"groupId",isCheck:!1,columns:n,onSelectRow:this.handleSelectRows,onChange:function(t,a,n){return e.handleTablePagination(t,a,n,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(t,a){return e.resizeTable(t,a,"columns",n)},isColumnResize:!0})),L.default.createElement(T.default,{title:u,submiting:d,width:500,Promotion_flash_sale:!0,modalVisible:r,sldHandleConfirm:function(t){return e.sldHandleConfirm(t)},sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:w.formItemLayoutModal,content:s}))}}]),t}(L.Component),C=S))||C)||C);t.default=D}}]);