(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[73],{BrOC:function(t,e,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("T2oS");var i=n(a("W9HT"));a("BoS7");var r=n(a("Sdc0")),o=n(a("eHn4")),u=n(a("p0pE")),d=n(a("2Taf")),s=n(a("vZ4D")),c=n(a("l4Ni")),g=n(a("ujKo")),p=n(a("rlhR")),m=n(a("MhPg"));a("y8nQ");var f,h,C,b,S=n(a("Vl3Y")),L=a("MuoO"),v=l(a("q1tI")),w=a("+n12"),_=n(a("hh8c")),V=n(a("CkN6")),y=n(a("RTFr")),T=w.list_com_page_size_10,I=(f=(0,L.connect)(function(t){var e=t.product;return{product:e}}),h=S.default.create(),f(C=h((b=function(t){function e(t){var a;return(0,d.default)(this,e),a=(0,c.default)(this,(0,g.default)(e).call(this,t)),a.cur_edit_id="",a.handleTagClose=function(t){var e=a.state.operateData,n=e.filter(function(t){return"attribute"==t.name})[0],l=n.tags.filter(function(e){return e!==t});n.tags=l,a.setState({operateData:e})},a.showTagInput=function(){var t=a.state.operateData,e=t.filter(function(t){return"attribute"==t.name})[0];e.inputVisible=!0,a.setState({operateData:t})},a.handleTagInputChange=function(t){var e=a.state.operateData,n=e.filter(function(t){return"attribute"==t.name})[0];n.inputValue=t.target.value,a.setState({operateData:e})},a.handleTagInputConfirm=function(){var t=a.state.operateData,e=t.filter(function(t){return"attribute"==t.name})[0];return e.inputValue=e.inputValue.trim(),e.inputValue?e.tags.length>=20?((0,w.failTip)("".concat((0,w.sldComLanguage)("\u5c5e\u6027\u503c\u6700\u591a\u53ef\u6dfb\u52a020\u4e2a\uff5e"))),!1):e.tags.indexOf(e.inputValue)>-1?((0,w.failTip)("".concat((0,w.sldComLanguage)("\u5c5e\u6027\u503c\u4e0d\u53ef\u4ee5\u91cd\u590d\uff5e"))),!1):(e.tags.push(e.inputValue),e.inputVisible=!1,e.inputValue="",void a.setState({operateData:t})):((0,w.failTip)("".concat((0,w.sldComLanguage)("\u5c5e\u6027\u503c\u4e0d\u53ef\u4e3a\u7a7a\uff5e"))),!1)},a.editAttr=function(t){var e=a.state,n=e.addData,l=e.operateData;for(var i in l=(0,w.getSldCopyData)(n),l)"attribute"==l[i].name?l[i].tags=t.parameterValue.split(","):l[i].initialValue=t[l[i].name],l[i].initialValue=t[l[i].name];a.cur_edit_id=t.parameterId,a.setState({type:"edit",title:"".concat((0,w.sldComLanguage)("\u7f16\u8f91\u5c5e\u6027")),operateData:l,modalVisible:!0})},a.operateAttr=function(t,e){a.setState({submiting:!0});var n=a.state,l=n.params,i=(n.query,a.props.dispatch),r="",o={};"del"==e?(r="product/del_attribute",o.parametersIds=t):"edit"==e?(r="product/edit_attribute",o=t):"stop"!=e&&"start"!=e||(r="product/edit_attribute",o.isShow="stop"==e?0:1,o.parameterId=t),i({type:r,payload:o,callback:function(t){200==t.state?((0,w.sucTip)(t.msg),a.get_list(l),a.setState({modalVisible:!1})):(0,w.failTip)(t.msg),a.setState({submiting:!1})}})},a.addAttr=function(){var t=a.state,e=t.addData,n=t.operateData;n=(0,w.getSldCopyData)(e);var l=n.filter(function(t){return"attribute"==t.name})[0];l.inputVisible=!1,l.tags=[],l.inputValue="",a.setState({modalVisible:!0,type:"add",title:"".concat((0,w.sldComLanguage)("\u6dfb\u52a0\u5c5e\u6027")),operateData:n})},a.get_list=function(t){a.setState({initLoading:!0});var e=a.props.dispatch;e({type:"product/get_attribute_lists",payload:(0,u.default)({},t,{groupId:a.state.query.id}),callback:function(e){a.setState({initLoading:!1}),200==e.state&&(0==e.data.length&&a.state.params.currentPage>1?(t.currentPage=t.currentPage-1,a.get_list(t)):a.setState({data:e.data}))}})},a.handleSelectRows=function(t,e){a.setState({selectedRows:t,selectedRowKeys:e})},a.handleTablePagination=function(t,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",i=a.state.formValues;if("main"==l){var r=(0,w.sldHandlePaginationData)(t,e,n,i);T=r.pageSize,a.setState({params:r}),a.get_list(r)}},a.resizeTable=function(t,e,n,l){var i=(0,w.dragSldTableColumn)(t,e,l);a.setState((0,o.default)({},n,i))},a.sldHandleCancle=function(){a.setState({modalVisible:!1})},a.sldHandleConfirm=function(t){var e=a.state,n=e.type,l=e.query,i=e.operateData,r=a.props.dispatch,o=(0,p.default)(a);t.isShow=t.isShow?1:0;var u=i.filter(function(t){return"attribute"==t.name})[0];if(0==u.tags.length)return(0,w.failTip)("".concat((0,w.sldComLanguage)("\u5c5e\u6027\u503c\u5fc5\u586b\uff5e"))),!1;t.parameterValue=u.tags.join(","),a.setState({submiting:!0}),"edit"==n?(t.parameterId=a.cur_edit_id,a.operateAttr(t,"edit")):(t.groupId=l.id,r({type:"product/add_attribute",payload:t,callback:function(t){200==t.state?((0,w.sucTip)(t.msg),o.get_list({pageSize:T}),a.setState({modalVisible:!1})):(0,w.failTip)(t.msg),a.setState({submiting:!1})}}))},a.sldSearChange=function(t){a.setState({search_con:t.target.value})},a.sldSearClear=function(){a.setState({search_con:""}),a.sldSearch("")},a.sldSearch=function(t){var e=a.state,n=e.params,l=e.formValues;n.parameterName=t,l.parameterName=t,a.setState((0,u.default)({pageSize:T},l,{params:{pageSize:T}})),a.get_list(n)},a.state={query:t.location.query,search_con:"",initLoading:!1,submiting:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"",type:"add",params:{pageSize:T},operateData:[],addData:[{type:"input",label:"".concat((0,w.sldComLanguage)("\u5c5e\u6027\u540d\u79f0")),name:"parameterName",extra:"".concat((0,w.sldComLanguage)("\u6700\u591a\u8f93\u51656\u4e2a\u5b57")),placeholder:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5c5e\u6027\u540d\u79f0")),initialValue:"",maxLength:6,rules:[{required:!0,whitespace:!0,message:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5c5e\u6027\u540d\u79f0"))}]},{type:"attr_tags",label:"".concat((0,w.sldComLanguage)("\u5c5e\u6027\u503c")),extra:"".concat((0,w.sldComLanguage)("\u6700\u591a\u53ef\u6dfb\u52a020\u4e2a\uff0c\u6bcf\u4e2a\u5c5e\u6027\u503c\u6700\u591a\u53ef\u4ee5\u8f93\u516510\u4e2a\u5b57\uff0c\u4e14\u4e0d\u53ef\u91cd\u590d")),disable:!0,name:"attribute",placeholder:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5c5e\u6027\u503c")),initialValue:"",inputVisible:!1,handleClose:a.handleTagClose,showInput:a.showTagInput,tip_con:"".concat((0,w.sldComLanguage)("\u6dfb\u52a0\u5c5e\u6027\u503c")),required:!0,tags:[],inputValue:"",handleInputChange:a.handleTagInputChange,handleInputConfirm:a.handleTagInputConfirm},{type:"inputnum",label:"".concat((0,w.sldComLanguage)("\u6392\u5e8f")),name:"sort",extra:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u51650~255\u7684\u6570\u5b57,\u6570\u5b57\u8d8a\u5c0f\u987a\u5e8f\u8d8a\u9760\u524d")),placeholder:"".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u6392\u5e8f")),initialValue:"",rules:[{required:!0,message:"".concat((0,w.sldComLanguage)("\u6392\u5e8f\u5fc5\u586b"))},{validator:function(t,e,a){return(0,w.validatorNumbe)(t,e,a)}}]},{type:"switch",label:"".concat((0,w.sldComLanguage)("\u542f\u7528")),name:"isShow",placeholder:"",initialValue:1}],formValues:{},columns:[{title:" ",dataIndex:"parameterId",align:"center",width:30,render:function(t,e,n){return(0,w.getTableNum)(a.state.params,T,n)}},{title:"".concat((0,w.sldComLanguage)("\u5c5e\u6027\u540d\u79f0")),dataIndex:"parameterName",align:"center",width:100},{title:"".concat((0,w.sldComLanguage)("\u5c5e\u6027\u503c")),dataIndex:"parameterValue",align:"center",width:150},{title:"".concat((0,w.sldComLanguage)("\u6392\u5e8f")),dataIndex:"sort",align:"center",width:80},{title:"".concat((0,w.sldComLanguage)("\u542f\u7528\u72b6\u6001")),dataIndex:"isShow",align:"center",width:80,render:function(t,e){return v.default.createElement(r.default,{checkedChildren:"".concat((0,w.sldComLanguage)("\u542f\u7528")),onChange:function(t){return a.operateAttr(e.parameterId,t?"start":"stop")},unCheckedChildren:"".concat((0,w.sldComLanguage)("\u505c\u7528")),checked:1==t,valuepropname:"checked"})}},{title:"".concat((0,w.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(t,e){return v.default.createElement(v.Fragment,null,(0,w.sldtbaleOpeBtnText)("\u7f16\u8f91",function(){return a.editAttr(e)}),v.default.createElement("span",{className:_.default.splitLine}),(0,w.sldPopConfirmDiy)("leftBottom","".concat((0,w.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664")),function(){return a.operateAttr(e.parameterId,"del")},"".concat((0,w.sldComLanguage)("\u786e\u5b9a")),"".concat((0,w.sldComLanguage)("\u53d6\u6d88")),(0,w.sldtbaleOpeBtnText)("".concat((0,w.sldComLanguage)("\u5220\u9664")),function(){return null})))}}]},a}return(0,m.default)(e,t),(0,s.default)(e,[{key:"componentDidMount",value:function(){this.get_list({pageSize:T})}},{key:"render",value:function(){var t=this,e=this.state,a=e.selectedRows,n=e.columns,l=e.initLoading,r=e.data,o=e.submiting,u=e.operateData,d=e.modalVisible,s=e.title,c=e.search_con;return v.default.createElement("div",{className:_.default.common_page,style:{flex:1}},(0,w.sldLlineRtextAddGoodsAddMargin)("#FA6F1E","".concat((0,w.sldComLanguage)("\u5c5e\u6027\u7ba1\u7406")),0,0,5),v.default.createElement("div",{className:_.default.operate_bg},(0,w.sldIconBtn)(function(){return t.addAttr()},"".concat((0,w.sldComLanguage)("\u6dfb\u52a0\u5c5e\u6027")),7,7),(0,w.sldSearchValClear)("".concat((0,w.sldComLanguage)("\u8bf7\u8f93\u5165\u5c5e\u6027\u540d\u79f0")),291,this.sldSearch,"".concat((0,w.sldComLanguage)("\u641c\u7d22")),c,this.sldSearChange,this.sldSearClear,65)),v.default.createElement(i.default,{spinning:l},v.default.createElement(V.default,{totalHeight:document.body.clientHeight-150-15,selectedRows:a,data:r,rowKey:"parameterId",isCheck:!1,columns:n,onSelectRow:this.handleSelectRows,onChange:function(e,a,n){return t.handleTablePagination(e,a,n,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(e,a){return t.resizeTable(e,a,"columns",n)},isColumnResize:!0})),v.default.createElement(y.default,{title:s,submiting:o,maxLengthLimit:20,width:500,Promotion_flash_sale:!0,modalVisible:d,sldHandleConfirm:function(e){return t.sldHandleConfirm(e)},sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:w.formItemLayoutModal,content:u}))}}]),e}(v.Component),C=b))||C)||C);e.default=I}}]);