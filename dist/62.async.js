(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{"PeY+":function(e,a,t){"use strict";var n=t("g09b"),l=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("p0pE")),s=n(t("2Taf")),r=n(t("vZ4D")),d=n(t("l4Ni")),o=n(t("ujKo")),c=n(t("rlhR")),u=n(t("MhPg"));t("y8nQ");var m,f,g,_,h=n(t("Vl3Y")),p=t("MuoO"),y=l(t("q1tI")),v=t("k82f"),b=t("+n12"),C=n(t("usdK")),k=n(t("hh8c")),L=n(t("3UVY")),w=n(t("SU9B")),x="",E=(m=(0,p.connect)(function(e){var a=e.express,t=e.global;return{express:a,global:t}}),f=h.default.create(),m(g=f((_=function(e){function a(e){var t;(0,s.default)(this,a),t=(0,d.default)(this,(0,o.default)(a).call(this,e)),t.index=2,t.getDetail=function(){var e=t.state,a=e.search_data,n=e.express_info,l=e.query;t.props.dispatch({type:"express/get_transport_detail",payload:{freightTemplateId:l.id},callback:function(e){if(200==e.state){var i=e.data;for(var s in a)"chargeType"==a[s].name?a[s].initialValue=1*i[a[s].name]:(a[s].initialValue=i[a[s].name],"templateName"==a[s].name&&"copy"==l.type&&(a[s].initialValue=""));var r=i.freightExtendList,d=0;for(var o in n)for(var c in r)"CN"==r[c].cityCode?(n[o].base_info["trans_com_fee"+n[o].type]=r[c].basePrice,n[o].base_info["trans_com_weight"+n[o].type]=r[c].baseNumber,n[o].base_info["trans_com_add_weight"+n[o].type]=r[c].addNumber,n[o].base_info["trans_com_add_fee"+n[o].type]=r[c].addPrice,n[o].base_info["freightExtendId"+n[o].type]=r[c].freightExtendId):(n[o].data_table.push({key:d,deliver_areas:r[c].cityName,trans_weight:r[c].baseNumber,trans_fee:r[c].basePrice,trans_add_weight:r[c].addNumber,trans_add_fee:r[c].addPrice,sele_area_id_array:r[c].cityCode.split(","),freightExtendId:r[c].freightExtendId}),d++);t.setState({search_data:a,express_info:n,show_flag:!0})}else(0,b.failTip)(e.msg)}})},t.handleSelectRows=function(e,a){t.setState({selectedRows:e,selectedRowKeys:a})},t.backPre=function(){var e=t.state.query;C.default.replace(e.source)},t.handleSaveAllData=function(){var e=t.state.express_info;t.props.form.validateFieldsAndScroll(function(a,n){if(!a){var l={},s=t.props.dispatch,r=t.state.query;for(var d in l.templateName=n.templateName,l.chargeType=n.chargeType,e){var o=[],c=n["trans_com_add_fee"+e[d].type],u=n["trans_com_fee"+e[d].type],m=n["trans_com_add_weight"+e[d].type],f=n["trans_com_weight"+e[d].type],g={cityCode:"CN",cityName:"".concat((0,b.sldComLanguage)("\u5168\u56fd")),baseNumber:f,basePrice:u,addNumber:m,addPrice:c};for(var _ in void 0!=r.id&&(g.freightExtendId=e[d]["base_info"]["freightExtendId"+e[d].type]),o.push(g),e[d].data_table){var h={},p=e[d].data_table[_],y=p.sele_area_id_array.join(","),v=p.deliver_areas;h={cityCode:y,cityName:v,baseNumber:p.trans_weight,basePrice:p.trans_fee,addNumber:p.trans_add_weight,addPrice:p.trans_add_fee},void 0!=r.id&&(h.freightExtendId=p.freightExtendId),o.push((0,i.default)({},h))}l["freightExtendList"]=JSON.stringify(o)}void 0!=r.id&&r.id>0&&"edit"==r.type?(l.freightTemplateId=r.id,s({type:"express/edit_transport",payload:l,callback:function(e){200==e.state?((0,b.sucTip)(e.msg),t.operate_complete()):(0,b.failTip)(e.msg)}})):s({type:"express/add_transport",payload:l,callback:function(e){200==e.state?((0,b.sucTip)(e.msg),t.operate_complete()):(0,b.failTip)(e.msg)}})}})},t.operate_complete=function(){setTimeout(function(){x.props.history.goBack()},500)},t.save_sele_area=function(e,a){var n=t.state.express_info;for(var l in n)n[l].type==a&&(n[l].data_table=e);t.setState({express_info:n})},x=(0,c.default)(t);e.form.getFieldDecorator;return t.state={show_flag:void 0==e.location.query||void 0==e.location.query.id,express_info:[{type:"transExpress",title:"".concat((0,b.sldComLanguage)("\u5feb\u9012\u8bbe\u7f6e")),is_show:!0,data_table:[],base_info:{}}],transMail_show:!1,transEms_show:!1,transExpress_show:!1,scrollY:0,baseInfoHeight:0,query:e.location.query,selectedRows:[],selectedRowKeys:[],modalVisible:!1,title:"",search_data:[{type:"input",label:"".concat((0,b.sldComLanguage)("\u6a21\u677f\u540d\u79f0")),name:"templateName",placeholder:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0")),initialValue:"",maxLength:10,rules:[{required:!0,whitespace:!0,message:"".concat((0,b.sldComLanguage)("\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"))}]},{type:"radio",label:"".concat((0,b.sldComLanguage)("\u8ba1\u4ef7\u65b9\u5f0f")),name:"chargeType",width:270,placeholder:"".concat((0,b.sldComLanguage)("\u8bf7\u9009\u62e9\u8ba1\u4ef7\u65b9\u5f0f")),sel_data:[{name:"".concat((0,b.sldComLanguage)("\u6309\u4ef6")),key:1},{name:"".concat((0,b.sldComLanguage)("\u6309\u91cd\u91cf")),key:2},{name:"".concat((0,b.sldComLanguage)("\u6309\u4f53\u79ef")),key:3}],initialValue:1}]},t}return(0,u.default)(a,e),(0,r.default)(a,[{key:"componentDidMount",value:function(){this.resize(),window.addEventListener("resize",this.resize);var e=this.state.query;this.props.dispatch({type:"global/getLayoutCollapsed"}),e.id>0&&this.getDetail()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"resize",value:function(){var e=0,a=document.body.clientWidth,t=document.body.clientHeight;a>1600?e=t-73-50-370:a>1200&&(e=t-73-50-400),x.setState({scrollY:e})}},{key:"render",value:function(){var e=this,a=this.state,t=a.search_data,n=a.query,l=a.express_info,i=a.show_flag;return y.default.createElement("div",{className:"".concat(k.default.common_page_20," ").concat(k.default.com_flex_column)},y.default.createElement(v.Scrollbars,{autoHeight:!0,autoHeightMin:100,autoHeightMax:document.body.clientHeight-170},(0,b.sldLlineRtextAddGoodsAddMargin)("#69A2F2","".concat((0,b.sldComLanguage)("\u57fa\u672c\u4fe1\u606f")),0,0,10),y.default.createElement("div",{className:"".concat(k.default.tableListFormAdd),style:{paddingRight:10}},y.default.createElement(h.default,{layout:"inline"},i&&y.default.createElement(L.default,{form:this.props.form,search_data:t}),(0,b.getSldEmptyH)(10),i&&l.map(function(a,t){return a.is_show?y.default.createElement(w.default,{key:t,base_info:a.base_info,data_table:a.data_table,save_sele_area:function(t){return e.save_sele_area(t,a.type)},form:e.props.form,edit_flag:void 0==n.id?0:1,type:a.type}):null}),y.default.createElement("div",{className:k.default.m_diy_bottom_wrap,style:{position:"fixed",left:this.props.global.collapsed?90:160}},y.default.createElement("div",{onClick:function(){return e.props.history.goBack()},className:k.default.add_goods_bottom_btn},(0,b.sldComLanguage)("\u8fd4\u56de")),y.default.createElement("div",{onClick:function(){return e.props.form.submit(e.handleSaveAllData)},className:"".concat(k.default.add_goods_bottom_btn," ").concat(k.default.add_goods_bottom_btn_sel)},(0,b.sldComLanguage)("\u4fdd\u5b58\u5e76\u8fd4\u56de")))))))}}]),a}(y.Component),g=_))||g)||g);a.default=E},SU9B:function(e,a,t){"use strict";var n=t("g09b"),l=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("+L6B");var i=n(t("2/Rp"));t("g9YV");var s=n(t("wCAj"));t("giR+");var r=n(t("fyUT"));t("P2fV");var d=n(t("NJEC")),o=n(t("p0pE")),c=n(t("2Taf")),u=n(t("vZ4D")),m=n(t("l4Ni")),f=n(t("ujKo")),g=n(t("rlhR")),_=n(t("MhPg"));t("y8nQ");var h,p,y,v=n(t("Vl3Y")),b=l(t("q1tI")),C=t("MuoO"),k=n(t("hh8c")),L=t("+n12"),w=n(t("3UVY")),x=n(t("RTFr")),E=n(t("zw2x")),S=v.default.Item,N=(h=(0,C.connect)(function(e){var a=e.business;return{business:a}}),h((y=function(e){function a(e){var t;(0,c.default)(this,a),t=(0,m.default)(this,(0,f.default)(a).call(this,e)),t.com_area_data=E.default,t.combine_area_info=function(e,a){var n=t.com_area_data,l=[];for(var i in n){var s={};for(var r in s.key=i,s.id=i,s.indeterminate=!0,s.checkList=[],s.sldchild=[],s.name=n[i].regionName,s.checkAll=!0,n[i].children){var d=n[i].children[r];0==a.length?s.checkAll=!1:-1==a.indexOf(d.regionCode)?s.checkAll=!1:s.checkList.push(d.regionCode),s.sldchild.push({id:r,key:r,label:d.regionName,value:d.regionCode})}0==s.checkList.length&&(s.indeterminate=!1),l.push(s)}t.setState({cur_key:e,permissionList:l,modalVisible:!0})},t.add_spec_table_item=function(){var e=t.state.data_table,a=e.length+1,n=e.map(function(e){return(0,o.default)({},e)});n.push({key:a,deliver_areas:"",trans_weight:1,trans_fee:1,trans_add_weight:1,trans_add_fee:1,sele_area_id_array:[]}),t.props.save_sele_area(n),t.setState({data_table:n})},t.sldHandleConfirm=function(e){t.setSubmiting(!0);var a=t.state.curData;e.id=a.id,t.operateGoods(e,"set")},t.sldHandleCancle=function(){t.setState({modalVisible:!1})},t.sldHandleCheckAll=function(e,a){var n=t.state.permissionList;if(n[a]["checkAll"]=e.target.checked,e.target.checked){var l=n[a]["sldchild"];if(l.length>0)for(var i=0;i<l.length;i++)n[a]["checkList"].push(l[i]["value"])}else n[a]["checkList"]=[];n[a]["indeterminate"]=!1,t.setState({permissionList:n})},t.sldHandleCheckSingle=function(e,a){var n=t.state.permissionList,l=n[a]["sldchild"];n[a]["checkList"]=e,l.length==e.length?(n[a]["indeterminate"]=!1,n[a]["checkAll"]=!0):(n[a]["indeterminate"]=!1,n[a]["checkAll"]=!1),t.setState({permissionList:n})},t.sldHandleConfirmPer=function(){for(var e=t.state,a=e.permissionList,n=e.cur_key,l=e.data_table,i=[],s=0;s<a.length;s++)i=i.concat(a[s]["checkList"]);var r=[];for(var d in a)if(a[d].checkList.length>0)for(var o in a[d].sldchild){var c=a[d].sldchild[o];-1!=i.indexOf(c.value)&&r.push(c.label)}for(var u in l)l[u].key==n&&(l[u].sele_area_id_array=i,l[u].deliver_areas=r.join(","));t.setState({data_table:l}),t.props.save_sele_area(l),t.setState({modalVisible:!1})},(0,g.default)(t);var n=e.form.getFieldDecorator,l=e.type;return t.state={flag:!0,edit_flag:e.edit_flag,addData:[{type:"city_area_deliver",name:"deliver_area",label:"".concat((0,L.sldComLanguage)("\u9009\u62e9\u5730\u533a")),placeholder:"".concat((0,L.sldComLanguage)("\u8bf7\u9009\u62e9modalVisible")),content:"",data:[]}],modalVisible:!1,area_data:E.default,permissionList:[],data_table:[],base_info:[{type:"inputnum",label:"".concat((0,L.sldComLanguage)("\u9996\u91cd/\u4ef6")),name:"trans_com_weight"+l,placeholder:"".concat((0,L.sldComLanguage)("\u9996\u91cd/\u4ef6(kg/\u4ef6)")),initialValue:"",precision:1,step:1,min:0,max:9999,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]},{type:"inputnum",label:"".concat((0,L.sldComLanguage)("\u9996\u8d39(\u5143)")),name:"trans_com_fee"+l,placeholder:"".concat((0,L.sldComLanguage)("\u9996\u8d39(\u5143)")),initialValue:"",precision:2,step:2,min:0,max:9999,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]},{type:"inputnum",label:"".concat((0,L.sldComLanguage)("\u7eed\u91cd/\u4ef6")),name:"trans_com_add_weight"+l,placeholder:"".concat((0,L.sldComLanguage)("\u7eed\u91cd/\u4ef6(kg/\u4ef6)")),initialValue:"",precision:1,step:1,min:0,max:9999,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]},{type:"inputnum",label:"".concat((0,L.sldComLanguage)("\u7eed\u8d39(\u5143)")),name:"trans_com_add_fee"+l,placeholder:"".concat((0,L.sldComLanguage)("\u7eed\u8d39(\u5143)")),precision:2,step:1,min:0,max:9999,initialValue:"",rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]}],column:[{title:" ",dataIndex:"key",align:"center",width:30,render:function(e,a,t){return t+1}},{title:"".concat((0,L.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:70,render:function(e,a){return b.default.createElement(d.default,{placement:"rightBottom",title:"".concat((0,L.sldComLanguage)("\u786e\u5b9a\u5220\u9664\u8be5\u884c\u5417\uff1f")),onConfirm:function(){return t.remove(a.key)},okText:"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),cancelText:"".concat((0,L.sldComLanguage)("\u53d6\u6d88"))},b.default.createElement("a",{style:{marginTop:5,display:"inline-block"}},(0,L.sldTsvg)("shanchu","#FF711E",20,20)))}},{title:"".concat((0,L.sldComLanguage)("\u914d\u9001\u5730\u533a")),align:"center",width:300,dataIndex:"deliver_areas",render:function(e,a){return b.default.createElement("a",{style:{color:"#FF711E"},onClick:function(){t.combine_area_info(a.key,a.sele_area_id_array)}},""==e?"".concat((0,L.sldComLanguage)("\u70b9\u51fb\u9009\u62e9\u914d\u9001\u5730\u533a")):e)}},{title:"".concat((0,L.sldComLanguage)("\u9996\u91cd/\u4ef6(kg/\u5143)")),align:"center",width:150,dataIndex:"trans_weight",render:function(e,a){return b.default.createElement(S,{style:{width:135}},n("trans_weight".concat(a.key).concat(l),{initialValue:e,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(b.default.createElement(r.default,{min:0,max:999999999,precision:2,style:{width:135},onChange:function(e){return t.handleFieldChange(e,"trans_weight",a.key)},placeholder:(0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b")})))}},{title:"".concat((0,L.sldComLanguage)("\u9996\u8d39(\u5143)")),align:"center",width:150,dataIndex:"trans_fee",render:function(e,a){return b.default.createElement(S,{style:{width:135}},n("trans_fee".concat(a.key).concat(l),{initialValue:e,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(b.default.createElement(r.default,{min:0,max:999999999,precision:2,style:{width:135},onChange:function(e){return t.handleFieldChange(e,"trans_fee",a.key)},placeholder:(0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b")})))}},{title:"".concat((0,L.sldComLanguage)("\u7eed\u91cd/\u4ef6(kg/\u5143)")),align:"center",width:150,dataIndex:"trans_add_weight",render:function(e,a){return b.default.createElement(S,{style:{width:135}},n("trans_add_weight".concat(a.key).concat(l),{initialValue:e,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(b.default.createElement(r.default,{min:0,max:999999999,precision:2,style:{width:135},onChange:function(e){return t.handleFieldChange(e,"trans_add_weight",a.key)},placeholder:(0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b")})))}},{title:"".concat((0,L.sldComLanguage)("\u7eed\u8d39(\u5143)")),dataIndex:"trans_add_fee",render:function(e,a){return b.default.createElement(S,{style:{width:135}},n("trans_add_fee".concat(a.key).concat(l),{initialValue:e,rules:[{required:!0,message:"".concat((0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b"))}]})(b.default.createElement(r.default,{min:0,max:999999999,precision:2,style:{width:135},onChange:function(e){return t.handleFieldChange(e,"trans_add_fee",a.key)},placeholder:(0,L.sldComLanguage)("\u8be5\u9879\u5fc5\u586b")})))}}]},t}return(0,_.default)(a,e),(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.edit_flag,t=e.base_info,n=e.flag;if(1==a&&n){for(var l in t)t[l].initialValue=this.props.base_info[t[l].name],this.setState({base_info:t,flag:!1});this.setState({base_info:t,data_table:this.props.data_table})}}},{key:"componentWillReceiveProps",value:function(e,a){this.setState({data_table:e.data_table})}},{key:"getRowByKey",value:function(e,a){return a.filter(function(a){return a.key===e})[0]}},{key:"remove",value:function(e){var a=this.state.data_table;a=a.filter(function(a){return a.key!=e}),this.props.save_sele_area(a),this.setState({data_table:a})}},{key:"handleFieldChange",value:function(e,a,t){var n=this.state.data_table,l=n.map(function(e){return(0,o.default)({},e)}),i=this.getRowByKey(t,l);i&&(i[a]=e,this.props.save_sele_area(l),this.setState({data_table:l}))}},{key:"render",value:function(){var e=this.state,a=e.column,t=e.data_table,n=e.base_info,l=e.modalVisible,r=e.permissionList;this.props.title;return b.default.createElement(b.Fragment,null,b.default.createElement(w.default,{form:this.props.form,search_data:n}),(0,L.getSldEmptyH)(10),b.default.createElement("div",{className:k.default.goods_sku_tab,style:{width:"100%"}},b.default.createElement(s.default,{columns:a,size:"small",bordered:!0,rowKey:"key",dataSource:t,pagination:!1})),b.default.createElement(i.default,{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:this.add_spec_table_item,icon:"plus"},"\u6dfb\u52a0\u6570\u636e"),b.default.createElement(x.default,{title:"".concat((0,L.sldComLanguage)("\u9009\u62e9\u5730\u5740")),width:900,modalVisible:l,sldHandleConfirm:this.sldHandleConfirmPer,sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:L.formItemLayoutModal,content:r,conType:"moreCheck",permissionSingle:this.sldHandleCheckSingle,permissionAll:this.sldHandleCheckAll}))}}]),a}(b.Component),p=y))||p);a.default=N}}]);