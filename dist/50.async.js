(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{"Q3+M":function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5Dmo");var o=l(a("3S7+")),i=l(a("d6i3")),s=l(a("1l/V")),d=l(a("2Taf")),c=l(a("vZ4D")),r=l(a("l4Ni")),m=l(a("ujKo")),u=l(a("rlhR")),g=l(a("MhPg"));a("y8nQ");var f=l(a("Vl3Y"));a("2qtc");var p,_,b,h,C=l(a("kLXV")),v=a("MuoO"),w=n(a("q1tI")),L=a("+n12"),x=l(a("hh8c")),y=l(a("QDxA")),E=l(a("nVqQ")),N=a("k82f"),k=l(a("CkN6")),I=l(a("fjb3")),T=l(a("mOP9")),A=l(a("usdK")),S=C.default.confirm,V=L.list_com_page_size_10,q=(p=(0,v.connect)(function(e){var t=e.bill,a=e.common;return{bill:t,common:a}}),_=f.default.create(),p(b=_((h=function(e){function t(e){var a;return(0,d.default)(this,t),a=(0,r.default)(this,(0,m.default)(t).call(this,e)),a.get_system_info=function(){var e=a.props.dispatch,t=a.state,l=t.spreaderFlag,n=t.columns_order;e({type:"common/getSetting",payload:{str:"spreader_is_enable"},callback:function(e){if(200==e.state&&(l=1==e.data[0].value,l))for(var t=0;t<n.length;t++)if("compensationAmount"==n[t].dataIndex){n.splice(t+1,0,{title:"".concat((0,L.sldComLanguage)("\u63a8\u624b\u4f63\u91d1(\u5143)")),dataIndex:"attachCommission",align:"center",width:100});break}a.setState({spreaderFlag:l,columns_order:n})}})},a.get_bill_detail=function(e){var t=a.props.dispatch,l=a.state,n=l.bill_base_data,o=l.bill_detail_data,d=l.bill_progress_data,c=l.bill_settle_img;t({type:"bill/get_bill_detail",payload:{billId:e},callback:function(){var e=(0,s.default)(i.default.mark(function e(t){var l,s;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(200==t.state){for(l in o=t.data,n)"startTime"==n[l].name?n[l].text=o.startTime+" ~ "+o.endTime:n[l].text=o[n[l].name];for(s in c.map(function(e){"paymentEvidence"==e.name?e.data=o[e.name]?[{imageUrl:o[e.name]}]:[]:e.text=o[e.name]?o[e.name]:"--"}),d)s<o.logList.length&&(d[s].time=o.logList[s].createTime),o.state<d[s].state_code?d[s].cur_state="no":o.state==d[s].state_code?d[s].cur_state="cur":d[s].cur_state="pass";a.setState({loading:!1,bill_base_data:n,bill_detail_data:o,bill_progress_data:d,bill_settle_img:c})}case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()})},a.viewImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.setState({preview_img:t,show_preview_modal:e})},a.checkConfirm=function(){var e=a.props.dispatch,t=a.state.query;e({type:"bill/confirm_bill",payload:{billId:t.id},callback:function(){var e=(0,s.default)(i.default.mark(function e(l){return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:200==l.state?((0,L.sucTip)(l.msg),a.get_bill_detail(t.id)):255==l.state?(0,L.failTip)(l.msg):267==l.state&&S({style:{padding:24,background:"#fff",borderRadius:5},title:"".concat((0,L.sldComLanguage)("\u6e29\u99a8\u63d0\u793a")),content:l.msg,okText:"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),okType:"primary",cancelText:"".concat((0,L.sldComLanguage)("\u53d6\u6d88")),onOk:function(){A.default.push("/bill/account")},onCancel:function(){}});case 1:case"end":return e.stop()}},e)}));function l(t){return e.apply(this,arguments)}return l}()})},(0,u.default)(a),a.state={preview_img:"",show_preview_modal:!1,spreaderFlag:!1,modal_width:500,show_foot:!0,title:"",submiting:!1,modalVisible:!1,query:e.location.query,params:{pageSize:V},bill_base_data:[{type:"show_text",label:"".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u5355\u53f7")),name:"billSn",extra:"",item_height:42,text:""},{type:"show_text",label:"".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u8d77\u6b62\u65f6\u95f4")),name:"startTime",extra:"",item_height:42,text:""},{type:"show_text",label:"".concat((0,L.sldComLanguage)("\u5e97\u94fa\u540d\u79f0")),name:"storeName",extra:"",item_height:42,text:""},{type:"show_text",label:"".concat((0,L.sldComLanguage)("\u5e97\u94fa\u8054\u7cfb\u4eba")),name:"contactName",extra:"",item_height:42,text:""},{type:"show_text",label:"".concat((0,L.sldComLanguage)("\u5e97\u94fa\u8054\u7cfb\u7535\u8bdd")),name:"contactPhone",extra:"",item_height:42,text:""}],bill_detail_data:{},operateData:[],bill_progress_data:[{code:"createBill",state:"".concat((0,L.sldComLanguage)("\u751f\u6210\u7ed3\u7b97\u5355")),time:"",state_code:1,cur_state:"cur"},{code:"storeConfirm",state:"".concat((0,L.sldComLanguage)("\u5e97\u94fa\u786e\u8ba4")),time:"",state_code:2,cur_state:"no"},{code:"systemCheck",state:"".concat((0,L.sldComLanguage)("\u5e73\u53f0\u5ba1\u6838")),time:"",state_code:3,cur_state:"no"},{code:"finish",state:"".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u5b8c\u6210")),time:"",state_code:4,cur_state:"no"}],bill_settle_img:[{type:"show_text",label:"".concat((0,L.sldComLanguage)("\u6253\u6b3e\u5907\u6ce8")),name:"paymentRemark",extra:"",item_height:42,text:""},{type:"show_goods_img_more",label:"".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u51ed\u8bc1")),name:"paymentEvidence",initialValue:"",data:[],item_height:142,preView:a.viewImg}],columns_order:[{title:" ",align:"center",dataIndex:"bindId",width:30,render:function(e,t,l){return(0,L.getTableNum)(a.state.params,V,l)}},{title:"".concat((0,L.sldComLanguage)("\u8ba2\u5355\u53f7")),dataIndex:"orderSn",align:"center",width:120},{title:"".concat((0,L.sldComLanguage)("\u8ba2\u5355\u91d1\u989d(\u5143)")),dataIndex:"orderAmount",align:"center",width:100},{title:w.default.createElement("div",{style:{position:"relative"}},(0,L.sldComLanguage)("\u4f63\u91d1(\u5143)"),w.default.createElement(o.default,{placement:"bottomLeft",title:"".concat((0,L.sldComLanguage)("\u5e73\u53f0\u62bd\u53d6\u7684\u5206\u7c7b\u4f63\u91d1"))},w.default.createElement("div",{style:{right:-15,top:2,position:"absolute"}},(0,L.sldSvgIcon)("#bfbbba",14,14,"wen")))),dataIndex:"commission",align:"center",width:100},{title:w.default.createElement("div",{style:{position:"relative"}},(0,L.sldComLanguage)("\u9000\u8fd8\u4f63\u91d1(\u5143)"),w.default.createElement(o.default,{placement:"bottomLeft",title:"".concat((0,L.sldComLanguage)("\u8ba2\u5355\u53d1\u751f\u9000\u6b3e\u9000\u8d27\u65f6\uff0c\u5e73\u53f0\u5c06\u4e0d\u62bd\u53d6\u8fd9\u90e8\u5206\u4f63\u91d1"))},w.default.createElement("div",{style:{right:-15,top:2,position:"absolute"}},(0,L.sldSvgIcon)("#bfbbba",14,14,"wen")))),dataIndex:"refundCommission",align:"center",width:100},{title:"".concat((0,L.sldComLanguage)("\u9000\u5355\u91d1\u989d(\u5143)")),dataIndex:"refundAmount",align:"center",width:100},{title:"".concat((0,L.sldComLanguage)("\u5e73\u53f0\u4f18\u60e0\u5238")),dataIndex:"platformVoucherAmount",align:"center",width:100},{title:"".concat((0,L.sldComLanguage)("\u79ef\u5206\u62b5\u6263\u91d1\u989d")),dataIndex:"integralCashAmount",align:"center",width:100},{title:w.default.createElement("div",{style:{position:"relative"}},(0,L.sldComLanguage)("\u5b9a\u91d1\u8d54\u507f\u91d1\u989d(\u5143)"),w.default.createElement(o.default,{placement:"bottomLeft",title:"".concat((0,L.sldComLanguage)("\u5bf9\u4e8e\u5b9a\u91d1\u9884\u552e\u6d3b\u52a8\uff0c\u56e0\u5546\u5bb6\u95ee\u9898\u5bfc\u81f4\u65e0\u6cd5\u53d1\u8d27\uff0c\u5bf9\u4f1a\u5458\u8d54\u507f\u7684\u91d1\u989d"))},w.default.createElement("div",{style:{right:-15,top:2,position:"absolute"}},(0,L.sldSvgIcon)("#bfbbba",14,14,"wen")))),dataIndex:"compensationAmount",align:"center",width:150},{title:"".concat((0,L.sldComLanguage)("\u4e0b\u5355\u65e5\u671f")),dataIndex:"createTime",align:"center",width:120},{title:"".concat((0,L.sldComLanguage)("\u5b8c\u6210\u65e5\u671f")),dataIndex:"finishTime",align:"center",width:120},{title:"".concat((0,L.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(e,t){return w.default.createElement(T.default,{to:{pathname:"/order/order_lists_to_detail",query:{orderSn:t.orderSn}}},(0,L.sldtbaleOpeBtnText)("".concat((0,L.sldComLanguage)("\u67e5\u770b")),function(){return null}))}}]},a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.query;this.get_bill_detail(e.id),this.get_system_info()}},{key:"render",value:function(){var e=this,t=this.state,l=t.bill_base_data,n=t.bill_detail_data,o=t.bill_progress_data,i=t.bill_settle_img,s=t.preview_img,d=t.show_preview_modal,c=t.spreaderFlag,r=t.columns_order;return w.default.createElement("div",{className:x.default.common_page,style:{flex:1}},w.default.createElement("div",{className:x.default.flex_com_space_between,style:{margin:10,marginTop:0}},(0,L.sldLlineRtextAddGoods)("#69A2F2","".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u8be6\u60c5"))),(0,L.sldIconBtnBg)(function(){e.props.history.goBack()},"fanhui","".concat((0,L.sldComLanguage)("\u8fd4\u56de\u4e0a\u7ea7\u9875\u9762")),"#fff",7,0,15,15,5)),(0,L.getSldHorLine)(1),w.default.createElement(N.Scrollbars,{autoHeight:!0,autoHeightMin:100,autoHeightMax:document.body.clientHeight-100},w.default.createElement("div",{className:"".concat(x.default.flex_row_center_start," ").concat(y.default.progress)},o.map(function(e,t){return w.default.createElement("div",{key:t,className:"".concat(x.default.flex_column_start_center," ").concat(y.default.item)},w.default.createElement("div",{className:"".concat(y.default.top," ").concat(x.default.flex_row_center_center)},w.default.createElement("span",{className:"".concat(y.default.left_line)}),w.default.createElement("img",{src:a("p2/J")("./".concat(t+1,"_").concat(e.cur_state,".png"))}),w.default.createElement("span",{className:"".concat(y.default.right_line)})),w.default.createElement("span",{className:"".concat(y.default.state)},e.state),w.default.createElement("span",{className:"".concat(y.default.time)},e.time))})),1==n.state&&w.default.createElement("div",{className:"".concat(y.default.state_part," ").concat(x.default.flex_column_start_center)},w.default.createElement("span",{className:y.default.title},(0,L.sldComLanguage)("\u7b49\u5f85\u5e97\u94fa\u786e\u8ba4")),(0,L.sldPopConfirmDiy)("leftBottom","".concat((0,L.sldComLanguage)("\u6211\u5df2\u786e\u8ba4\u6838\u5bf9\u8be5\u8d26\u5355\uff0c\u786e\u8ba4\u65e0\u8bef")),function(){return e.checkConfirm()},"".concat((0,L.sldComLanguage)("\u786e\u5b9a")),"".concat((0,L.sldComLanguage)("\u53d6\u6d88")),w.default.createElement("div",{className:y.default.invoice_btn},(0,L.sldComLanguage)("\u786e\u8ba4\u7ed3\u7b97\u5355")))),2==n.state&&w.default.createElement("div",{className:"".concat(y.default.state_part," ").concat(x.default.flex_column_start_center)},w.default.createElement("span",{className:y.default.title},(0,L.sldComLanguage)("\u7b49\u5f85\u5e73\u53f0\u5ba1\u6838"))),3==n.state&&w.default.createElement("div",{className:"".concat(y.default.state_part," ").concat(x.default.flex_column_start_center)},w.default.createElement("span",{className:y.default.title},(0,L.sldComLanguage)("\u7b49\u5f85\u5e73\u53f0\u7ed3\u7b97"))),4==n.state&&w.default.createElement("div",{className:"".concat(y.default.state_part," ").concat(x.default.flex_column_start_center)},w.default.createElement("span",{className:y.default.title},(0,L.sldComLanguage)("\u7ed3\u7b97\u5b8c\u6210"))),(0,L.sldCommonTitle)("".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u4fe1\u606f")),"#333",5,15,15),w.default.createElement("div",{className:"".concat(y.default.detail_total_part," ").concat(x.default.flex_row_start_center)},w.default.createElement("img",{src:a("EE2V")}),w.default.createElement("span",{className:y.default.amount_total},"\xa0",(0,L.sldComLanguage)("\u7ed3\u7b97\u91d1\u989d\uffe5"),n.settleAmount," = \xa0"),w.default.createElement("span",{className:y.default.amount_detail}," ",(0,L.sldComLanguage)("\u8ba2\u5355\u91d1\u989d\uffe5"),n.orderAmount," - ",(0,L.sldComLanguage)("\u5e73\u53f0\u4f63\u91d1\uffe5"),n.commission," + ",(0,L.sldComLanguage)("\u9000\u8fd8\u4f63\u91d1\uffe5"),n.refundCommission," - ",(0,L.sldComLanguage)("\u9000\u5355\u91d1\u989d\uffe5"),n.refundAmount," + ",(0,L.sldComLanguage)("\u5e73\u53f0\u4f18\u60e0\u5238\uffe5"),n.platformVoucherAmount," + ",(0,L.sldComLanguage)("\u79ef\u5206\u62b5\u6263\u91d1\u989d\uffe5"),n.integralCashAmount," - ",(0,L.sldComLanguage)("\u5b9a\u91d1\u8d54\u507f\u91d1\u989d\uffe5"),n.compensationAmount,c&&w.default.createElement(w.Fragment,null,"- ",(0,L.sldComLanguage)("\u63a8\u624b\u4f63\u91d1\uffe5"),n.attachCommission))),(0,L.sldCommonTitle)("".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u4fe1\u606f")),"#333",5,15,15),w.default.createElement(E.default,{r_color:"#333",l_color:"#999",l_fontw:500,r_fontw:600,form:this.props.form,data:l}),4==n.state&&(n.paymentEvidence||n.paymentRemark)&&w.default.createElement(w.Fragment,null,(0,L.sldCommonTitle)("".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u51ed\u8bc1")),"#333",5,15,15),w.default.createElement(E.default,{part_width:100,lwidth:10,rwidth:90,form:this.props.form,data:i})),(0,L.sldCommonTitle)("".concat((0,L.sldComLanguage)("\u7ed3\u7b97\u8ba2\u5355\u4fe1\u606f")),"#333",5,15,15),w.default.createElement(k.default,{selectedRows:[],data:{list:n.orderList,pagination:{}},size:"small",rowKey:"orderSn",isCheck:!1,columns:r,sldpagination:!1}),(0,L.getSldEmptyH)(40)),w.default.createElement(I.default,{img:s,show_preview_modal:d,modal_width:500,preview_alt_con:"".concat((0,L.sldComLanguage)("\u5546\u54c1\u56fe\u7247")),closePreviewModal:function(){return e.viewImg(!1)}}))}}]),t}(w.Component),b=h))||b)||b);t.default=q},QDxA:function(e,t,a){e.exports={detail_total_part:"antd-pro\\pages\\bill\\bill-detail_total_part",amount_detail:"antd-pro\\pages\\bill\\bill-amount_detail",amount_total:"antd-pro\\pages\\bill\\bill-amount_total",invoice_btn:"antd-pro\\pages\\bill\\bill-invoice_btn",progress:"antd-pro\\pages\\bill\\bill-progress",item:"antd-pro\\pages\\bill\\bill-item",top:"antd-pro\\pages\\bill\\bill-top",left_line:"antd-pro\\pages\\bill\\bill-left_line",right_line:"antd-pro\\pages\\bill\\bill-right_line",state:"antd-pro\\pages\\bill\\bill-state",time:"antd-pro\\pages\\bill\\bill-time",cur:"antd-pro\\pages\\bill\\bill-cur",no:"antd-pro\\pages\\bill\\bill-no",pass:"antd-pro\\pages\\bill\\bill-pass",state_part:"antd-pro\\pages\\bill\\bill-state_part",title:"antd-pro\\pages\\bill\\bill-title",tip:"antd-pro\\pages\\bill\\bill-tip",agree_btn:"antd-pro\\pages\\bill\\bill-agree_btn"}}}]);