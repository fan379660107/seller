(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[100],{heq2:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var o=n(a("W9HT")),d=n(a("eHn4")),i=n(a("p0pE")),c=n(a("2Taf")),s=n(a("vZ4D")),r=n(a("l4Ni")),u=n(a("ujKo")),m=n(a("MhPg"));a("y8nQ");var g,f,p,_,h=n(a("Vl3Y")),w=a("MuoO"),L=l(a("q1tI")),y=a("+n12"),C=n(a("hh8c")),v=n(a("CkN6")),S=n(a("Lv3o")),b=n(a("RTFr")),I=y.list_com_page_size_10,k=(g=(0,w.connect)(function(e){var t=e.promotion;return{promotion:t}}),f=h.default.create(),g(p=f((_=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,r.default)(this,(0,u.default)(t).call(this,e)),a.goods_spec_columns=[{title:" ",dataIndex:"productId",align:"center",width:30,render:function(e,t,a){return a+1}},{title:"".concat((0,y.sldComLanguage)("\u5546\u54c1\u89c4\u683c")),dataIndex:"specValues",align:"center",width:200,render:function(e,t,a){return L.default.createElement("div",{style:{width:200,wordBreak:"normal",wordWrap:"break-word"}},e||"".concat((0,y.sldComLanguage)("\u9ed8\u8ba4")))}},{title:"".concat((0,y.sldComLanguage)("\u539f\u4ef7(\u5143)")),dataIndex:"productPrice",align:"center",width:110},{title:"".concat((0,y.sldComLanguage)("\u5546\u54c1\u5e93\u5b58")),dataIndex:"productStock",align:"center",width:100},{title:"".concat((0,y.sldComLanguage)("\u79d2\u6740\u4ef7(\u5143)")),dataIndex:"seckillPrice",align:"center",width:110},{title:"".concat((0,y.sldComLanguage)("\u79d2\u6740\u5e93\u5b58")),dataIndex:"seckillStock",align:"center",width:100},{title:"".concat((0,y.sldComLanguage)("\u9650\u8d2d\u6570\u91cf")),dataIndex:"upperLimit",align:"center",width:100}],a.get_list=function(e){a.setState({initLoading:!0});var t=a.props.dispatch,n=a.state.query;t({type:"promotion/get_joined_seckill_goods",payload:(0,i.default)({},e,{seckillId:n.id}),callback:function(t){a.setState({initLoading:!1}),200==t.state&&(0==t.data.list.length&&a.state.params.current>1?(e.current=e.current-1,a.get_list(e)):(t.data.list.map(function(e,t){e.key=t}),a.setState({data:t.data})))}})},a.viewSpec=function(e){var t=a.state,n=t.view_spec_data,l=t.operateData,o=t.query;l=JSON.parse(JSON.stringify(n)),l[0].columns=a.goods_spec_columns,a.props.dispatch({type:"promotion/get_seckill_goods_sku",payload:{seckillId:o.id,goodsId:e.goodsId,stageId:e.stageId},callback:function(e){a.setState({initLoading:!1}),200==e.state&&(l[0].data=e.data,a.setState({modalVisible:!0,show_foot:!1,title:"".concat((0,y.sldComLanguage)("\u67e5\u770b\u89c4\u683c")),modal_width:900,operateData:l}))}})},a.handleSelectRows=function(e,t){a.setState({selectedRows:e,selectedRowKeys:t})},a.handleTablePagination=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",o=a.state.formValues;if("main"==l){var d=(0,y.sldHandlePaginationData)(e,t,n,o);I=d.pageSize,a.setState({params:d}),a.get_list(d)}},a.resizeTable=function(e,t,n,l){var o=(0,y.dragSldTableColumn)(e,t,l);a.setState((0,d.default)({},n,o))},a.operate=function(e,t){var n=a.state,l=n.params,o=n.query,d=a.props.dispatch,i={},c="";"del"==t&&(c="promotion/del_seckill_goods",i.goodsId=e,i.seckillId=o.id),a.setState({submiting:!0}),d({type:c,payload:i,callback:function(e){200==e.state?((0,y.sucTip)(e.msg),a.get_list(l),a.setState({modalVisible:!1})):(0,y.failTip)(e.msg),a.setState({submiting:!1})}})},a.search=function(e){var t=(0,i.default)({},e);for(var n in t.search_activity_time&&(t.startTime=t.search_activity_time[0]?t.search_activity_time[0].format(y.dateFormat)+" 00:00:00":"",t.endTime=t.search_activity_time[1]?t.search_activity_time[1].format(y.dateFormat)+" 23:59:59":"",delete t.search_activity_time),t)""==t[n]&&delete t[n];a.setState({formValues:t,params:{pageSize:I}}),a.get_list((0,i.default)({pageSize:I},t))},a.seaReset=function(){a.setState({formValues:{},params:{pageSize:I}}),a.get_list({pageSize:I})},a.sldHandleCancle=function(){a.setState({modalVisible:!1})},a.state={operateData:[],view_spec_data:[{type:"scroll_table",name:"",label:"",width:880,content:"",data:[],columns:a.goods_spec_columns,rowKey:"productId"}],initLoading:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"",query:e.location.query,type:"add",params:{pageSize:I},search_data:[{type:"input",label:"".concat((0,y.sldComLanguage)("\u5546\u54c1\u540d\u79f0")),name:"goodsName",placeholder:"".concat((0,y.sldComLanguage)("\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"))},{type:"rangepicker",label:"".concat((0,y.sldComLanguage)("\u573a\u6b21\u65f6\u95f4")),name:"search_activity_time",placeholder1:"".concat((0,y.sldComLanguage)("\u5f00\u59cb\u65f6\u95f4")),placeholder2:"".concat((0,y.sldComLanguage)("\u7ed3\u675f\u65f6\u95f4"))},{type:"select",label:"".concat((0,y.sldComLanguage)("\u5ba1\u6838\u72b6\u6001")),name:"state",placeholder:"".concat((0,y.sldComLanguage)("\u8bf7\u9009\u62e9\u5ba1\u6838\u72b6\u6001")),sel_data:[{key:"",name:"".concat((0,y.sldComLanguage)("\u5168\u90e8"))},{key:"1",name:"".concat((0,y.sldComLanguage)("\u5f85\u5ba1\u6838"))},{key:"2",name:"".concat((0,y.sldComLanguage)("\u5ba1\u6838\u901a\u8fc7"))},{key:"3",name:"".concat((0,y.sldComLanguage)("\u5ba1\u6838\u62d2\u7edd"))}]}],formValues:{},columns:[{title:" ",dataIndex:"goodsId",align:"center",width:30,render:function(e,t,n){return(0,y.getTableNum)(a.state.params,I,n)}},{title:"".concat((0,y.sldComLanguage)("\u5546\u54c1\u4fe1\u606f")),dataIndex:"mainImage",align:"center",width:250,render:function(e,t){return L.default.createElement("div",{className:"".concat(C.default.goods_info," ").concat(C.default.com_flex_row_flex_start)},L.default.createElement("div",{className:C.default.goods_img},(0,y.getSldListGoodsImg80)(e)),L.default.createElement("div",{className:"".concat(C.default.com_flex_column_space_between," ").concat(C.default.goods_detail)},L.default.createElement("span",{className:C.default.goods_name},t.goodsName)))}},{title:"".concat((0,y.sldComLanguage)("\u53c2\u52a0\u573a\u6b21")),dataIndex:"stageName",align:"center",width:100},{title:"".concat((0,y.sldComLanguage)("\u573a\u6b21\u65f6\u95f4")),dataIndex:"startTime",align:"center",width:150,render:function(e,t){return L.default.createElement("div",{className:C.default.voucher_time_wrap},L.default.createElement("p",null,e),L.default.createElement("p",null,"~"),L.default.createElement("p",null,t.endTime))}},{title:"".concat((0,y.sldComLanguage)("\u6d3b\u52a8\u6807\u7b7e")),dataIndex:"labelName",align:"center",width:100},{title:"".concat((0,y.sldComLanguage)("\u5ba1\u6838\u72b6\u6001")),dataIndex:"stateValue",align:"center",width:100},{title:"".concat((0,y.sldComLanguage)("\u62d2\u7edd\u539f\u56e0")),dataIndex:"remark",align:"center",width:100,render:function(e,t){return e||"--"}},{title:"".concat((0,y.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(e,t){return L.default.createElement(L.Fragment,null,(0,y.sldtbaleOpeBtnText)("".concat((0,y.sldComLanguage)("\u67e5\u770bSKU")),function(){return a.viewSpec(t)}),2!=t.state&&L.default.createElement(L.Fragment,null,L.default.createElement("span",{className:C.default.splitLine}),L.default.createElement("span",{className:C.default.splitLine}),(0,y.sldPopConfirmDiy)("leftBottom","".concat((0,y.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664")),function(){return a.operate(t.goodsId,"del")},"".concat((0,y.sldComLanguage)("\u786e\u5b9a")),"".concat((0,y.sldComLanguage)("\u53d6\u6d88")),(0,y.sldtbaleOpeBtnText)("".concat((0,y.sldComLanguage)("\u5220\u9664")),function(){return null}))))}}]},a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.query;void 0!=e.id&&e.id>0&&this.get_list({pageSize:I})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRows,n=t.search_data,l=t.columns,d=t.initLoading,i=t.data,c=t.modal_width,s=t.title,r=t.submiting,u=t.modalVisible,m=t.operateData;return L.default.createElement("div",{className:C.default.common_page},L.default.createElement("div",{className:C.default.flex_com_space_between},(0,y.sldLlineRtextAddGoodsAddMargin)("#69A2F2","".concat((0,y.sldComLanguage)("\u79d2\u6740\u6d3b\u52a8\u5546\u54c1")),0,0,10),(0,y.sldIconBtnBg)(function(){return e.props.history.goBack()},"fanhui","".concat((0,y.sldComLanguage)("\u8fd4\u56de\u4e0a\u7ea7\u9875\u9762")),"#fff",7,0,15,15,5)),L.default.createElement("div",{className:C.default.tableListForm},L.default.createElement(S.default,{search_data:n,seaSubmit:function(t){return e.search(t)},seaReset:function(){return e.seaReset()}})),L.default.createElement(o.default,{spinning:d},L.default.createElement(v.default,{totalHeight:document.body.clientHeight-160,bordered:!1,selectedRows:a,data:i,rowKey:"key",isCheck:!1,columns:l,onSelectRow:this.handleSelectRows,onChange:function(t,a,n){return e.handleTablePagination(t,a,n,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(t,a){return e.resizeTable(t,a,"columns",l)},isColumnResize:!0})),L.default.createElement(b.default,{width:c,title:s,submiting:r,modalVisible:u,sldHandleConfirm:null,sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:y.formItemLayoutModal,content:m,show_foot:!1}))}}]),t}(L.Component),p=_))||p)||p);t.default=k}}]);