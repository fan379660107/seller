(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{inHw:function(e,a,t){"use strict";var n=t("g09b"),l=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("T2oS");var i=n(t("W9HT"));t("BoS7");var o=n(t("Sdc0")),c=n(t("eHn4")),d=n(t("p0pE")),u=n(t("2Taf")),s=n(t("vZ4D")),r=n(t("l4Ni")),g=n(t("ujKo")),m=n(t("rlhR")),p=n(t("MhPg"));t("y8nQ");var f,h,C,y,b=n(t("Vl3Y")),L=t("MuoO"),_=l(t("q1tI")),v=t("+n12"),S=n(t("hh8c")),A=n(t("CkN6")),T=n(t("RTFr")),w=n(t("zw2x")),N=v.list_com_page_size_10,V="",k=(f=(0,L.connect)(function(e){var a=e.bill,t=e.common;return{bill:a,common:t}}),h=b.default.create(),f(C=h((y=function(e){function a(e){var t;return(0,u.default)(this,a),t=(0,r.default)(this,(0,g.default)(a).call(this,e)),t.bankAccount=[{type:"input",label:"".concat((0,v.sldComLanguage)("\u94f6\u884c\u5f00\u6237\u540d")),name:"bankAccountName",placeholder:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u94f6\u884c\u5f00\u6237\u540d")),extra:"".concat((0,v.sldComLanguage)("\u6700\u591a\u8f93\u516550\u4e2a\u5b57")),initialValue:"",maxLength:50,rules:[{required:!0,whitespace:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u94f6\u884c\u5f00\u6237\u540d"))}]},{type:"input",label:"".concat((0,v.sldComLanguage)("\u516c\u53f8\u94f6\u884c\u8d26\u53f7")),name:"bankAccountNumber",placeholder:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u516c\u53f8\u94f6\u884c\u8d26\u53f7")),extra:"".concat((0,v.sldComLanguage)("\u6700\u591a\u8f93\u516530\u4f4d\u6570\u5b57")),initialValue:"",maxLength:30,rules:[{required:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u516c\u53f8\u94f6\u884c\u8d26\u53f7"))},{validator:function(e,a,t){return(0,v.validatorNumber)(e,a,t)}}]},{type:"input",label:"".concat((0,v.sldComLanguage)("\u5f00\u6237\u94f6\u884c")),name:"bankBranch",placeholder:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u5f00\u6237\u94f6\u884c\u540d\u79f0")),extra:"".concat((0,v.sldComLanguage)("\u6700\u591a\u8f93\u516530\u5b57")),initialValue:"",maxLength:30,rules:[{required:!0,whitespace:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u5f00\u6237\u94f6\u884c\u540d\u79f0"))}]},{type:"cascader_common",label:"".concat((0,v.sldComLanguage)("\u5f00\u6237\u884c\u6240\u5728\u5730")),name:"area",data:w.default,fieldNames:{label:"regionName",value:"regionCode",children:"children"},placeholder:"".concat((0,v.sldComLanguage)("\u8bf7\u9009\u62e9\u5f00\u6237\u884c\u6240\u5728\u5730")),initialValue:[],onChange:t.getAreaInfo,rules:[{required:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u9009\u62e9\u5f00\u6237\u884c\u6240\u5728\u5730"))}]},{type:"switch",label:"".concat((0,v.sldComLanguage)("\u8bbe\u4e3a\u9ed8\u8ba4")),name:"isDefault",placeholder:"",initialValue:1}],t.alipayAccount=[{type:"input",label:"".concat((0,v.sldComLanguage)("\u652f\u4ed8\u5b9d\u59d3\u540d")),name:"alipayName",placeholder:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u59d3\u540d")),extra:"".concat((0,v.sldComLanguage)("\u6700\u591a\u8f93\u516510\u5b57")),initialValue:"",maxLength:10,rules:[{required:!0,whitespace:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u59d3\u540d"))}]},{type:"input",label:"".concat((0,v.sldComLanguage)("\u652f\u4ed8\u5b9d\u8d26\u53f7")),name:"alipayAccount",placeholder:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u8d26\u53f7")),extra:"".concat((0,v.sldComLanguage)("\u6700\u591a\u8f93\u516530\u5b57")),initialValue:"",maxLength:30,rules:[{required:!0,whitespace:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u8d26\u53f7"))},{pattern:/^(?:1[3-9]\d{9}|[a-zA-Z\d._-]*\@[a-zA-Z\d.-]{1,10}\.[a-zA-Z\d]{1,20})$/,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u652f\u4ed8\u5b9d\u8d26\u53f7"))}]},{type:"switch",label:"".concat((0,v.sldComLanguage)("\u8bbe\u4e3a\u9ed8\u8ba4")),name:"isDefault",placeholder:"",initialValue:1}],t.cur_edit_id="",t.cur_edit_info="",t.sel_area_name="",t.edit=function(e){var a=t.state,n=a.addData,l=a.operateData;if(l=JSON.parse(JSON.stringify(n)),1==e.accountType){for(var i in l=l.concat(JSON.parse(JSON.stringify(t.bankAccount))),l)if(l[i].initialValue=e[l[i].name],"accountType"==l[i].name)l[i].onChange=function(e){V.handleAccountType(e)};else if("bankAccountNumber"==l[i].name)l[i].rules=[{required:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u516c\u53f8\u94f6\u884c\u8d26\u53f7"))},{validator:function(e,a,t){return(0,v.validatorNumber)(e,a,t)}}];else if("area"==l[i].name){l[i].onChange=function(e){V.getAreaInfo(e)};var o=[],c=["provinceCode","cityCode","districtCode"];for(var d in c)void 0!=c[d]&&c[d]&&o.push(e[c[d]]);l[i].initialValue=o,t.sel_area_name=e.addressAll}}else for(var u in l=l.concat(JSON.parse(JSON.stringify(t.alipayAccount))),l)l[u].initialValue=e[l[u].name],"accountType"==l[u].name?l[u].onChange=function(e){V.handleAccountType(e)}:"alipayAccount"==l[u].name&&(l[u].rules=[{required:!0,whitespace:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u8d26\u53f7"))},{pattern:/^(?:1[3-9]\d{9}|[a-zA-Z\d._-]*\@[a-zA-Z\d.-]{1,10}\.[a-zA-Z\d]{1,20})$/,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u652f\u4ed8\u5b9d\u8d26\u53f7"))}]);t.cur_edit_id=e.accountId,t.cur_edit_info=e,t.setState({resetFlag:!1,type:"edit",title:"".concat((0,v.sldComLanguage)("\u7f16\u8f91\u7ed3\u7b97\u8d26\u53f7")),operateData:l,modalVisible:!0})},t.handleAccountType=function(e){var a=t.state,n=a.addData,l=a.operateData,i=a.type;if(l=JSON.parse(JSON.stringify(n)),1==e)for(var o in l=l.concat(JSON.parse(JSON.stringify(t.bankAccount))),l)"accountType"==l[o].name?(l[o].initialValue=e,l[o].onChange=function(e){V.handleAccountType(e)}):"area"==l[o].name&&(l[o].onChange=function(e){V.getAreaInfo(e)});else if(2==e)for(var c in l=l.concat(JSON.parse(JSON.stringify(t.alipayAccount))),l)"accountType"==l[c].name?(l[c].initialValue=e,l[c].onChange=function(e){V.handleAccountType(e)}):"alipayAccount"==l[c].name&&(l[c].rules=[{required:!0,whitespace:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u8d26\u53f7"))},{pattern:/^(?:1[3-9]\d{9}|[a-zA-Z\d._-]*\@[a-zA-Z\d.-]{1,10}\.[a-zA-Z\d]{1,20})$/,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u652f\u4ed8\u5b9d\u8d26\u53f7"))}]);if("edit"==i&&e==t.cur_edit_info.accountType)for(var d in l)if(l[d].initialValue=t.cur_edit_info[l[d].name],"area"==l[d].name){var u=[],s=["provinceCode","cityCode","districtCode"];for(var r in s)void 0!=s[r]&&s[r]&&u.push(t.cur_edit_info[s[r]]);l[d].initialValue=u,t.sel_area_name=t.cur_edit_info.addressAll}t.setState({operateData:l,resetFlag:!0},function(){setTimeout(function(){t.setState({resetFlag:!1})},500)})},t.operate=function(e,a){var n=t.state.params,l=t.props.dispatch,i="",o={};"del"==a?(i="bill/del_account",o.accountId=e):"edit"==a?(i="bill/edit_account",o=e):"set_default"==a&&(i="bill/set_account_default",o=e),l({type:i,payload:o,callback:function(e){200==e.state?((0,v.sucTip)(e.msg),t.get_list(n),t.setState({modalVisible:!1})):(0,v.failTip)(e.msg),t.setState({submiting:!1})}})},t.add=function(){var e=t.state,a=e.addData,n=e.operateData;for(var l in n=JSON.parse(JSON.stringify(a)),n=n.concat(JSON.parse(JSON.stringify(t.bankAccount))),n)"accountType"==n[l].name?n[l].onChange=function(e){V.handleAccountType(e)}:"bankAccountNumber"==n[l].name?n[l].rules=[{required:!0,message:"".concat((0,v.sldComLanguage)("\u8bf7\u8f93\u5165\u516c\u53f8\u94f6\u884c\u8d26\u53f7"))},{validator:function(e,a,t){return(0,v.validatorNumber)(e,a,t)}}]:"area"==n[l].name&&(n[l].onChange=function(e){V.getAreaInfo(e)});t.setState({resetFlag:!1,modalVisible:!0,type:"add",title:"".concat((0,v.sldComLanguage)("\u65b0\u589e\u7ed3\u7b97\u8d26\u53f7")),operateData:n})},t.get_list=function(e){t.setState({initLoading:!0});var a=t.props.dispatch;a({type:"bill/get_account_lists",payload:(0,d.default)({},e),callback:function(a){t.setState({initLoading:!1}),200==a.state&&((null==a.data.list||0==a.data.list.length)&&t.state.params.current>1?(e.current=e.current-1,t.get_list(e)):t.setState({data:a.data}))}})},t.handleSelectRows=function(e,a){t.setState({selectedRows:e,selectedRowKeys:a})},t.handleTablePagination=function(e,a,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",i=t.state.formValues;if("main"==l){var o=(0,v.sldHandlePaginationData)(e,a,n,i);N=o.pageSize,t.setState({params:o}),t.get_list(o)}},t.resizeTable=function(e,a,n,l){var i=(0,v.dragSldTableColumn)(e,a,l);t.setState((0,c.default)({},n,i))},t.getAreaInfo=function(e){for(var a in e)t.sel_area_name+=e[a].regionName},t.sldHandleCancle=function(){t.setState({modalVisible:!1})},t.sldHandleConfirm=function(e){var a=t.state,n=a.addressType,l=a.type,i=t.props.dispatch,o=(0,m.default)(t);1==e.accountType&&(e.area&&(e.provinceCode=void 0!=e.area[0]?e.area[0]:"",e.cityCode=void 0!=e.area[1]?e.area[1]:"",e.districtCode=void 0!=e.area[2]?e.area[2]:"",delete e.area),e.addressAll=t.sel_area_name),e.isDefault=e.isDefault?1:0,t.setState({submiting:!0}),"edit"==l?(e.accountId=t.cur_edit_id,t.operate(e,"edit")):(e.type=n,i({type:"bill/add_account",payload:e,callback:function(e){200==e.state?((0,v.sucTip)(e.msg),o.get_list({pageSize:N}),t.setState({modalVisible:!1})):(0,v.failTip)(e.msg),t.setState({submiting:!1})}}))},V=(0,m.default)(t),t.state={resetFlag:!1,initLoading:!1,submiting:!1,data:{},selectedRows:[],selectedRowKeys:[],title:"",addressType:e.type,type:"add",params:{pageSize:N},upload_img_info:{},operateData:[],addData:[{type:"radio",label:"".concat((0,v.sldComLanguage)("\u8d26\u53f7\u7c7b\u578b")),name:"accountType",placeholder:"",sel_data:[{name:"".concat((0,v.sldComLanguage)("\u94f6\u884c\u8d26\u53f7")),key:1},{name:"".concat((0,v.sldComLanguage)("\u652f\u4ed8\u5b9d\u8d26\u53f7")),key:2}],initialValue:1,onChange:t.handleAccountType}],formValues:{},columns:[{title:" ",dataIndex:"accountId",align:"center",width:55,render:function(e,a,n){return(0,v.getTableNum)(t.state.params,N,n)}},{title:"".concat((0,v.sldComLanguage)("\u7ed3\u7b97\u8d26\u53f7")),dataIndex:"billNumber",align:"center",width:100},{title:"".concat((0,v.sldComLanguage)("\u8d26\u6237\u7c7b\u578b")),dataIndex:"accountTypeValue",align:"center",width:100},{title:"".concat((0,v.sldComLanguage)("\u9ed8\u8ba4\u8d26\u53f7")),dataIndex:"isDefault",align:"center",width:80,render:function(e,a){return _.default.createElement(o.default,{onChange:function(e){return t.operate({accountId:a.accountId,isDefault:e?1:0},"set_default")},checked:1==e,valuepropname:"checked"})}},{title:"".concat((0,v.sldComLanguage)("\u64cd\u4f5c")),width:100,align:"center",render:function(e,a){return _.default.createElement(_.Fragment,null,(0,v.sldtbaleOpeBtnText)("\u7f16\u8f91",function(){return t.edit(a)}),_.default.createElement("span",{className:S.default.splitLine}),(0,v.sldPopConfirmDiy)("leftBottom","".concat((0,v.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664")),function(){return t.operate(a.accountId,"del")},"".concat((0,v.sldComLanguage)("\u786e\u5b9a")),"".concat((0,v.sldComLanguage)("\u53d6\u6d88")),(0,v.sldtbaleOpeBtnText)("\u5220\u9664",function(){return null})))}}]},t}return(0,p.default)(a,e),(0,s.default)(a,[{key:"componentDidMount",value:function(){this.get_list({pageSize:N})}},{key:"render",value:function(){var e=this,a=this.state,t=a.selectedRows,n=a.columns,l=a.initLoading,o=a.data,c=a.submiting,d=a.operateData,u=a.modalVisible,s=a.title,r=a.resetFlag;return _.default.createElement("div",{className:S.default.common_page,style:{flex:1}},(0,v.sldLlineRtextAddGoodsAddMargin)("#69A2F2","".concat((0,v.sldComLanguage)("\u7ed3\u7b97\u8d26\u53f7")),0,0,10),_.default.createElement("div",{className:S.default.operate_bg},(0,v.sldIconBtn)(function(){return e.add()},"".concat((0,v.sldComLanguage)("\u65b0\u589e\u7ed3\u7b97\u8d26\u53f7")),7,7)),_.default.createElement(i.default,{spinning:l},_.default.createElement(A.default,{totalHeight:document.body.clientHeight-150-15,selectedRows:t,data:o,rowKey:"accountId",isCheck:!1,columns:n,onSelectRow:this.handleSelectRows,onChange:function(a,t,n){return e.handleTablePagination(a,t,n,"main")},onSldHandleSeleRow:this.onSldHandleSeleRow,resizeTable:function(a,t){return e.resizeTable(a,t,"columns",n)},isColumnResize:!0})),_.default.createElement(T.default,{title:s,submiting:c,width:500,modalVisible:u,sldHandleConfirm:function(a){return e.sldHandleConfirm(a)},sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:v.formItemLayoutModal,content:d,resetFlag:r}))}}]),a}(_.Component),C=y))||C)||C);a.default=k}}]);