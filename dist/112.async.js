(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[112],{Fq7q:function(e,a,t){"use strict";var n=t("g09b"),l=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("T2oS");var d=n(t("W9HT"));t("BoS7");var i=n(t("Sdc0")),o=n(t("eHn4")),r=n(t("p0pE")),s=n(t("2Taf")),c=n(t("vZ4D")),u=n(t("l4Ni")),m=n(t("ujKo")),g=n(t("rlhR")),f=n(t("MhPg"));t("y8nQ");var p,b,L,h,C=n(t("Vl3Y")),I=t("MuoO"),v=l(t("q1tI")),y=t("+n12"),S=n(t("hh8c")),w=n(t("CkN6")),_=n(t("RTFr")),N=y.list_com_page_more,V=(p=(0,I.connect)(function(e){var a=e.store;return{store:a}}),b=C.default.create(),p(L=b((h=function(e){function a(e){var t;return(0,s.default)(this,a),t=(0,u.default)(this,(0,m.default)(a).call(this,e)),t.cat_data={type:"select",label:"".concat((0,y.sldComLanguage)("\u4e0a\u7ea7\u5206\u7c7b")),name:"parentInnerLabelId",placeholder:"".concat((0,y.sldComLanguage)("\u8bf7\u9009\u62e9\u4e0a\u7ea7\u5206\u7c7b")),sel_data:[],sele_key:"innerLabelId",sele_name:"innerLabelName",diy:!0},t.get_list=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props.dispatch,n=t.state.data;a({type:"store/get_category_list",payload:(0,r.default)({},e,{pageSize:N}),callback:function(e){200==e.state?(n.list=e.data,t.cat_data.sel_data=e.data,t.setState({data:n})):(0,y.failTip)(e.msg)}})},t.handleSelectRows=function(e,a){t.setState({selectedRows:e,selectedRowKeys:a})},t.handleTablePagination=function(e,a,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main";if("main"==l){var d=t.state.formValues,i=(0,y.sldHandlePaginationData)(e,a,n,d);N=i.pageSize,t.setState({params:i}),t.get_list(i)}},t.addCat=function(){var e=t.state.addData;e=e.filter(function(e){return"parentInnerLabelId"!=e.name});for(var a=0;a<e.length;a++)"innerLabelName"==e[a].name&&e.splice(a+1,0,JSON.parse(JSON.stringify(t.cat_data))),e[a].initialValue="";t.setState({modalVisible:!0,type:"add",title:"".concat((0,y.sldComLanguage)("\u65b0\u589e\u5e97\u94fa\u5206\u7c7b")),addData:e})},t.addNextCat=function(e){var a=t.state.addData;a=a.filter(function(e){return"parentInnerLabelId"!=e.name});for(var n=0;n<a.length;n++)"innerLabelName"==a[n].name&&a.splice(n+1,0,JSON.parse(JSON.stringify(t.cat_data))),"parentInnerLabelId"==a[n].name?(a[n].initialValue=e.innerLabelId,a[n].disable=!0):a[n].initialValue="";t.setState({modalVisible:!0,type:"add",title:"".concat((0,y.sldComLanguage)("\u6dfb\u52a0\u4e0b\u7ea7\u5206\u7c7b")),addData:a})},t.editCat=function(e){var a=t.state.addData;a=a.filter(function(e){return"parentInnerLabelId"!=e.name});for(var n=0;n<a.length;n++)a[n].initialValue=e[a[n].name];t.setState({type:"edit",title:"".concat((0,y.sldComLanguage)("\u7f16\u8f91\u5e97\u94fa\u5206\u7c7b")),addData:a,modalVisible:!0,curData:e})},t.operateCat=function(e,a){var n={},l=t.props.dispatch,d="";"add"==a?(d="store/add_category",n=e):"edit"==a?(d="store/edit_category",n=e):"switch"==a?(d="store/switch_category",n=e):"del"==a&&(d="store/del_category",n.innerLabelId=e),t.setState({submiting:!0}),l({type:d,payload:n,callback:function(e){200==e.state?((0,y.sucTip)(e.msg),t.get_list(),t.setState({modalVisible:!1})):(0,y.failTip)(e.msg),t.setState({submiting:!1})}})},t.sldHandleConfirm=function(e){var a=t.state,n=a.curData,l=a.type,d={};d.innerLabelName=e.innerLabelName,d.innerLabelSort=e.innerLabelSort,d.isShow=e.isShow?1:0,"edit"==l?(d.innerLabelId=n.innerLabelId,t.operateCat(d,"edit")):(d.parentInnerLabelId=e.parentInnerLabelId?e.parentInnerLabelId:0,t.operateCat(d,"add"))},t.sldHandleCancle=function(){t.setState({modalVisible:!1})},t.resizeTable=function(e,a,n,l){var d=(0,y.dragSldTableColumn)(e,a,l);t.setState((0,o.default)({},n,d))},(0,g.default)(t),t.state={data:{},formValues:{},submiting:!1,loading:!1,selectedRows:[],selectedRowKeys:[],modalVisible:!1,title:"".concat((0,y.sldComLanguage)("\u65b0\u589e\u5546\u54c1\u5206\u7c7b")),type:"add",params:{},curData:{},addData:[{type:"input",label:"".concat((0,y.sldComLanguage)("\u5206\u7c7b\u540d\u79f0")),name:"innerLabelName",extra:"".concat((0,y.sldComLanguage)("\u6700\u591a\u8f93\u51656\u4e2a\u5b57")),placeholder:"".concat((0,y.sldComLanguage)("\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0")),initialValue:"",maxLength:6,rules:[{required:!0,whitespace:!0,message:"".concat((0,y.sldComLanguage)("\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"))}]},{type:"inputnum",label:"".concat((0,y.sldComLanguage)("\u6392\u5e8f")),name:"innerLabelSort",extra:"".concat((0,y.sldComLanguage)("\u8bf7\u8f93\u51650~255\u7684\u6570\u5b57,\u503c\u8d8a\u5c0f,\u663e\u793a\u8d8a\u9760\u524d")),placeholder:"".concat((0,y.sldComLanguage)("\u8bf7\u8f93\u5165\u6392\u5e8f")),initialValue:"",rules:[{required:!0,message:"".concat((0,y.sldComLanguage)("\u8bf7\u8f93\u5165\u6392\u5e8f"))},{validator:function(e,a,t){return(0,y.validatorNumbe)(e,a,t)}}]},{type:"switch",label:"".concat((0,y.sldComLanguage)("\u542f\u7528")),name:"isShow",placeholder:"",initialValue:1}],columns:[{title:"".concat((0,y.sldComLanguage)("\u5206\u7c7b\u540d\u79f0")),align:"left",dataIndex:"innerLabelName",width:150},{title:"".concat((0,y.sldComLanguage)("\u6392\u5e8f")),dataIndex:"innerLabelSort",align:"center",width:100},{title:"".concat((0,y.sldComLanguage)("\u663e\u793a\u72b6\u6001")),dataIndex:"isShow",align:"center",width:80,render:function(e,a){return v.default.createElement(i.default,{onChange:function(e){return t.operateCat({innerLabelId:a.innerLabelId,isShow:e?1:0},"switch")},checked:1==e,valuepropname:"checked"})}},{title:"".concat((0,y.sldComLanguage)("\u64cd\u4f5c")),align:"center",width:100,render:function(e,a){return v.default.createElement(v.Fragment,null,(0,y.sldtbaleOpeBtnText)("".concat((0,y.sldComLanguage)("\u7f16\u8f91")),function(){return t.editCat(a)}),0==a.parentInnerLabelId&&v.default.createElement(v.Fragment,null,v.default.createElement("span",{className:S.default.splitLine}),(0,y.sldtbaleOpeBtnText)("".concat((0,y.sldComLanguage)("\u6dfb\u52a0\u4e0b\u7ea7\u5206\u7c7b")),function(){return t.addNextCat(a)})),(void 0==a.children||void 0!=a.children&&(null==a.children||0==a.children.length))&&v.default.createElement(v.Fragment,null,v.default.createElement("span",{className:S.default.splitLine}),(0,y.sldPopConfirmDiy)("leftBottom","".concat((0,y.sldComLanguage)("\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d\uff0c\u662f\u5426\u786e\u5b9a\u5220\u9664")),function(){return t.operateCat(a.innerLabelId,"del")},"".concat((0,y.sldComLanguage)("\u786e\u5b9a")),"".concat((0,y.sldComLanguage)("\u53d6\u6d88")),(0,y.sldtbaleOpeBtnText)("".concat((0,y.sldComLanguage)("\u5220\u9664")),function(){return null}))))}}]},t}return(0,f.default)(a,e),(0,c.default)(a,[{key:"componentDidMount",value:function(){this.get_list()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,a=this.state,t=a.selectedRows,n=a.modalVisible,l=a.title,i=a.addData,o=a.columns,r=a.submiting,s=a.data,c=a.loading;return v.default.createElement("div",{className:S.default.common_page},(0,y.sldLlineRtextAddGoodsAddMargin)("#FA6F1E","".concat((0,y.sldComLanguage)("\u5e97\u94fa\u5206\u7c7b\u7ba1\u7406")),0,0,5),v.default.createElement(d.default,{spinning:c},v.default.createElement("div",{className:S.default.operate_bg},(0,y.sldIconBtn)(function(){return e.addCat()},"".concat((0,y.sldComLanguage)("\u65b0\u589e\u5206\u7c7b")),7,0)),v.default.createElement(w.default,{totalHeight:document.body.clientHeight-170,selectedRows:t,data:s,rowKey:"innerLabelId",isCheck:!1,columns:o,onSelectRow:this.handleSelectRows,onChange:function(a,t,n){return e.handleTablePagination(a,t,n,"main")},sldpagination:!1,resizeTable:function(a,t){return e.resizeTable(a,t,"columns",o)},isColumnResize:!0}),v.default.createElement(_.default,{zIndex:11,width:500,title:l,submiting:r,modalVisible:n,sldHandleConfirm:function(a){return e.sldHandleConfirm(a)},sldHandleCancle:this.sldHandleCancle,formItemLayoutModal:y.formItemLayoutModal,content:i})))}}]),a}(v.Component),L=h))||L)||L);a.default=V}}]);